(()=>{"use strict";class e{constructor(e,t,n){if(this.m=e,this.n=t,null!=n){if(n.length!=e*t)throw new Error("サイズの不一致");this.matrix=[];for(let s=0;s<e;s++){this.matrix[s]=[];for(let r=0;r<t;r++)this.matrix[s][r]=n[s+e*r]}}else{this.matrix=[];for(let n=0;n<e;n++){this.matrix[n]=[];for(let e=0;e<t;e++)this.matrix[n][e]=0}}}setValue(e,t,n){if(e<0||e>=this.m||t<0||t>=this.n)throw new Error("範囲外");this.matrix[e][t]=n}getValue(e,t){if(e<0||e>=this.m||t<0||t>=this.n)throw new Error("範囲外");return this.matrix[e][t]}mul(t){if(this.n!=t.m)throw new Error("サイズの不一致");const n=new e(this.m,t.n);for(let e=0;e<this.m;e++)for(let s=0;s<t.n;s++){let r=0;for(let n=0;n<this.n;n++)r+=this.getValue(e,n)*t.getValue(n,s);n.setValue(e,s,r)}return n}toArray(){const e=[];for(let t=0;t<this.m;t++)for(let n=0;n<this.n;n++)e[t+this.m*n]=this.getValue(t,n);return e}}class t{constructor(e,t,n,s,r,i){this.position=e,this.rotation=t,this.fov=n,this.aspect=s,this.near=r,this.far=i}getRotateMatrix(){return new e(4,4,[1,0,0,0,0,Math.cos(this.rotation.x),Math.sin(this.rotation.x),0,0,-Math.sin(this.rotation.x),Math.cos(this.rotation.x),0,0,0,0,1]).mul(new e(4,4,[Math.cos(this.rotation.y),0,-Math.sin(this.rotation.y),0,0,1,0,0,Math.sin(this.rotation.y),0,Math.cos(this.rotation.y),0,0,0,0,1]))}getTranslateMatrix(){return new e(4,4,[1,0,0,0,0,1,0,0,0,0,1,0,-this.position.x,-this.position.y,-this.position.z,1])}getInvRotateMatrixForMove(){return new e(4,4,[Math.cos(-this.rotation.y),0,-Math.sin(-this.rotation.y),0,0,1,0,0,Math.sin(-this.rotation.y),0,Math.cos(-this.rotation.y),0,0,0,0,1])}move(t){const n=this.getInvRotateMatrixForMove().mul(new e(4,1,[t.x,t.y,t.z,0]));this.position.x+=n.getValue(0,0),this.position.y+=n.getValue(1,0),this.position.z+=n.getValue(2,0)}rotate(e){this.rotation.x=Math.min(Math.max(this.rotation.x+e.x,-Math.PI/2),Math.PI/2),this.rotation.y=(this.rotation.y+e.y)%(2*Math.PI)}getViewMatrix(){return this.getRotateMatrix().mul(this.getTranslateMatrix())}getProjectionMatrix(){return new e(4,4,[1/(this.aspect*Math.tan(this.fov/2)),0,0,0,0,1/Math.tan(this.fov/2),0,0,0,0,-(this.far+this.near)/(this.far-this.near),-1,0,0,-2*this.far*this.near/(this.far-this.near),0])}}class n{constructor(e,t){this.x=e,this.y=t}toArray(){return[this.x,this.y]}}class s{constructor(e,t,n){this.x=e,this.y=t,this.z=n}toArray(){return[this.x,this.y,this.z]}}const r="KeyA",i="KeyD",a="KeyW",o="KeyS",h="Space",u="ShiftLeft";class c{constructor(e){this.L=0,this.R=0,this.F=0,this.B=0,this.U=0,this.D=0,e.addEventListener("keydown",(e=>{switch(e.code){case r:this.L=1;break;case i:this.R=1;break;case a:this.F=1;break;case o:this.B=1;break;case h:this.U=1;break;case u:this.D=1}}),!1),e.addEventListener("keyup",(e=>{switch(e.code){case r:this.L=0;break;case i:this.R=0;break;case a:this.F=0;break;case o:this.B=0;break;case h:this.U=0;break;case u:this.D=0}}),!1)}getLR(){return this.R-this.L}getUD(){return this.U-this.D}getFB(){return this.B-this.F}}class d{constructor(e,t,n){this.lastMovementX=0,this.lastMovementY=0,this.sensitivity=.003,this.sensitivity=n||.003,e.addEventListener("mousemove",(e=>{Math.abs(this.lastMovementX)<15&&Math.abs(e.movementX)>50||Math.abs(this.lastMovementY)<15&&Math.abs(e.movementY)>50||(this.lastMovementX=e.movementX,this.lastMovementY=e.movementY,t.rotate(new s(e.movementY*this.sensitivity,e.movementX*this.sensitivity,0)))}),!1)}}class f{constructor(e,t,n){this.x=e,this.y=t,this.z=n}getX(){return this.x}getY(){return this.y}getZ(){return this.z}}function l(e){return new Promise(((t,n)=>{const s=new Image;s.onload=()=>{const e=document.createElement("canvas"),n=64*Math.ceil(s.width/64);e.width=n,e.height=s.height;const r=e.getContext("2d");if(null==r)throw new Error("画像の読み込みに失敗しました");r.drawImage(s,0,0,n,s.height),t(r.getImageData(0,0,n,s.height))},s.onerror=e=>n(e),s.src=e}))}function g(e){return fetch(e).then((e=>e.text()))}function m(e){const t=[];return e.replace(/\r/g,"").split("\n").forEach((e=>{""!=(e=e.replace(/\s+/g," ").replace(/(^\s|\s$)/g,""))&&(e.startsWith("#")||t.push(e))})),t}var p,v=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{h(s.next(e))}catch(e){i(e)}}function o(e){try{h(s.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};function x(e){return v(this,void 0,void 0,(function*(){const t=m(yield g(e)),n=[];let s=null,r=null;for(let i=0;i<t.length;i++){const a=t[i].split(" ");"newmtl"==a[0]?(null!=s&&null!=r&&n.push({name:s,mapKd:r}),s=a[1],r=null):"map_Kd"==a[0]&&(r=e.replace(/\/[^/]*$/,"/"+a[1]))}return n.push({name:s,mapKd:r}),n}))}!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.SOUTH=2]="SOUTH",e[e.NORTH=3]="NORTH",e[e.EAST=4]="EAST",e[e.WEST=5]="WEST"}(p||(p={}));class w{constructor(){this.vertices=[],this.normals=[],this.uvCoords=[]}addFace(e,t){if(null==e||e.length<3)throw new Error("頂点が３つ以上必要です");if(null!=t&&e.length!=t.length)throw new Error("頂点の数と UV 座標の数が一致しません");for(let s=1;s<e.length-1;s++)null!=t?this.addTriangle(e[0],e[s],e[s+1],t[0],t[s],t[s+1]):this.addTriangle(e[0],e[s],e[s+1],new n(0,0),new n(0,0),new n(0,0))}addTriangle(e,t,n,s,r,i){const a=this.getSurfaceNormal(e,t,n);this.addVertex(e),this.addUVCoord(s),this.addNormal(a),this.addVertex(t),this.addUVCoord(r),this.addNormal(a),this.addVertex(n),this.addUVCoord(i),this.addNormal(a)}getSurfaceNormal(e,t,n){const r=new s(t.x-e.x,t.y-e.y,t.z-e.z),i=new s(n.x-e.x,n.y-e.y,n.z-e.z);return new s(r.y*i.z-r.z*i.y,r.z*i.x-r.x*i.z,r.x*i.y-r.y*i.x)}addNormal(e){this.normals.push(e.x,e.y,e.z)}addVertex(e){this.vertices.push(e.x,e.y,e.z)}addUVCoord(e){this.uvCoords.push(e.x,e.y)}getVertices(){return this.vertices}getNormals(){return this.normals}getUVCoords(){return this.uvCoords}}class y extends w{constructor(){super(),this.textureImages=[],this.instancePositions=[],this.instanceRotations=[],this.instanceTextureIds=[];const e=new s(-.5,.5,.5),t=new s(-.5,.5,-.5),r=new s(.5,.5,-.5),i=new s(.5,.5,.5),a=new s(-.5,-.5,.5),o=new s(-.5,-.5,-.5),h=new s(.5,-.5,-.5),u=new s(.5,-.5,.5);this.addFace([e,i,r,t],[new n(1/4,1/3),new n(.5,1/3),new n(.5,0),new n(1/4,0)]),this.addFace([a,o,h,u],[new n(1/4,2/3),new n(1/4,1),new n(.5,1),new n(.5,2/3)]),this.addFace([e,t,o,a],[new n(1/4,1/3),new n(0,1/3),new n(0,2/3),new n(1/4,2/3)]),this.addFace([i,u,h,r],[new n(.5,1/3),new n(.5,2/3),new n(3/4,2/3),new n(3/4,1/3)]),this.addFace([e,a,u,i],[new n(1/4,1/3),new n(1/4,2/3),new n(.5,2/3),new n(.5,1/3)]),this.addFace([t,r,h,o],[new n(1,1/3),new n(3/4,1/3),new n(3/4,2/3),new n(1,2/3)])}getOffsets(){return this.getVertices()}addInstance(e,t,n=p.SOUTH){this.instancePositions.push(e),this.instanceTextureIds.push(t),this.instanceRotations.push(n)}setTextureImages(e){this.textureImages=e}getTextureImages(){const e=[];return this.textureImages.forEach((t=>{e.push(t)})),e}getInstancePositions(){const e=[];return this.instancePositions.forEach((t=>{e.push(...t.toArray())})),e}getInstanceRotations(){const e=[];return this.instanceRotations.forEach((t=>{e.push(t)})),e}getInstanceTextureIds(){const e=[];return this.instanceTextureIds.forEach((t=>{e.push(t)})),e}getInstanceCount(){return this.instancePositions.length}getVertexCount(){return this.getVertices().length/3}}class T{constructor(e,t,r,i){this.v=[],this.vn=[],this.vt=[],this.f=[],this.v=e,this.vn=t,this.vt=r,this.f=i,this.vertices=[],this.normals=[],this.uvCoords=[],this.textureImages=[],this.vertexCount=0,this.f.forEach((e=>{const t=[],r=[],i=[];e.forEach((e=>{const a=this.v[e[0]-1];t.push(new s(a[0],a[1],a[2]));const o=this.vt[e[1]-1];i.push(new n(o[0],o[1]));const h=this.vn[e[2]-1];r.push(new s(h[0],h[1],h[2]))})),this.addFace(t,i,r)}))}addFace(e,t,n){for(let s=1;s<e.length-1;s++)this.addTriangle(e[0],e[s],e[s+1],n[0],n[s],n[s+1],t[0],t[s],t[s+1])}addTriangle(e,t,n,s,r,i,a,o,h){this.addVertex(e),this.addNormal(s),this.addUVCoord(a),this.addVertex(t),this.addNormal(r),this.addUVCoord(o),this.addVertex(n),this.addNormal(i),this.addUVCoord(h),this.vertexCount+=3}addVertex(e){this.vertices.push(e.x,e.y,e.z)}addNormal(e){this.normals.push(e.x,e.y,e.z)}addUVCoord(e){this.uvCoords.push(e.x,1-e.y)}getVertices(){return this.vertices}getNormals(){return this.normals}getUVCoords(){return this.uvCoords}getOffsets(){return this.getVertices()}setTextureImages(e){this.textureImages=e}getTextureImages(){const e=[];return this.textureImages.forEach((t=>{e.push(t)})),e}getInstancePositions(){return[0,20,0]}getInstanceRotations(){return[p.TOP]}getInstanceTextureIds(){return[0]}getInstanceCount(){return 1}getVertexCount(){return this.vertexCount}}class M extends w{constructor(){super(),this.textureImages=[],this.instancePositions=[],this.instanceRotations=[],this.instanceTextureIds=[];const e=new s(-.5,.5,.5),t=new s(.5,.5,.5),r=new s(.5,-.5,.5),i=new s(-.5,-.5,.5),a=new n(0,0),o=new n(1,0),h=new n(0,1),u=new n(1,1);this.addFace([e,i,r,t],[a,h,u,o])}getOffsets(){return this.getVertices()}addInstance(e,t,n=p.SOUTH){this.instancePositions.push(e),this.instanceTextureIds.push(t),this.instanceRotations.push(n)}setTextureImages(e){this.textureImages=e}getTextureImages(){const e=[];return this.textureImages.forEach((t=>{e.push(t)})),e}getInstancePositions(){const e=[];return this.instancePositions.forEach((t=>{e.push(...t.toArray())})),e}getInstanceRotations(){const e=[];return this.instanceRotations.forEach((t=>{e.push(t)})),e}getInstanceTextureIds(){const e=[];return this.instanceTextureIds.forEach((t=>{e.push(t)})),e}getInstanceCount(){return this.instancePositions.length}getVertexCount(){return this.getVertices().length/3}}const b={r:0,g:0,b:0,a:1};class P{constructor(e,t){this.ctx=e,this.device=t,e.configure({device:t,format:navigator.gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),this.depthTexture=t.createTexture({size:[e.canvas.width,e.canvas.height],format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT});const n=t.createShaderModule({code:"\nstruct VertexOut {\n  @builtin(position) position : vec4f,\n  @location(0) diffuse: f32,\n  @location(1) @interpolate(flat) textureId: u32,\n  @location(2) uv : vec2f\n}\n\n@group(0) @binding(0) var<uniform> numLights: u32;\n@group(0) @binding(1) var<uniform> lights: array<vec3f, 20>;\n@group(0) @binding(2) var<uniform> view: mat4x4f;\n@group(0) @binding(3) var<uniform> projection: mat4x4f;\n@group(0) @binding(4) var mySampler: sampler;\n@group(0) @binding(5) var myTexture: texture_2d_array<f32>;\n\nvar<private> model = array<mat4x4f, 6>(\n  // T = (-pi/2, 0)\n  mat4x4f(1.0, 0.0, 0.0, 0.0,\n      0.0, 0.0, -1.0, 0.0,\n      0.0, 1.0, 0.0, 0.0,\n      0.0, 0.0, 0.0, 1.0),\n  // B = (pi/2, 0)\n  mat4x4f(1.0, 0.0, 0.0, 0.0,\n      0.0, 0.0, 1.0, 0.0,\n      0.0, -1.0, 0.0, 0.0,\n      0.0, 0.0, 0.0, 1.0),\n  // S = (0, 0)\n  mat4x4f(1.0, 0.0, 0.0, 0.0,\n      0.0, 1.0, 0.0, 0.0,\n      0.0, 0.0, 1.0, 0.0,\n      0.0, 0.0, 0.0, 1.0),\n  // N = (0, pi)\n  mat4x4f(-1.0, 0.0, 0.0, 0.0,\n      0.0, 1.0, 0.0, 0.0,\n      0.0, 0.0, -1.0, 0.0,\n      0.0, 0.0, 0.0, 1.0),\n  // E = (0, pi/2)\n  mat4x4f(0.0, 0.0, -1.0, 0.0,\n      0.0, 1.0, 0.0, 0.0,\n      1.0, 0.0, 0.0, 0.0,\n      0.0, 0.0, 0.0, 1.0),\n  // W = (0, -pi/2)\n  mat4x4f(0.0, 0.0, 1.0, 0.0,\n      0.0, 1.0, 0.0, 0.0,\n      -1.0, 0.0, 0.0, 0.0,\n      0.0, 0.0, 0.0, 1.0)\n);\n\n// TODO: 後で uniform で渡せるようにする\nvar<private> scale = mat4x4f(\n  1.0, 0.0, 0.0, 0.0,\n  0.0, 1.0, 0.0, 0.0,\n  0.0, 0.0, 1.0, 0.0,\n  0.0, 0.0, 0.0, 1.0\n);\n\n@vertex\nfn vertex_main(\n  @location(0) offset: vec3f,\n  @location(1) normal: vec3f,\n  @location(2) position: vec3f,\n  @location(3) rotation: u32,\n  @location(4) uv: vec2f,\n  @location(5) textureId: u32\n) -> VertexOut {\n  var out: VertexOut;\n  out.position = projection * view * (vec4f(position, 1.0) + scale * model[rotation] * vec4f(offset, 1.0));\n\n  // ライティング\n  // TODO: 環境光によるライティング\n  var diffuse = 0.0;\n  for (var i = 0u; i < numLights; i++) {\n    diffuse += max(0.0, - dot(model[rotation] * vec4f(normalize(normal), 0.0), vec4f(normalize(lights[i]), 0.0)));\n  }\n  out.diffuse = diffuse;\n\n  out.textureId = textureId;\n  out.uv = uv;\n  return out;\n}\n\n@fragment\nfn fragment_main(fragData: VertexOut) -> @location(0) vec4f {\n  return vec4f(fragData.diffuse * textureSample(myTexture, mySampler, fragData.uv, fragData.textureId).rgb, 1.0);\n}\n"}),s={vertex:{module:n,entryPoint:"vertex_main",buffers:[{attributes:[{shaderLocation:0,offset:0,format:"float32x3"}],arrayStride:12,stepMode:"vertex"},{attributes:[{shaderLocation:1,offset:0,format:"float32x3"}],arrayStride:12,stepMode:"vertex"},{attributes:[{shaderLocation:2,offset:0,format:"float32x3"}],arrayStride:12,stepMode:"instance"},{attributes:[{shaderLocation:3,offset:0,format:"uint32"}],arrayStride:4,stepMode:"instance"},{attributes:[{shaderLocation:4,offset:0,format:"float32x2"}],arrayStride:8,stepMode:"vertex"},{attributes:[{shaderLocation:5,offset:0,format:"uint32"}],arrayStride:4,stepMode:"instance"}]},fragment:{module:n,entryPoint:"fragment_main",targets:[{format:navigator.gpu.getPreferredCanvasFormat()}]},primitive:{topology:"triangle-list",cullMode:"back"},layout:"auto",depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus"}};this.renderPipeline=t.createRenderPipeline(s),this.sampler=t.createSampler({magFilter:"linear",minFilter:"linear"}),this.numLightsBuffer=this.device.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.lightsBuffer=this.device.createBuffer({size:320,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.viewBuffer=this.device.createBuffer({size:64,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.projectionBuffer=this.device.createBuffer({size:64,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.bindings=new Map}render(e,t){const n=this.device.createCommandEncoder(),s=e.getLights(),r=new Float32Array(s.flatMap((e=>[e.getX(),e.getY(),e.getZ(),0]))),i=new Uint32Array([s.length]),a=new Float32Array(t.getViewMatrix().toArray()),o=new Float32Array(t.getProjectionMatrix().toArray());this.device.queue.writeBuffer(this.numLightsBuffer,0,i,0,i.length),this.device.queue.writeBuffer(this.lightsBuffer,0,r,0,r.length),this.device.queue.writeBuffer(this.viewBuffer,0,a,0,a.length),this.device.queue.writeBuffer(this.projectionBuffer,0,o,0,o.length),n.beginRenderPass({colorAttachments:[{clearValue:b,loadOp:"clear",storeOp:"store",view:this.ctx.getCurrentTexture().createView()}],depthStencilAttachment:{view:this.depthTexture.createView(),depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store"}}).end(),e.getMeshes().forEach((e=>{let t=this.bindings.get(e);if(null==t){const s=e.getTextureImages(),r=s[0].width,i=s[0].height,a=s.length,o=this.device.createTexture({size:[r,i,Math.max(a,2)],format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT}),h=this.device.createBuffer({size:r*i*a*4,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),u=new Uint8Array(h.getMappedRange());s.forEach(((e,t)=>{u.set(e.data,r*i*t*4)})),h.unmap(),n.copyBufferToTexture({buffer:h,bytesPerRow:4*r,rowsPerImage:i},{texture:o},{width:r,height:i,depthOrArrayLayers:a});const c=this.device.createBindGroup({layout:this.renderPipeline.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this.numLightsBuffer}},{binding:1,resource:{buffer:this.lightsBuffer}},{binding:2,resource:{buffer:this.viewBuffer}},{binding:3,resource:{buffer:this.projectionBuffer}},{binding:4,resource:this.sampler},{binding:5,resource:o.createView()}]}),d=new Float32Array(e.getOffsets()),f=this.device.createBuffer({size:d.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});this.device.queue.writeBuffer(f,0,d,0,d.length);const l=new Float32Array(e.getNormals()),g=this.device.createBuffer({size:l.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});this.device.queue.writeBuffer(g,0,l,0,l.length);const m=new Float32Array(e.getInstancePositions()),p=this.device.createBuffer({size:m.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});this.device.queue.writeBuffer(p,0,m,0,m.length);const v=new Uint32Array(e.getInstanceRotations()),x=this.device.createBuffer({size:v.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});this.device.queue.writeBuffer(x,0,v,0,v.length);const w=new Float32Array(e.getUVCoords()),y=this.device.createBuffer({size:w.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});this.device.queue.writeBuffer(y,0,w,0,w.length);const T=new Uint32Array(e.getInstanceTextureIds()),M=this.device.createBuffer({size:T.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});this.device.queue.writeBuffer(M,0,T,0,T.length),t={bindGroup:c,offsets:f,normals:g,positions:p,rotations:x,uvs:y,textureIds:M},this.bindings.set(e,t)}const s=n.beginRenderPass({colorAttachments:[{loadOp:"load",storeOp:"store",view:this.ctx.getCurrentTexture().createView()}],depthStencilAttachment:{view:this.depthTexture.createView(),depthLoadOp:"load",depthStoreOp:"store"}});s.setPipeline(this.renderPipeline),s.setBindGroup(0,t.bindGroup),s.setVertexBuffer(0,t.offsets),s.setVertexBuffer(1,t.normals),s.setVertexBuffer(2,t.positions),s.setVertexBuffer(3,t.rotations),s.setVertexBuffer(4,t.uvs),s.setVertexBuffer(5,t.textureIds),s.draw(e.getVertexCount(),e.getInstanceCount()),s.end()})),this.device.queue.submit([n.finish()])}}class U{constructor(e,t){this.meshes=null!=e?e:[],this.lights=null!=t?t:[]}getLights(){return this.lights}getMeshes(){return this.meshes}addMesh(e){this.meshes.indexOf(e)<0&&this.meshes.push(e)}removeMesh(e){const t=this.meshes.indexOf(e);t>=0&&this.meshes.splice(t,1)}addLight(e){this.lights.indexOf(e)<0&&this.lights.push(e)}removeLight(e){const t=this.lights.indexOf(e);t>=0&&this.lights.splice(t,1)}}var I=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{h(s.next(e))}catch(e){i(e)}}function o(e){try{h(s.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};window.onload=()=>I(void 0,void 0,void 0,(function*(){const e=document.body.appendChild(document.createElement("canvas"));e.width=1e3,e.height=500;const n=e.getContext("webgpu");if(null==n)return;const r=yield navigator.gpu.requestAdapter();if(null==r)return;const i=yield r.requestDevice(),a=document.body.appendChild(document.createElement("pre")),o=new t(new s(0,0,10),new s(0,0,0),70/180*Math.PI,e.width/e.height,.5,100),h=new U;function u(){return Math.floor(10*Math.random())}h.addLight(new f(1,2,3)),h.addLight(new f(-1,-2,-3));const p=new y;p.setTextureImages([yield l("./texture/dice.png")]),h.addMesh(p);for(let e=0;e<100;e++)p.addInstance(new s(u(),u(),u()),0,Math.floor(6*Math.random()));const w=new y;w.setTextureImages([yield l("./texture/dice2.png")]),h.addMesh(w);for(let e=0;e<100;e++)w.addInstance(new s(u()+10,u()+10,u()+10),0);const b=new M;b.setTextureImages([yield l("./texture/white.png"),yield l("./texture/yellow.png")]),h.addMesh(b);for(let e=0;e<100;e++)b.addInstance(new s(u()-10,u()-10,u()-10),Math.floor(2*Math.random()),Math.floor(6*Math.random()));const B=yield function(e){return v(this,void 0,void 0,(function*(){const t=m(yield g(e)),n=[],s=[],r=[],i=[],a=[];let o=[],h=null;for(let u=0;u<t.length;u++){const c=t[u].split(" ");if("usemtl"==c[0])null!=h&&i.push({f:o,mtlName:h}),o=[],h=c[1];else if("v"==c[0])n.push([Number(c[1]),Number(c[2]),Number(c[3])]);else if("vn"==c[0])s.push([Number(c[1]),Number(c[2]),Number(c[3])]);else if("vt"==c[0])r.push([Number(c[1]),Number(c[2]),Number(c[3])]);else if("f"==c[0]){const e=[];o.push(e);for(let t=1;t<c.length;t++){const n=c[t].split("/");e.push([Number(n[0]),Number(n[1]),Number(n[2])])}}else"mtllib"==c[0]&&a.push(...yield x(e.replace(/\/[^/]*$/,"/"+c[1])))}return i.push({f:o,mtlName:h}),{v:n,vn:s,vt:r,objects:i,materials:a}}))}("./obj/example.obj");console.log(B.objects.length);for(let e=0;e<B.objects.length;e++){const t=new T(B.v,B.vn,B.vt,B.objects[e].f),n=B.materials.find((t=>t.name==B.objects[e].mtlName));null!=n&&null!=n.mapKd&&t.setTextureImages([yield l(n.mapKd)]),h.addMesh(t)}const V=new P(n,i),E=new c(window);new d(window,o),function(e){window.addEventListener("wheel",(t=>{e.fov=Math.max(30/180*Math.PI,Math.min(110/180*Math.PI,e.fov+.001*t.deltaY))}),!1)}(o);let C=null,O=0,R=0,S=0,L=0;function N(e,t){return 0==t||e*t<0?0:e<=-1||e>=1?e:e+.05*t}const F=e=>I(void 0,void 0,void 0,(function*(){const t=e-(O||e);O=e,R=N(R,E.getLR()),S=N(S,E.getUD()),L=N(L,E.getFB()),o.move(new s(R*t/50,S*t/50,L*t/50)),V.render(h,o),a.textContent=`FPS: ${1/t*1e3}\ncameraPosX: ${o.position.x}\ncameraPosY: ${o.position.y}\ncameraPosZ: ${o.position.z}\ncameraRotX: ${o.rotation.x}\ncameraRotY: ${o.rotation.y}\ncameraRotZ: ${o.rotation.z}\ncameraFov: ${o.fov}`,C=requestAnimationFrame(F)}));document.addEventListener("pointerlockchange",(()=>{null==document.pointerLockElement?null!=C&&cancelAnimationFrame(C):(O=performance.now(),C=requestAnimationFrame(F))}),!1),document.addEventListener("click",(()=>{document.body.requestPointerLock()}),!1)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWJiLEdBQ0ZjLHFCQUFxQmQsSUFHdkJDLEVBQWdCYyxZQUFZQyxNQUM1QmhCLEVBQVlZLHNCQUFzQkosRyxJQUVuQyxHQUNIcFIsU0FBUzNCLGlCQUFpQixTQUFTLEtBQ2pDMkIsU0FBUytPLEtBQUs4QyxvQkFBb0IsSUFDakMsRUFDTCxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHR0azEvZWFzeS13ZWJncHUvLi9zcmMvbWF0cml4LnRzIiwid2VicGFjazovL0B0dGsxL2Vhc3ktd2ViZ3B1Ly4vc3JjL2NhbWVyYS50cyIsIndlYnBhY2s6Ly9AdHRrMS9lYXN5LXdlYmdwdS8uL3NyYy92ZWN0b3IudHMiLCJ3ZWJwYWNrOi8vQHR0azEvZWFzeS13ZWJncHUvLi9zcmMvaW5wdXQudHMiLCJ3ZWJwYWNrOi8vQHR0azEvZWFzeS13ZWJncHUvLi9zcmMvbGlnaHQudHMiLCJ3ZWJwYWNrOi8vQHR0azEvZWFzeS13ZWJncHUvLi9zcmMvdXRpbC50cyIsIndlYnBhY2s6Ly9AdHRrMS9lYXN5LXdlYmdwdS8uL3NyYy9mYWNlLnRzIiwid2VicGFjazovL0B0dGsxL2Vhc3ktd2ViZ3B1Ly4vc3JjL2xvYWRlci50cyIsIndlYnBhY2s6Ly9AdHRrMS9lYXN5LXdlYmdwdS8uL3NyYy9nZW9tZXRyeUJhc2UudHMiLCJ3ZWJwYWNrOi8vQHR0azEvZWFzeS13ZWJncHUvLi9zcmMvbWVzaC9pbnN0YW5jZWRDdWJlLnRzIiwid2VicGFjazovL0B0dGsxL2Vhc3ktd2ViZ3B1Ly4vc3JjL21lc2gvaW5zdGFuY2VkQ3VzdG9tTWVzaC50cyIsIndlYnBhY2s6Ly9AdHRrMS9lYXN5LXdlYmdwdS8uL3NyYy9tZXNoL2luc3RhbmNlZFNxdWFyZS50cyIsIndlYnBhY2s6Ly9AdHRrMS9lYXN5LXdlYmdwdS8uL3NyYy9zaGFkZXIud2dzbC50cyIsIndlYnBhY2s6Ly9AdHRrMS9lYXN5LXdlYmdwdS8uL3NyYy9yZW5kZXJlci50cyIsIndlYnBhY2s6Ly9AdHRrMS9lYXN5LXdlYmdwdS8uL3NyYy9zY2VuZS50cyIsIndlYnBhY2s6Ly9AdHRrMS9lYXN5LXdlYmdwdS8uL3NyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBNYXRyaXgge1xuICBwdWJsaWMgbTogbnVtYmVyO1xuICBwdWJsaWMgbjogbnVtYmVyO1xuICBwcml2YXRlIG1hdHJpeDogbnVtYmVyW11bXTtcblxuICBwdWJsaWMgY29uc3RydWN0b3IobTogbnVtYmVyLCBuOiBudW1iZXIpO1xuICBwdWJsaWMgY29uc3RydWN0b3IobTogbnVtYmVyLCBuOiBudW1iZXIsIGFycjogbnVtYmVyW10pO1xuICBwdWJsaWMgY29uc3RydWN0b3IobTogbnVtYmVyLCBuOiBudW1iZXIsIGFycj86IG51bWJlcltdKSB7XG4gICAgdGhpcy5tID0gbTtcbiAgICB0aGlzLm4gPSBuO1xuXG4gICAgaWYgKGFyciAhPSBudWxsKSB7XG4gICAgICAvLyBhcnIg44GM5LiO44GI44KJ44KM44Gm44GE44Gf44KJ44CBYXJyIOOBp+WIneacn+WMluOBmeOCi1xuICAgICAgaWYgKGFyci5sZW5ndGggIT0gbSAqIG4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfjgrXjgqTjgrrjga7kuI3kuIDoh7QnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubWF0cml4ID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG07IGkrKykge1xuICAgICAgICB0aGlzLm1hdHJpeFtpXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG47IGorKykge1xuICAgICAgICAgIHRoaXMubWF0cml4W2ldW2pdID0gYXJyW2kgKyBtICogal07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tYXRyaXggPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbTsgaSsrKSB7XG4gICAgICAgIHRoaXMubWF0cml4W2ldID0gW107XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbjsgaisrKSB7XG4gICAgICAgICAgdGhpcy5tYXRyaXhbaV1bal0gPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNldFZhbHVlKGk6IG51bWJlciwgajogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGkgPCAwIHx8IGkgPj0gdGhpcy5tIHx8IGogPCAwIHx8IGogPj0gdGhpcy5uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+evhOWbsuWklicpO1xuICAgIH1cbiAgICB0aGlzLm1hdHJpeFtpXVtqXSA9IHZhbHVlO1xuICB9XG5cbiAgcHVibGljIGdldFZhbHVlKGk6IG51bWJlciwgajogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAoaSA8IDAgfHwgaSA+PSB0aGlzLm0gfHwgaiA8IDAgfHwgaiA+PSB0aGlzLm4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign56+E5Zuy5aSWJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1hdHJpeFtpXVtqXTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgZPjga7ooYzliJfjgasgbWF0IOOCkuWPs+OBi+OCieS5l+eul+OBl+OBn+OCguOBruOCkui/lOOBmVxuICAgKiBAcGFyYW0gbWF0XG4gICAqIEByZXR1cm5zIOOBk+OBruihjOWIl+OBq21hdOOCkuWPs+OBi+OCieS5l+eul+OBl+OBn+e1kOaenFxuICAgKi9cbiAgcHVibGljIG11bChtYXQ6IE1hdHJpeCk6IE1hdHJpeCB7XG4gICAgaWYgKHRoaXMubiAhPSBtYXQubSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfjgrXjgqTjgrrjga7kuI3kuIDoh7QnKTtcbiAgICB9XG5cbiAgICBjb25zdCBuZXdNYXQgPSBuZXcgTWF0cml4KHRoaXMubSwgbWF0Lm4pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbWF0Lm47IGorKykge1xuICAgICAgICBsZXQgc3VtID0gMDtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLm47IGsrKykge1xuICAgICAgICAgIHN1bSArPSB0aGlzLmdldFZhbHVlKGksIGspICogbWF0LmdldFZhbHVlKGssIGopO1xuICAgICAgICB9XG4gICAgICAgIG5ld01hdC5zZXRWYWx1ZShpLCBqLCBzdW0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3TWF0O1xuICB9XG5cbiAgcHVibGljIHRvQXJyYXkoKTogbnVtYmVyW10ge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5uOyBqKyspIHtcbiAgICAgICAgYXJyW2kgKyB0aGlzLm0gKiBqXSA9IHRoaXMuZ2V0VmFsdWUoaSwgaik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH1cbn1cbiIsImltcG9ydCB7IE1hdHJpeCB9IGZyb20gJy4vbWF0cml4JztcbmltcG9ydCB7IFZlYzMgfSBmcm9tICcuL3ZlY3Rvcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FtZXJhIHtcbiAgcG9zaXRpb246IFZlYzM7XG4gIHJvdGF0aW9uOiBWZWMzO1xuICBtb3ZlKG1vdGlvbjogVmVjMyk6IHZvaWQ7XG4gIHJvdGF0ZShyb3RhdGlvbjogVmVjMyk6IHZvaWQ7XG4gIGdldFZpZXdNYXRyaXgoKTogTWF0cml4O1xuICBnZXRQcm9qZWN0aW9uTWF0cml4KCk6IE1hdHJpeDtcbn1cblxuLyoqXG4gKiDpgI/oppbmipXlvbHjgqvjg6Hjg6lcbiAqL1xuZXhwb3J0IGNsYXNzIFBlcnNwZWN0aXZlQ2FtZXJhIGltcGxlbWVudHMgQ2FtZXJhIHtcbiAgcHVibGljIHBvc2l0aW9uOiBWZWMzO1xuICBwdWJsaWMgcm90YXRpb246IFZlYzM7XG4gIHB1YmxpYyBmb3Y6IG51bWJlcjtcbiAgcHVibGljIGFzcGVjdDogbnVtYmVyO1xuICBwdWJsaWMgbmVhcjogbnVtYmVyO1xuICBwdWJsaWMgZmFyOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBwb3RpdGlvbiDjgqvjg6Hjg6njga7kvY3nva5cbiAgICogQHBhcmFtIHJvdGF0aW9uIOOCq+ODoeODqeazqOimlueCueODu+Wbnui7ou+8iOOCquOCpOODqeODvOinku+8iSwgWCAtPiBZIOOBrumghuOBq+Wbnui7ou+8iOS4gOaXplrjga/nhKHoppbjgZnjgovjgojjgYbjgavjgZfjgabjgovvvIlcbiAgICogQHBhcmFtIGZvdiDoppbph47op5IsIOWNmOS9jeOBr+ODqeOCuOOCouODs1xuICAgKiBAcGFyYW0gYXNwZWN0IOeUu+mdouOBrue4puaoquavlCwgdy9oXG4gICAqIEBwYXJhbSBuZWFyIG5lYXIgcGxhbmXjgb7jgafjga7ot53pm6JcbiAgICogQHBhcmFtIGZhciBmYXIgcGxhbmXjgb7jgafjga7ot53pm6JcbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcihwb3RpdGlvbjogVmVjMywgcm90YXRpb246IFZlYzMsIGZvdjogbnVtYmVyLCBhc3BlY3Q6IG51bWJlciwgbmVhcjogbnVtYmVyLCBmYXI6IG51bWJlcikge1xuICAgIHRoaXMucG9zaXRpb24gPSBwb3RpdGlvbjtcbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XG4gICAgdGhpcy5mb3YgPSBmb3Y7XG4gICAgdGhpcy5hc3BlY3QgPSBhc3BlY3Q7XG4gICAgdGhpcy5uZWFyID0gbmVhcjtcbiAgICB0aGlzLmZhciA9IGZhcjtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Um90YXRlTWF0cml4KCk6IE1hdHJpeCB7XG4gICAgcmV0dXJuIG5ldyBNYXRyaXgoNCwgNCwgW1xuICAgICAgMSwgMCwgMCwgMCxcbiAgICAgIDAsIE1hdGguY29zKHRoaXMucm90YXRpb24ueCksIE1hdGguc2luKHRoaXMucm90YXRpb24ueCksIDAsXG4gICAgICAwLCAtIE1hdGguc2luKHRoaXMucm90YXRpb24ueCksIE1hdGguY29zKHRoaXMucm90YXRpb24ueCksIDAsXG4gICAgICAwLCAwLCAwLCAxXG4gICAgXSkubXVsKG5ldyBNYXRyaXgoNCwgNCwgW1xuICAgICAgTWF0aC5jb3ModGhpcy5yb3RhdGlvbi55KSwgMCwgLSBNYXRoLnNpbih0aGlzLnJvdGF0aW9uLnkpLCAwLFxuICAgICAgMCwgMSwgMCwgMCxcbiAgICAgIE1hdGguc2luKHRoaXMucm90YXRpb24ueSksIDAsIE1hdGguY29zKHRoaXMucm90YXRpb24ueSksIDAsXG4gICAgICAwLCAwLCAwLCAxXG4gICAgXSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRUcmFuc2xhdGVNYXRyaXgoKTogTWF0cml4IHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeCg0LCA0LCBbXG4gICAgICAxLCAwLCAwLCAwLFxuICAgICAgMCwgMSwgMCwgMCxcbiAgICAgIDAsIDAsIDEsIDAsXG4gICAgICAtIHRoaXMucG9zaXRpb24ueCwgLSB0aGlzLnBvc2l0aW9uLnksIC0gdGhpcy5wb3NpdGlvbi56LCAxXG4gICAgXSk7XG4gIH1cblxuICAvKipcbiAgICog56e75YuV5pmC44Gr6KaW54K544Gu6auY44GV44Gr6Zai44KP44KJ44Ga5rC05bmz5pa55ZCR44G456e75YuV44GX44Gf44GE44Gu44Gn44CBXG4gICAqIHgg5pa55ZCR44Gu5Zue6Lui77yI44OU44OD44OB77yJ44GvIDAg44Gn6KiI566X44GZ44KLXG4gICAqL1xuICBwcml2YXRlIGdldEludlJvdGF0ZU1hdHJpeEZvck1vdmUoKTogTWF0cml4IHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeCg0LCA0LCBbXG4gICAgICBNYXRoLmNvcygtIHRoaXMucm90YXRpb24ueSksIDAsIC0gTWF0aC5zaW4oLSB0aGlzLnJvdGF0aW9uLnkpLCAwLFxuICAgICAgMCwgMSwgMCwgMCxcbiAgICAgIE1hdGguc2luKC0gdGhpcy5yb3RhdGlvbi55KSwgMCwgTWF0aC5jb3MoLSB0aGlzLnJvdGF0aW9uLnkpLCAwLFxuICAgICAgMCwgMCwgMCwgMVxuICAgIF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCq+ODoeODqeOBruS9jee9ruOCkuenu+WLleOBmeOCi1xuICAgKiBAcGFyYW0gbW90aW9uIOenu+WLleODmeOCr+ODiOODq1xuICAgKi9cbiAgcHVibGljIG1vdmUobW90aW9uOiBWZWMzKTogdm9pZCB7XG4gICAgY29uc3QgY29udmVydGVkID0gdGhpcy5nZXRJbnZSb3RhdGVNYXRyaXhGb3JNb3ZlKCkubXVsKG5ldyBNYXRyaXgoNCwgMSwgW1xuICAgICAgbW90aW9uLngsXG4gICAgICBtb3Rpb24ueSxcbiAgICAgIG1vdGlvbi56LFxuICAgICAgMFxuICAgIF0pKTtcbiAgICB0aGlzLnBvc2l0aW9uLnggKz0gY29udmVydGVkLmdldFZhbHVlKDAsIDApO1xuICAgIHRoaXMucG9zaXRpb24ueSArPSBjb252ZXJ0ZWQuZ2V0VmFsdWUoMSwgMCk7XG4gICAgdGhpcy5wb3NpdGlvbi56ICs9IGNvbnZlcnRlZC5nZXRWYWx1ZSgyLCAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgqvjg6Hjg6njga7lkJHjgY3jgpLlm57ou6LjgZnjgovjgIJcbiAgICog5Z6C55u05pa55ZCR77yIeO+8ieOBruWbnui7ouOBryBbLSBQSSAvIDIsICsgUEkgLyAyXSDjga7nr4Tlm7LjgavliLbpmZDjgZnjgovjgIJcbiAgICogQHBhcmFtIHJvdGF0aW9uIOOCq+ODoeODqeazqOimlueCueODu+Wbnui7ou+8iOOCquOCpOODqeODvOinku+8iSwgWCAtPiBZIOOBrumghuOBq+Wbnui7ou+8iOS4gOaXplrjga/nhKHoppbjgZnjgovjgojjgYbjgavjgZfjgabjgovvvIlcbiAgICovXG4gIHB1YmxpYyByb3RhdGUocm90YXRpb246IFZlYzMpOiB2b2lkIHtcbiAgICB0aGlzLnJvdGF0aW9uLnggPSBNYXRoLm1pbihNYXRoLm1heCh0aGlzLnJvdGF0aW9uLnggKyByb3RhdGlvbi54LCAtIE1hdGguUEkgLyAyKSwgTWF0aC5QSSAvIDIpO1xuICAgIHRoaXMucm90YXRpb24ueSA9ICh0aGlzLnJvdGF0aW9uLnkgKyByb3RhdGlvbi55KSAlICgyICogTWF0aC5QSSk7XG4gIH1cblxuICAvKipcbiAgICog44OT44Ol44O85aSJ5o+b6KGM5YiX44KS6L+U44GZXG4gICAqL1xuICBwdWJsaWMgZ2V0Vmlld01hdHJpeCgpOiBNYXRyaXgge1xuICAgIHJldHVybiB0aGlzLmdldFJvdGF0ZU1hdHJpeCgpLm11bCh0aGlzLmdldFRyYW5zbGF0ZU1hdHJpeCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmipXlvbHlpInmj5vooYzliJfjgpLov5TjgZlcbiAgICovXG4gIHB1YmxpYyBnZXRQcm9qZWN0aW9uTWF0cml4KCk6IE1hdHJpeCB7XG4gICAgcmV0dXJuIG5ldyBNYXRyaXgoNCwgNCwgW1xuICAgICAgMSAvICh0aGlzLmFzcGVjdCAqIE1hdGgudGFuKHRoaXMuZm92IC8gMikpLCAwLCAwLCAwLFxuICAgICAgMCwgMSAvIE1hdGgudGFuKHRoaXMuZm92IC8gMiksIDAsIDAsXG4gICAgICAwLCAwLCAtICh0aGlzLmZhciArIHRoaXMubmVhcikgLyAodGhpcy5mYXIgLSB0aGlzLm5lYXIpLCAtMSxcbiAgICAgIDAsIDAsIC0gMiAqIHRoaXMuZmFyICogdGhpcy5uZWFyIC8gKHRoaXMuZmFyIC0gdGhpcy5uZWFyKSwgMFxuICAgIF0pO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVmVjMiB7XG4gIHB1YmxpYyB4OiBudW1iZXI7XG4gIHB1YmxpYyB5OiBudW1iZXI7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKHggOm51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICB9XG5cbiAgcHVibGljIHRvQXJyYXkoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnldO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBWZWMzIHtcbiAgcHVibGljIHg6IG51bWJlcjtcbiAgcHVibGljIHk6IG51bWJlcjtcbiAgcHVibGljIHo6IG51bWJlcjtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoeCA6bnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICB9XG5cbiAgcHVibGljIHRvQXJyYXkoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMuel07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZlYzQge1xuICBwdWJsaWMgeDogbnVtYmVyO1xuICBwdWJsaWMgeTogbnVtYmVyO1xuICBwdWJsaWMgejogbnVtYmVyO1xuICBwdWJsaWMgdzogbnVtYmVyO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcih4IDpudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyLCB3OiBudW1iZXIpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgICB0aGlzLncgPSB3O1xuICB9XG5cbiAgcHVibGljIHRvQXJyYXkoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMueiwgdGhpcy53XTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ2FtZXJhLCBQZXJzcGVjdGl2ZUNhbWVyYSB9IGZyb20gJy4vY2FtZXJhJztcbmltcG9ydCB7IFZlYzMgfSBmcm9tICcuL3ZlY3Rvcic7XG5cbi8vIOOCreODvOODnuODg+ODl+ioreWumlxuY29uc3QgS0VZX0xFRlQgPSAnS2V5QSc7XG5jb25zdCBLRVlfUklHSFQgPSAnS2V5RCc7XG5jb25zdCBLRVlfRlJPTlQgPSAnS2V5Vyc7XG5jb25zdCBLRVlfQkFDSyA9ICdLZXlTJztcbmNvbnN0IEtFWV9VUCA9ICdTcGFjZSc7XG5jb25zdCBLRVlfRE9XTiA9ICdTaGlmdExlZnQnO1xuXG5leHBvcnQgY2xhc3MgRlBTS2V5Ym9hcmQge1xuICBwcml2YXRlIEwgPSAwOyAvLyBBXG4gIHByaXZhdGUgUiA9IDA7IC8vIERcbiAgcHJpdmF0ZSBGID0gMDsgLy8gV1xuICBwcml2YXRlIEIgPSAwOyAvLyBTXG4gIHByaXZhdGUgVSA9IDA7IC8vIFNQQ1xuICBwcml2YXRlIEQgPSAwOyAvLyBTRlRcblxuICBwdWJsaWMgY29uc3RydWN0b3Iod2luZG93OiBXaW5kb3cpIHtcbiAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICBzd2l0Y2ggKGV2ZW50LmNvZGUpIHtcbiAgICAgICAgY2FzZSBLRVlfTEVGVDpcbiAgICAgICAgICB0aGlzLkwgPSAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEtFWV9SSUdIVDpcbiAgICAgICAgICB0aGlzLlIgPSAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEtFWV9GUk9OVDpcbiAgICAgICAgICB0aGlzLkYgPSAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEtFWV9CQUNLOlxuICAgICAgICAgIHRoaXMuQiA9IDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgS0VZX1VQOlxuICAgICAgICAgIHRoaXMuVSA9IDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgS0VZX0RPV046XG4gICAgICAgICAgdGhpcy5EID0gMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZUtleVVwID0gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICBzd2l0Y2ggKGV2ZW50LmNvZGUpIHtcbiAgICAgICAgY2FzZSBLRVlfTEVGVDpcbiAgICAgICAgICB0aGlzLkwgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEtFWV9SSUdIVDpcbiAgICAgICAgICB0aGlzLlIgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEtFWV9GUk9OVDpcbiAgICAgICAgICB0aGlzLkYgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEtFWV9CQUNLOlxuICAgICAgICAgIHRoaXMuQiA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgS0VZX1VQOlxuICAgICAgICAgIHRoaXMuVSA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgS0VZX0RPV046XG4gICAgICAgICAgdGhpcy5EID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93biwgZmFsc2UpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGhhbmRsZUtleVVwLCBmYWxzZSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0TFIoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5SIC0gdGhpcy5MO1xuICB9XG5cbiAgcHVibGljIGdldFVEKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuVSAtIHRoaXMuRDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRGQigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLkIgLSB0aGlzLkY7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZQU01vdXNlIHtcbiAgcHJpdmF0ZSBsYXN0TW92ZW1lbnRYID0gMDtcbiAgcHJpdmF0ZSBsYXN0TW92ZW1lbnRZID0gMDtcbiAgcHJpdmF0ZSBzZW5zaXRpdml0eSA9IDAuMDAzO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aW5kb3c6IFdpbmRvdywgY2FtZXJhOiBDYW1lcmEsIHNlbnNpdGl2aXR5PzogbnVtYmVyKSB7XG4gICAgLy8g5oSf5bqm44Gu44OH44OV44Kp44Or44OI5YCk6Kit5a6aXG4gICAgdGhpcy5zZW5zaXRpdml0eSA9IHNlbnNpdGl2aXR5IHx8IDAuMDAzO1xuXG4gICAgY29uc3QgaGFuZGxlTW91c2VNb3ZlID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAvLyDjg57jgqbjgrnjgavjgojjgaPjgabjga/lgKTjgYzjgZ/jgb7jgavot7Pjga3jgabjgqvjg6Hjg6njga7mlrnlkJHjgYzmgKXjgavlpInjgo/jgaPjgabjgZfjgb7jgYbloLTlkIjjgYzjgYLjgovjga7jgadcbiAgICAgIC8vIOWJjeWbnuOBruWApOOCgui4j+OBvuOBiOiqv+aVtOOBmeOCi1xuICAgICAgaWYgKE1hdGguYWJzKHRoaXMubGFzdE1vdmVtZW50WCkgPCAxNSAmJiBNYXRoLmFicyhldmVudC5tb3ZlbWVudFgpID4gNTAgfHxcbiAgICAgICAgTWF0aC5hYnModGhpcy5sYXN0TW92ZW1lbnRZKSA8IDE1ICYmIE1hdGguYWJzKGV2ZW50Lm1vdmVtZW50WSkgPiA1MCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyDliY3lm57jga7lgKTjgpLmm7TmlrBcbiAgICAgIHRoaXMubGFzdE1vdmVtZW50WCA9IGV2ZW50Lm1vdmVtZW50WDtcbiAgICAgIHRoaXMubGFzdE1vdmVtZW50WSA9IGV2ZW50Lm1vdmVtZW50WTtcblxuICAgICAgLy8g44Kq44Kk44Op44O86KeS44Gn44KE44KL44Gu44Gn57im5pa55ZCR44GMIHgg44Gn44GC44KL44GT44Go44Gr5rOo5oSPXG4gICAgICAvLyDjgq3jg6Pjg7Pjg5Djgrnjga/nuKbmlrnlkJHjgYwgeSDjgarjga7jgafjgZPjgZPjgaflhaXjgozmm7/jgYjjgabjgYTjgotcbiAgICAgIC8vIOOBk+OBk+OBq+OCq+ODoeODqeOBruOCpOODs+OCueOCv+ODs+OCueOBruWHpueQhuOCkuWFpeOCjOOBn+OBj+OBquOBhOOBjOOAguOAguOAguOBqOOCiuOBguOBiOOBmuOBk+OBruWun+ijheOBp1xuICAgICAgY2FtZXJhLnJvdGF0ZShuZXcgVmVjMyhcbiAgICAgICAgZXZlbnQubW92ZW1lbnRZICogdGhpcy5zZW5zaXRpdml0eSxcbiAgICAgICAgZXZlbnQubW92ZW1lbnRYICogdGhpcy5zZW5zaXRpdml0eSxcbiAgICAgICAgMFxuICAgICAgKSk7XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlTW91c2VNb3ZlLCBmYWxzZSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdoZWVsWm9vbShjYW1lcmE6IFBlcnNwZWN0aXZlQ2FtZXJhKTogdm9pZCB7XG4gIGNvbnN0IGhhbmRsZVdoZWVsID0gKGV2ZW50OiBXaGVlbEV2ZW50KSA9PiB7XG4gICAgLy8gMzAgfiAxMTAg44Gu56+E5Zuy44Gn6Kit5a6a44GZ44KLXG4gICAgY2FtZXJhLmZvdiA9IE1hdGgubWF4KCgzMCAvIDE4MCkgKiBNYXRoLlBJLFxuICAgICAgTWF0aC5taW4oKDExMCAvIDE4MCkgKiBNYXRoLlBJLFxuICAgICAgICBjYW1lcmEuZm92ICsgZXZlbnQuZGVsdGFZICogMC4wMDEpKTtcbiAgfTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgaGFuZGxlV2hlZWwsIGZhbHNlKTtcbn1cbiIsImV4cG9ydCBjbGFzcyBMaWdodCB7XG4gIHByaXZhdGUgeDogbnVtYmVyO1xuICBwcml2YXRlIHk6IG51bWJlcjtcbiAgcHJpdmF0ZSB6OiBudW1iZXI7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgfVxuXG4gIHB1YmxpYyBnZXRYKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMueDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRZKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMueTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRaKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuejtcbiAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGZldGNoSW1hZ2VEYXRhKHNyYzogc3RyaW5nKTogUHJvbWlzZTxJbWFnZURhdGE+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgY29uc3QgY3ZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAvLyDlvozjgafjg4bjgq/jgrnjg4Hjg6PjgpLoqq3jgb/jgaDjgZnpmpvjgavkuIDooYzjga7jg5DjgqTjg4jmlbDjgYwyNTbjga7lgI3mlbDjgavjgarjgaPjgabjgYTjgovlv4XopoHjgYzjgYLjgovjgZ/jgoFcbiAgICAgIC8vIOOBk+OBk+OBp+eUu+WDj+ODh+ODvOOCv+OBruW5heOCkjY044Gu5YCN5pWw44Gr44Oq44K144Kk44K644GZ44KL44GX44Gm44GK44GPXG4gICAgICAvLyByZWY6IGh0dHBzOi8vd3d3LnczLm9yZy9UUi93ZWJncHUvI2RvbS1ncHVpbWFnZWRhdGFsYXlvdXQtYnl0ZXNwZXJyb3dcbiAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5jZWlsKGltZy53aWR0aCAvIDY0KSAqIDY0O1xuICAgICAgY3ZzLndpZHRoID0gd2lkdGg7XG4gICAgICBjdnMuaGVpZ2h0ID0gaW1nLmhlaWdodDtcbiAgICAgIGNvbnN0IGN0eCA9IGN2cy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgaWYgKGN0eCA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign55S75YOP44Gu6Kqt44G/6L6844G/44Gr5aSx5pWX44GX44G+44GX44GfJyk7XG4gICAgICB9XG4gICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgd2lkdGgsIGltZy5oZWlnaHQpO1xuICAgICAgcmVzb2x2ZShjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHdpZHRoLCBpbWcuaGVpZ2h0KSk7XG4gICAgfTtcbiAgICBpbWcub25lcnJvciA9IChlKSA9PiByZWplY3QoZSk7XG4gICAgaW1nLnNyYyA9IHNyYztcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFRleHQoc3JjOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICByZXR1cm4gZmV0Y2goc3JjKS50aGVuKHJlcyA9PiByZXMudGV4dCgpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXByb2Nlc3NUZXh0KHRleHQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIHRleHQucmVwbGFjZSgvXFxyL2csICcnKS5zcGxpdCgnXFxuJykuZm9yRWFjaChsaW5lID0+IHtcbiAgICAvLyDkvZnoqIjjgarjgrnjg5rjg7zjgrnjgpLpmaTljrtcbiAgICBsaW5lID0gbGluZS5yZXBsYWNlKC9cXHMrL2csICcgJykucmVwbGFjZSgvKF5cXHN8XFxzJCkvZywgJycpO1xuICAgIC8vIOepuuOBruihjOOCkuWJiumZpFxuICAgIGlmIChsaW5lID09ICcnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIOOCs+ODoeODs+ODiOihjOOCkuWJiumZpFxuICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsaW5lcy5wdXNoKGxpbmUpO1xuICB9KTtcbiAgcmV0dXJuIGxpbmVzO1xufVxuIiwiZXhwb3J0IGVudW0gRmFjZSB7XG4gIFRPUCA9IDAsXG4gIEJPVFRPTSA9IDEsXG4gIFNPVVRIID0gMixcbiAgTk9SVEggPSAzLFxuICBFQVNUID0gNCxcbiAgV0VTVCA9IDVcbn1cbiIsImltcG9ydCB7IGZldGNoVGV4dCwgcHJlcHJvY2Vzc1RleHQgfSBmcm9tICcuL3V0aWwnO1xuXG5leHBvcnQgdHlwZSBNeU9iamVjdCA9IHtcbiAgZjogbnVtYmVyW11bXVtdO1xuICBtdGxOYW1lOiBzdHJpbmcgfCBudWxsO1xufTtcblxuZXhwb3J0IHR5cGUgT2JqID0ge1xuICB2OiBudW1iZXJbXVtdO1xuICB2bjogbnVtYmVyW11bXTtcbiAgdnQ6IG51bWJlcltdW107XG4gIG9iamVjdHM6IE15T2JqZWN0W107XG4gIG1hdGVyaWFsczogTXRsW107XG59O1xuXG5leHBvcnQgdHlwZSBNdGwgPSB7XG4gIG5hbWU6IHN0cmluZyB8IG51bGw7XG4gIG1hcEtkOiBzdHJpbmcgfCBudWxsO1xufTtcblxuYXN5bmMgZnVuY3Rpb24gbG9hZE10bChtdGxVcmw6IHN0cmluZyk6IFByb21pc2U8TXRsW10+IHtcbiAgY29uc3QgdGV4dCA9IGF3YWl0IGZldGNoVGV4dChtdGxVcmwpO1xuICBjb25zdCBsaW5lcyA9IHByZXByb2Nlc3NUZXh0KHRleHQpO1xuXG4gIGNvbnN0IG10bHM6IE10bFtdID0gW107XG4gIGxldCBtdGxOYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgbGV0IG10bE1hcEtkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHRlcm1zID0gbGluZXNbaV0uc3BsaXQoJyAnKTtcbiAgICBpZiAodGVybXNbMF0gPT0gJ25ld210bCcpIHtcbiAgICAgIGlmIChtdGxOYW1lICE9IG51bGwgJiYgbXRsTWFwS2QgIT0gbnVsbCkge1xuICAgICAgICBtdGxzLnB1c2goe1xuICAgICAgICAgIG5hbWU6IG10bE5hbWUsXG4gICAgICAgICAgbWFwS2Q6IG10bE1hcEtkXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgbXRsTmFtZSA9IHRlcm1zWzFdO1xuICAgICAgbXRsTWFwS2QgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAodGVybXNbMF0gPT0gJ21hcF9LZCcpIHtcbiAgICAgIG10bE1hcEtkID0gbXRsVXJsLnJlcGxhY2UoL1xcL1teL10qJC8sICcvJyArIHRlcm1zWzFdKTtcbiAgICB9XG4gIH1cblxuICBtdGxzLnB1c2goe1xuICAgIG5hbWU6IG10bE5hbWUsXG4gICAgbWFwS2Q6IG10bE1hcEtkXG4gIH0pO1xuXG4gIHJldHVybiBtdGxzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZE9iaihvYmpVcmw6IHN0cmluZyk6IFByb21pc2U8T2JqPiB7XG4gIGNvbnN0IHRleHQgPSBhd2FpdCBmZXRjaFRleHQob2JqVXJsKTtcbiAgY29uc3QgbGluZXMgPSBwcmVwcm9jZXNzVGV4dCh0ZXh0KTtcblxuICBjb25zdCB2OiBudW1iZXJbXVtdID0gW107XG4gIGNvbnN0IHZuOiBudW1iZXJbXVtdID0gW107XG4gIGNvbnN0IHZ0OiBudW1iZXJbXVtdID0gW107XG4gIGNvbnN0IG9iamVjdHM6IE15T2JqZWN0W10gPSBbXTtcbiAgY29uc3QgbWF0ZXJpYWxzOiBNdGxbXSA9IFtdO1xuXG4gIGxldCBmOiBudW1iZXJbXVtdW10gPSBbXTtcbiAgbGV0IG10bE5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgdGVybXMgPSBsaW5lc1tpXS5zcGxpdCgnICcpO1xuICAgIGlmICh0ZXJtc1swXSA9PSAndXNlbXRsJykge1xuICAgICAgaWYgKG10bE5hbWUgIT0gbnVsbCkge1xuICAgICAgICBvYmplY3RzLnB1c2goe1xuICAgICAgICAgIGY6IGYsXG4gICAgICAgICAgbXRsTmFtZTogbXRsTmFtZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGYgPSBbXTtcbiAgICAgIG10bE5hbWUgPSB0ZXJtc1sxXTtcbiAgICB9IGVsc2UgaWYgKHRlcm1zWzBdID09ICd2Jykge1xuICAgICAgdi5wdXNoKFtOdW1iZXIodGVybXNbMV0pLCBOdW1iZXIodGVybXNbMl0pLCBOdW1iZXIodGVybXNbM10pXSk7XG4gICAgfSBlbHNlIGlmICh0ZXJtc1swXSA9PSAndm4nKSB7XG4gICAgICB2bi5wdXNoKFtOdW1iZXIodGVybXNbMV0pLCBOdW1iZXIodGVybXNbMl0pLCBOdW1iZXIodGVybXNbM10pXSk7XG4gICAgfSBlbHNlIGlmICh0ZXJtc1swXSA9PSAndnQnKSB7XG4gICAgICB2dC5wdXNoKFtOdW1iZXIodGVybXNbMV0pLCBOdW1iZXIodGVybXNbMl0pLCBOdW1iZXIodGVybXNbM10pXSk7XG4gICAgfSBlbHNlIGlmICh0ZXJtc1swXSA9PSAnZicpIHtcbiAgICAgIGNvbnN0IGZmOiBudW1iZXJbXVtdID0gW107XG4gICAgICBmLnB1c2goZmYpO1xuICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCB0ZXJtcy5sZW5ndGg7IGorKykge1xuICAgICAgICBjb25zdCB2ZXJ0ZXggPSB0ZXJtc1tqXS5zcGxpdCgnLycpO1xuICAgICAgICBmZi5wdXNoKFtOdW1iZXIodmVydGV4WzBdKSwgTnVtYmVyKHZlcnRleFsxXSksIE51bWJlcih2ZXJ0ZXhbMl0pXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0ZXJtc1swXSA9PSAnbXRsbGliJykge1xuICAgICAgbWF0ZXJpYWxzLnB1c2goLi4uKGF3YWl0IGxvYWRNdGwob2JqVXJsLnJlcGxhY2UoL1xcL1teL10qJC8sICcvJyArIHRlcm1zWzFdKSkpKTtcbiAgICB9XG4gIH1cblxuICBvYmplY3RzLnB1c2goe1xuICAgIGY6IGYsXG4gICAgbXRsTmFtZTogbXRsTmFtZVxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIHY6IHYsXG4gICAgdm46IHZuLFxuICAgIHZ0OiB2dCxcbiAgICBvYmplY3RzOiBvYmplY3RzLFxuICAgIG1hdGVyaWFsczogbWF0ZXJpYWxzXG4gIH07XG59XG4iLCJpbXBvcnQgeyBWZWMyLCBWZWMzIH0gZnJvbSAnLi92ZWN0b3InO1xuXG5leHBvcnQgY2xhc3MgR2VvbWV0cnlCYXNlIHtcbiAgcHJpdmF0ZSB2ZXJ0aWNlczogbnVtYmVyW107XG4gIHByaXZhdGUgbm9ybWFsczogbnVtYmVyW107XG4gIHByaXZhdGUgdXZDb29yZHM6IG51bWJlcltdO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnZlcnRpY2VzID0gW107XG4gICAgdGhpcy5ub3JtYWxzID0gW107XG4gICAgdGhpcy51dkNvb3JkcyA9IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIOS4juOBiOOCieOCjOOBn+mggueCueOBi+OCieani+aIkOOBleOCjOOCi+WkmuinkuW9ouOCkui/veWKoOOBmeOCi+OAglxuICAgKiDpoILngrnjga/ooajpnaLjgYvjgonopovjgablj43mmYLoqIjlm57jgorjgafmjIflrprjgZfjgarjgZHjgozjgbDjgarjgonjgarjgYTjgIJcbiAgICogQHBhcmFtIHZlcnRpY2VzIOWkmuinkuW9ouOCkuani+aIkOOBmeOCi+mggueCuVxuICAgKiBAcGFyYW0gdXZDb29yZHMg6aCC54K544Gr5a++5b+c44GZ44KLIFVWIOW6p+aomVxuICAgKi9cbiAgcHVibGljIGFkZEZhY2UodmVydGljZXM6IFZlYzNbXSwgdXZDb29yZHM/OiBWZWMyW10pIHtcbiAgICBpZiAodmVydGljZXMgPT0gbnVsbCB8fCB2ZXJ0aWNlcy5sZW5ndGggPCAzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+mggueCueOBjO+8k+OBpOS7peS4iuW/heimgeOBp+OBmScpO1xuICAgIH1cbiAgICBpZiAodXZDb29yZHMgIT0gbnVsbCAmJiB2ZXJ0aWNlcy5sZW5ndGggIT0gdXZDb29yZHMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+mggueCueOBruaVsOOBqCBVViDluqfmqJnjga7mlbDjgYzkuIDoh7TjgZfjgb7jgZvjgpMnKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB2ZXJ0aWNlcy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGlmICh1dkNvb3JkcyAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuYWRkVHJpYW5nbGUodmVydGljZXNbMF0sIHZlcnRpY2VzW2ldLCB2ZXJ0aWNlc1tpICsgMV0sIHV2Q29vcmRzWzBdLCB1dkNvb3Jkc1tpXSwgdXZDb29yZHNbaSArIDFdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHV2Q29vcmRzIOOBjOeEoeOBhOWgtOWQiOOBryAoMCwgMCkg44KS5YWl44KM44Gm44GK44GPXG4gICAgICAgIHRoaXMuYWRkVHJpYW5nbGUodmVydGljZXNbMF0sIHZlcnRpY2VzW2ldLCB2ZXJ0aWNlc1tpICsgMV0sIG5ldyBWZWMyKDAsIDApLCBuZXcgVmVjMigwLCAwKSwgbmV3IFZlYzIoMCwgMCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiB2MSB+IHYzIOOBi+OCieOBquOCi+S4ieinkuW9oumdouOCkui/veWKoOOBmeOCi+OAglxuICAgKiDpoILngrnjga/ooajpnaLjgYvjgonopovjgablj43mmYLoqIjlm57jgorjgafmjIflrprjgZfjgarjgZHjgozjgbDjgarjgonjgarjgYTjgIJcbiAgICogQHBhcmFtIHYxXG4gICAqIEBwYXJhbSB2MlxuICAgKiBAcGFyYW0gdjNcbiAgICogQHBhcmFtIHV2MVxuICAgKiBAcGFyYW0gdXYyXG4gICAqIEBwYXJhbSB1djNcbiAgICovXG4gIHByaXZhdGUgYWRkVHJpYW5nbGUodjE6IFZlYzMsIHYyOiBWZWMzLCB2MzogVmVjMywgdXYxOiBWZWMyLCB1djI6IFZlYzIsIHV2MzogVmVjMikge1xuICAgIC8vIOmdouazlee3muODmeOCr+ODiOODq+OCkuazlee3muODmeOCr+ODiOODq+OBqOOBl+OBpuS9v+OBhlxuICAgIGNvbnN0IHN1cmZhY2VOb3JtYWwgPSB0aGlzLmdldFN1cmZhY2VOb3JtYWwodjEsIHYyLCB2Myk7XG4gICAgLy8gdjFcbiAgICB0aGlzLmFkZFZlcnRleCh2MSk7XG4gICAgdGhpcy5hZGRVVkNvb3JkKHV2MSk7XG4gICAgdGhpcy5hZGROb3JtYWwoc3VyZmFjZU5vcm1hbCk7XG4gICAgLy8gdjJcbiAgICB0aGlzLmFkZFZlcnRleCh2Mik7XG4gICAgdGhpcy5hZGRVVkNvb3JkKHV2Mik7XG4gICAgdGhpcy5hZGROb3JtYWwoc3VyZmFjZU5vcm1hbCk7XG4gICAgLy8gdjNcbiAgICB0aGlzLmFkZFZlcnRleCh2Myk7XG4gICAgdGhpcy5hZGRVVkNvb3JkKHV2Myk7XG4gICAgdGhpcy5hZGROb3JtYWwoc3VyZmFjZU5vcm1hbCk7XG4gIH1cblxuICAvKipcbiAgICogdjEgfiB2MyDjgYvjgonjgarjgovkuInop5LlvaLpnaLjga7pnaLms5Xnt5rjg5njgq/jg4jjg6vjgpLov5TjgZnjgIJcbiAgICog6aCC54K544Gv6KGo6Z2i44GL44KJ6KaL44Gm5Y+N5pmC6KiI5Zue44KK44Gn5oyH5a6a44GX44Gq44GR44KM44Gw44Gq44KJ44Gq44GE44CCXG4gICAqIEBwYXJhbSB2MVxuICAgKiBAcGFyYW0gdjJcbiAgICogQHBhcmFtIHYzXG4gICAqIEByZXR1cm5zIOmdouazlee3muODmeOCr+ODiOODq1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRTdXJmYWNlTm9ybWFsKHYxOiBWZWMzLCB2MjogVmVjMywgdjM6IFZlYzMpOiBWZWMzIHtcbiAgICBjb25zdCBhID0gbmV3IFZlYzModjIueCAtIHYxLngsIHYyLnkgLSB2MS55LCB2Mi56IC0gdjEueik7XG4gICAgY29uc3QgYiA9IG5ldyBWZWMzKHYzLnggLSB2MS54LCB2My55IC0gdjEueSwgdjMueiAtIHYxLnopO1xuICAgIC8vIOWkluepjVxuICAgIHJldHVybiBuZXcgVmVjMyhhLnkgKiBiLnogLSBhLnogKiBiLnksIGEueiAqIGIueCAtIGEueCAqIGIueiwgYS54ICogYi55IC0gYS55ICogYi54KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDms5Xnt5rjg5njgq/jg4jjg6vjgpLov73liqDjgZnjgovjgIJcbiAgICogQHBhcmFtIG5vcm1hbCDms5Xnt5rjg5njgq/jg4jjg6tcbiAgICovXG4gIHByaXZhdGUgYWRkTm9ybWFsKG5vcm1hbDogVmVjMykge1xuICAgIHRoaXMubm9ybWFscy5wdXNoKG5vcm1hbC54LCBub3JtYWwueSwgbm9ybWFsLnopO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRWZXJ0ZXgodmVydGV4OiBWZWMzKSB7XG4gICAgdGhpcy52ZXJ0aWNlcy5wdXNoKHZlcnRleC54LCB2ZXJ0ZXgueSwgdmVydGV4LnopO1xuICB9XG5cbiAgLyoqXG4gICAqIFVWIOW6p+aomeOCkui/veWKoOOBmeOCi+OAglxuICAgKiBAcGFyYW0gdXZDb29yZCBVViDluqfmqJlcbiAgICovXG4gIHB1YmxpYyBhZGRVVkNvb3JkKHV2Q29vcmQ6IFZlYzIpIHtcbiAgICB0aGlzLnV2Q29vcmRzLnB1c2godXZDb29yZC54LCB1dkNvb3JkLnkpO1xuICB9XG5cbiAgcHVibGljIGdldFZlcnRpY2VzKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy52ZXJ0aWNlcztcbiAgfVxuXG4gIHB1YmxpYyBnZXROb3JtYWxzKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy5ub3JtYWxzO1xuICB9XG5cbiAgcHVibGljIGdldFVWQ29vcmRzKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy51dkNvb3JkcztcbiAgfVxufVxuIiwiaW1wb3J0IHsgRmFjZSB9IGZyb20gJy4uL2ZhY2UnO1xuaW1wb3J0IHsgR2VvbWV0cnlCYXNlIH0gZnJvbSAnLi4vZ2VvbWV0cnlCYXNlJztcbmltcG9ydCB7IFZlYzIsIFZlYzMgfSBmcm9tICcuLi92ZWN0b3InO1xuaW1wb3J0IHsgSW5zdGFuY2VkTWVzaCB9IGZyb20gJy4vaW5zdGFuY2VkTWVzaCc7XG5cbi8qKlxuICogQ3ViZSDjga7jgqTjg7Pjgrnjgr/jg7PjgrnljJbjg5Djg7zjgrjjg6fjg7NcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnN0YW5jZWRDdWJlIGV4dGVuZHMgR2VvbWV0cnlCYXNlIGltcGxlbWVudHMgSW5zdGFuY2VkTWVzaCB7XG4gIHByaXZhdGUgdGV4dHVyZUltYWdlczogSW1hZ2VEYXRhW107XG4gIHByaXZhdGUgaW5zdGFuY2VQb3NpdGlvbnM6IFZlYzNbXTtcbiAgcHJpdmF0ZSBpbnN0YW5jZVJvdGF0aW9uczogbnVtYmVyW107XG4gIHByaXZhdGUgaW5zdGFuY2VUZXh0dXJlSWRzOiBudW1iZXJbXTtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnRleHR1cmVJbWFnZXMgPSBbXTtcbiAgICB0aGlzLmluc3RhbmNlUG9zaXRpb25zID0gW107XG4gICAgdGhpcy5pbnN0YW5jZVJvdGF0aW9ucyA9IFtdO1xuICAgIHRoaXMuaW5zdGFuY2VUZXh0dXJlSWRzID0gW107XG5cbiAgICAvLyDpoILngrnjga7kvY3nva7plqLkv4I6XG4gICAgLy8gICBCLS0tLS0tQ1xuICAgIC8vICAvfCAgICAgL3xcbiAgICAvLyBBLS0tLS0tRCB8XG4gICAgLy8gfCBGLS0tLXwtR1xuICAgIC8vIHwvICAgICB8L1xuICAgIC8vIEUtLS0tLS1IXG4gICAgLy9cbiAgICAvLyDkuIo6IHkrLCDkuIs6IHktXG4gICAgLy8g5YmNOiB6Kywg5aWlOiB6LVxuICAgIC8vIOWPszogeCssIOW3pjogeC1cbiAgICBjb25zdCBBID0gbmV3IFZlYzMoLTAuNSwgMC41LCAwLjUpO1xuICAgIGNvbnN0IEIgPSBuZXcgVmVjMygtMC41LCAwLjUsIC0wLjUpO1xuICAgIGNvbnN0IEMgPSBuZXcgVmVjMygwLjUsIDAuNSwgLTAuNSk7XG4gICAgY29uc3QgRCA9IG5ldyBWZWMzKDAuNSwgMC41LCAwLjUpO1xuICAgIGNvbnN0IEUgPSBuZXcgVmVjMygtMC41LCAtMC41LCAwLjUpO1xuICAgIGNvbnN0IEYgPSBuZXcgVmVjMygtMC41LCAtMC41LCAtMC41KTtcbiAgICBjb25zdCBHID0gbmV3IFZlYzMoMC41LCAtMC41LCAtMC41KTtcbiAgICBjb25zdCBIID0gbmV3IFZlYzMoMC41LCAtMC41LCAwLjUpO1xuXG4gICAgLy8g6IOM6Z2i44Kr44Oq44Oz44Kw44Gu44Gf44KB44Gr44CB5Y+N5pmC6KiI5Zue44KK44Gn57Wx5LiA44GX44Gm44GE44KLXG4gICAgLy8g5LiK6Z2iXG4gICAgdGhpcy5hZGRGYWNlKFtBLCBELCBDLCBCXSwgW1xuICAgICAgbmV3IFZlYzIoMSAvIDQsIDEgLyAzKSxcbiAgICAgIG5ldyBWZWMyKDIgLyA0LCAxIC8gMyksXG4gICAgICBuZXcgVmVjMigyIC8gNCwgMCAvIDMpLFxuICAgICAgbmV3IFZlYzIoMSAvIDQsIDAgLyAzKVxuICAgIF0pO1xuICAgIC8vIOW6lemdolxuICAgIHRoaXMuYWRkRmFjZShbRSwgRiwgRywgSF0sIFtcbiAgICAgIG5ldyBWZWMyKDEgLyA0LCAyIC8gMyksXG4gICAgICBuZXcgVmVjMigxIC8gNCwgMyAvIDMpLFxuICAgICAgbmV3IFZlYzIoMiAvIDQsIDMgLyAzKSxcbiAgICAgIG5ldyBWZWMyKDIgLyA0LCAyIC8gMylcbiAgICBdKTtcbiAgICAvLyDlt6bpnaJcbiAgICB0aGlzLmFkZEZhY2UoW0EsIEIsIEYsIEVdLCBbXG4gICAgICBuZXcgVmVjMigxIC8gNCwgMSAvIDMpLFxuICAgICAgbmV3IFZlYzIoMCAvIDQsIDEgLyAzKSxcbiAgICAgIG5ldyBWZWMyKDAgLyA0LCAyIC8gMyksXG4gICAgICBuZXcgVmVjMigxIC8gNCwgMiAvIDMpXG4gICAgXSk7XG4gICAgLy8g5Y+z6Z2iXG4gICAgdGhpcy5hZGRGYWNlKFtELCBILCBHLCBDXSwgW1xuICAgICAgbmV3IFZlYzIoMiAvIDQsIDEgLyAzKSxcbiAgICAgIG5ldyBWZWMyKDIgLyA0LCAyIC8gMyksXG4gICAgICBuZXcgVmVjMigzIC8gNCwgMiAvIDMpLFxuICAgICAgbmV3IFZlYzIoMyAvIDQsIDEgLyAzKVxuICAgIF0pO1xuICAgIC8vIOWJjemdolxuICAgIHRoaXMuYWRkRmFjZShbQSwgRSwgSCwgRF0sIFtcbiAgICAgIG5ldyBWZWMyKDEgLyA0LCAxIC8gMyksXG4gICAgICBuZXcgVmVjMigxIC8gNCwgMiAvIDMpLFxuICAgICAgbmV3IFZlYzIoMiAvIDQsIDIgLyAzKSxcbiAgICAgIG5ldyBWZWMyKDIgLyA0LCAxIC8gMylcbiAgICBdKTtcbiAgICAvLyDlpaXpnaJcbiAgICB0aGlzLmFkZEZhY2UoW0IsIEMsIEcsIEZdLCBbXG4gICAgICBuZXcgVmVjMig0IC8gNCwgMSAvIDMpLFxuICAgICAgbmV3IFZlYzIoMyAvIDQsIDEgLyAzKSxcbiAgICAgIG5ldyBWZWMyKDMgLyA0LCAyIC8gMyksXG4gICAgICBuZXcgVmVjMig0IC8gNCwgMiAvIDMpXG4gICAgXSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0T2Zmc2V0cygpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VmVydGljZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgqTjg7Pjgrnjgr/jg7PjgrnjgpLov73liqDjgZnjgotcbiAgICogQHBhcmFtIHBvc2l0aW9uIOOCpOODs+OCueOCv+ODs+OCueOBruS9jee9rlxuICAgKiBAcGFyYW0gdGV4dHVyZUlkIOODhuOCr+OCueODgeODo+OBriBJRFxuICAgKiBAcGFyYW0gZmFjZSDjgqTjg7Pjgrnjgr/jg7Pjgrnjga7lkJHjgY3vvIjjg4fjg5Xjgqnjg6vjg4jmiYvliY3jgYzljZfvvIlcbiAgICovXG4gIHB1YmxpYyBhZGRJbnN0YW5jZShwb3NpdGlvbjogVmVjMywgdGV4dHVyZUlkOiBudW1iZXIsIGZhY2UgPSBGYWNlLlNPVVRIKTogdm9pZCB7XG4gICAgdGhpcy5pbnN0YW5jZVBvc2l0aW9ucy5wdXNoKHBvc2l0aW9uKTtcbiAgICB0aGlzLmluc3RhbmNlVGV4dHVyZUlkcy5wdXNoKHRleHR1cmVJZCk7XG4gICAgdGhpcy5pbnN0YW5jZVJvdGF0aW9ucy5wdXNoKGZhY2UpO1xuICB9XG5cbiAgcHVibGljIHNldFRleHR1cmVJbWFnZXModGV4dHVyZUltYWdlczogSW1hZ2VEYXRhW10pOiB2b2lkIHtcbiAgICB0aGlzLnRleHR1cmVJbWFnZXMgPSB0ZXh0dXJlSW1hZ2VzO1xuICB9XG5cbiAgcHVibGljIGdldFRleHR1cmVJbWFnZXMoKTogSW1hZ2VEYXRhW10ge1xuICAgIGNvbnN0IGFycjogSW1hZ2VEYXRhW10gPSBbXTtcbiAgICB0aGlzLnRleHR1cmVJbWFnZXMuZm9yRWFjaCgodGV4dHVyZUltYWdlKSA9PiB7XG4gICAgICBhcnIucHVzaCh0ZXh0dXJlSW1hZ2UpO1xuICAgIH0pO1xuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICBwdWJsaWMgZ2V0SW5zdGFuY2VQb3NpdGlvbnMoKTogbnVtYmVyW10ge1xuICAgIGNvbnN0IGFycjogbnVtYmVyW10gPSBbXTtcbiAgICB0aGlzLmluc3RhbmNlUG9zaXRpb25zLmZvckVhY2goKGluc3RhbmNlUG9zaXRpb24pID0+IHtcbiAgICAgIGFyci5wdXNoKC4uLmluc3RhbmNlUG9zaXRpb24udG9BcnJheSgpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYXJyO1xuICB9XG5cbiAgcHVibGljIGdldEluc3RhbmNlUm90YXRpb25zKCk6IG51bWJlcltdIHtcbiAgICBjb25zdCBhcnI6IG51bWJlcltdID0gW107XG4gICAgdGhpcy5pbnN0YW5jZVJvdGF0aW9ucy5mb3JFYWNoKChpbnN0YW5jZVJvdGF0aW9uKSA9PiB7XG4gICAgICBhcnIucHVzaChpbnN0YW5jZVJvdGF0aW9uKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYXJyO1xuICB9XG5cbiAgcHVibGljIGdldEluc3RhbmNlVGV4dHVyZUlkcygpOiBudW1iZXJbXSB7XG4gICAgY29uc3QgYXJyOiBudW1iZXJbXSA9IFtdO1xuICAgIHRoaXMuaW5zdGFuY2VUZXh0dXJlSWRzLmZvckVhY2goKGluc3RhbmNlVGV4dHVyZUlkKSA9PiB7XG4gICAgICBhcnIucHVzaChpbnN0YW5jZVRleHR1cmVJZCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRJbnN0YW5jZUNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VQb3NpdGlvbnMubGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIGdldFZlcnRleENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VmVydGljZXMoKS5sZW5ndGggLyAzO1xuICB9XG59XG4iLCJpbXBvcnQgeyBGYWNlIH0gZnJvbSAnLi4vZmFjZSc7XG5pbXBvcnQgeyBWZWMyLCBWZWMzIH0gZnJvbSAnLi4vdmVjdG9yJztcbmltcG9ydCB7IEluc3RhbmNlZE1lc2ggfSBmcm9tICcuL2luc3RhbmNlZE1lc2gnO1xuXG5leHBvcnQgY2xhc3MgSW5zdGFuY2VkQ3VzdG9tTWVzaCBpbXBsZW1lbnRzIEluc3RhbmNlZE1lc2gge1xuICBwcml2YXRlIHY6IG51bWJlcltdW10gPSBbXTtcbiAgcHJpdmF0ZSB2bjogbnVtYmVyW11bXSA9IFtdO1xuICBwcml2YXRlIHZ0OiBudW1iZXJbXVtdID0gW107XG4gIHByaXZhdGUgZjogbnVtYmVyW11bXVtdID0gW107XG4gIHByaXZhdGUgdmVydGljZXM6IG51bWJlcltdO1xuICBwcml2YXRlIG5vcm1hbHM6IG51bWJlcltdO1xuICBwcml2YXRlIHV2Q29vcmRzOiBudW1iZXJbXTtcbiAgcHJpdmF0ZSB0ZXh0dXJlSW1hZ2VzOiBJbWFnZURhdGFbXTtcbiAgcHJpdmF0ZSB2ZXJ0ZXhDb3VudDogbnVtYmVyO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcih2OiBudW1iZXJbXVtdLCB2bjogbnVtYmVyW11bXSwgdnQ6IG51bWJlcltdW10sIGY6IG51bWJlcltdW11bXSkge1xuICAgIHRoaXMudiA9IHY7XG4gICAgdGhpcy52biA9IHZuO1xuICAgIHRoaXMudnQgPSB2dDtcbiAgICB0aGlzLmYgPSBmO1xuICAgIHRoaXMudmVydGljZXMgPSBbXTtcbiAgICB0aGlzLm5vcm1hbHMgPSBbXTtcbiAgICB0aGlzLnV2Q29vcmRzID0gW107XG4gICAgdGhpcy50ZXh0dXJlSW1hZ2VzID0gW107XG4gICAgdGhpcy52ZXJ0ZXhDb3VudCA9IDA7XG5cbiAgICB0aGlzLmYuZm9yRWFjaChmYWNlID0+IHtcbiAgICAgIGNvbnN0IHZlcnRpY2VzOiBWZWMzW10gPSBbXTtcbiAgICAgIGNvbnN0IG5vcm1hbHM6IFZlYzNbXSA9IFtdO1xuICAgICAgY29uc3QgdXZDb29yZHM6IFZlYzJbXSA9IFtdO1xuXG4gICAgICBmYWNlLmZvckVhY2godmVydGV4ID0+IHtcbiAgICAgICAgY29uc3QgdiA9IHRoaXMudlt2ZXJ0ZXhbMF0gLSAxXTtcbiAgICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMyh2WzBdLCB2WzFdLCB2WzJdKSk7XG5cbiAgICAgICAgY29uc3QgdnQgPSB0aGlzLnZ0W3ZlcnRleFsxXSAtIDFdO1xuICAgICAgICB1dkNvb3Jkcy5wdXNoKG5ldyBWZWMyKHZ0WzBdLCB2dFsxXSkpO1xuXG4gICAgICAgIGNvbnN0IHZuID0gdGhpcy52blt2ZXJ0ZXhbMl0gLSAxXTtcbiAgICAgICAgbm9ybWFscy5wdXNoKG5ldyBWZWMzKHZuWzBdLCB2blsxXSwgdm5bMl0pKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmFkZEZhY2UodmVydGljZXMsIHV2Q29vcmRzLCBub3JtYWxzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkRmFjZSh2ZXJ0aWNlczogVmVjM1tdLCB1dkNvb3JkczogVmVjMltdLCBub3JtYWxzOiBWZWMzW10pIHtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHZlcnRpY2VzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgdGhpcy5hZGRUcmlhbmdsZShcbiAgICAgICAgdmVydGljZXNbMF0sIHZlcnRpY2VzW2ldLHZlcnRpY2VzW2kgKyAxXSxcbiAgICAgICAgbm9ybWFsc1swXSwgbm9ybWFsc1tpXSwgbm9ybWFsc1tpICsgMV0sXG4gICAgICAgIHV2Q29vcmRzWzBdLCB1dkNvb3Jkc1tpXSwgdXZDb29yZHNbaSArIDFdXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkVHJpYW5nbGUodjE6IFZlYzMsIHYyOiBWZWMzLCB2MzogVmVjMywgbjE6IFZlYzMsIG4yOiBWZWMzLCBuMzogVmVjMywgdXYxOiBWZWMyLCB1djI6IFZlYzIsIHV2MzogVmVjMikge1xuICAgIC8vIHYxXG4gICAgdGhpcy5hZGRWZXJ0ZXgodjEpO1xuICAgIHRoaXMuYWRkTm9ybWFsKG4xKTtcbiAgICB0aGlzLmFkZFVWQ29vcmQodXYxKTtcbiAgICAvLyB2MlxuICAgIHRoaXMuYWRkVmVydGV4KHYyKTtcbiAgICB0aGlzLmFkZE5vcm1hbChuMik7XG4gICAgdGhpcy5hZGRVVkNvb3JkKHV2Mik7XG4gICAgLy8gdjNcbiAgICB0aGlzLmFkZFZlcnRleCh2Myk7XG4gICAgdGhpcy5hZGROb3JtYWwobjMpO1xuICAgIHRoaXMuYWRkVVZDb29yZCh1djMpO1xuXG4gICAgdGhpcy52ZXJ0ZXhDb3VudCArPSAzO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRWZXJ0ZXgodmVydGV4OiBWZWMzKSB7XG4gICAgdGhpcy52ZXJ0aWNlcy5wdXNoKHZlcnRleC54LCB2ZXJ0ZXgueSwgdmVydGV4LnopO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGROb3JtYWwobm9ybWFsOiBWZWMzKSB7XG4gICAgdGhpcy5ub3JtYWxzLnB1c2gobm9ybWFsLngsIG5vcm1hbC55LCBub3JtYWwueik7XG4gIH1cblxuICBwcml2YXRlIGFkZFVWQ29vcmQodXZDb29yZDogVmVjMikge1xuICAgIHRoaXMudXZDb29yZHMucHVzaCh1dkNvb3JkLngsIDEgLSB1dkNvb3JkLnkpO1xuICB9XG5cbiAgcHVibGljIGdldFZlcnRpY2VzKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy52ZXJ0aWNlcztcbiAgfVxuICBwdWJsaWMgZ2V0Tm9ybWFscygpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMubm9ybWFscztcbiAgfVxuICBwdWJsaWMgZ2V0VVZDb29yZHMoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLnV2Q29vcmRzO1xuICB9XG4gIHB1YmxpYyBnZXRPZmZzZXRzKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy5nZXRWZXJ0aWNlcygpO1xuICB9XG5cbiAgcHVibGljIHNldFRleHR1cmVJbWFnZXModGV4dHVyZUltYWdlczogSW1hZ2VEYXRhW10pOiB2b2lkIHtcbiAgICB0aGlzLnRleHR1cmVJbWFnZXMgPSB0ZXh0dXJlSW1hZ2VzO1xuICB9XG5cbiAgcHVibGljIGdldFRleHR1cmVJbWFnZXMoKTogSW1hZ2VEYXRhW10ge1xuICAgIGNvbnN0IGFycjogSW1hZ2VEYXRhW10gPSBbXTtcbiAgICB0aGlzLnRleHR1cmVJbWFnZXMuZm9yRWFjaCgodGV4dHVyZUltYWdlKSA9PiB7XG4gICAgICBhcnIucHVzaCh0ZXh0dXJlSW1hZ2UpO1xuICAgIH0pO1xuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICBwdWJsaWMgZ2V0SW5zdGFuY2VQb3NpdGlvbnMoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiBbMCwgMjAsIDBdO1xuICB9XG5cbiAgcHVibGljIGdldEluc3RhbmNlUm90YXRpb25zKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gW0ZhY2UuVE9QXTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRJbnN0YW5jZVRleHR1cmVJZHMoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiBbMF07XG4gIH1cblxuICBwdWJsaWMgZ2V0SW5zdGFuY2VDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgcHVibGljIGdldFZlcnRleENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudmVydGV4Q291bnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IEZhY2UgfSBmcm9tICcuLi9mYWNlJztcbmltcG9ydCB7IEdlb21ldHJ5QmFzZSB9IGZyb20gJy4uL2dlb21ldHJ5QmFzZSc7XG5pbXBvcnQgeyBWZWMyLCBWZWMzIH0gZnJvbSAnLi4vdmVjdG9yJztcbmltcG9ydCB7IEluc3RhbmNlZE1lc2ggfSBmcm9tICcuL2luc3RhbmNlZE1lc2gnO1xuXG4vKipcbiAqIFNxdWFyZSDjga7jgqTjg7Pjgrnjgr/jg7PjgrnljJbjg5Djg7zjgrjjg6fjg7NcbiAqL1xuZXhwb3J0IGNsYXNzIEluc3RhbmNlZFNxdWFyZSBleHRlbmRzIEdlb21ldHJ5QmFzZSBpbXBsZW1lbnRzIEluc3RhbmNlZE1lc2gge1xuICBwcml2YXRlIHRleHR1cmVJbWFnZXM6IEltYWdlRGF0YVtdO1xuICBwcml2YXRlIGluc3RhbmNlUG9zaXRpb25zOiBWZWMzW107XG4gIHByaXZhdGUgaW5zdGFuY2VSb3RhdGlvbnM6IG51bWJlcltdO1xuICBwcml2YXRlIGluc3RhbmNlVGV4dHVyZUlkczogbnVtYmVyW107XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy50ZXh0dXJlSW1hZ2VzID0gW107XG4gICAgdGhpcy5pbnN0YW5jZVBvc2l0aW9ucyA9IFtdO1xuICAgIHRoaXMuaW5zdGFuY2VSb3RhdGlvbnMgPSBbXTtcbiAgICB0aGlzLmluc3RhbmNlVGV4dHVyZUlkcyA9IFtdO1xuXG4gICAgLy8g6aCC54K544Gu5L2N572u6Zai5L+COlxuICAgIC8vIEEtLS0tLS1CXG4gICAgLy8gfCAgICAgIHxcbiAgICAvLyB8ICAgICAgfFxuICAgIC8vIEQtLS0tLS1DXG4gICAgY29uc3QgQSA9IG5ldyBWZWMzKC0wLjUsIDAuNSwgMC41KTtcbiAgICBjb25zdCBCID0gbmV3IFZlYzMoMC41LCAwLjUsIDAuNSk7XG4gICAgY29uc3QgQyA9IG5ldyBWZWMzKDAuNSwgLTAuNSwgMC41KTtcbiAgICBjb25zdCBEID0gbmV3IFZlYzMoLTAuNSwgLTAuNSwgMC41KTtcblxuICAgIC8vIFVWIOODnuODg+ODlOODs+OCsFxuICAgIC8vIFVMICgwLCAwKSAtLSBVUiAoMSwgMClcbiAgICAvLyAgICAgIHwgICAgICAgICAgICB8XG4gICAgLy8gICAgICB8ICAgICAgICAgICAgfFxuICAgIC8vIExMICgwLCAxKSAtLSBMUiAoMSwgMSlcbiAgICBjb25zdCBVTCA9IG5ldyBWZWMyKDAsIDApO1xuICAgIGNvbnN0IFVSID0gbmV3IFZlYzIoMSwgMCk7XG4gICAgY29uc3QgTEwgPSBuZXcgVmVjMigwLCAxKTtcbiAgICBjb25zdCBMUiA9IG5ldyBWZWMyKDEsIDEpO1xuXG4gICAgLy8g6IOM6Z2i44Kr44Oq44Oz44Kw44Gu44Gf44KB44Gr44CB5Y+N5pmC6KiI5Zue44KK44Gn57Wx5LiA44GX44Gm44GE44KLXG4gICAgdGhpcy5hZGRGYWNlKFtBLCBELCBDLCBCXSwgW1VMLCBMTCwgTFIsIFVSXSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0T2Zmc2V0cygpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VmVydGljZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjgqTjg7Pjgrnjgr/jg7PjgrnjgpLov73liqDjgZnjgotcbiAgICogQHBhcmFtIHBvc2l0aW9uIOOCpOODs+OCueOCv+ODs+OCueOBruS9jee9rlxuICAgKiBAcGFyYW0gdGV4dHVyZUlkIOODhuOCr+OCueODgeODo+OBriBJRFxuICAgKiBAcGFyYW0gZmFjZSDjgqTjg7Pjgrnjgr/jg7Pjgrnjga7lkJHjgY3vvIjjg4fjg5Xjgqnjg6vjg4jmiYvliY3jgYzljZfvvIlcbiAgICovXG4gIHB1YmxpYyBhZGRJbnN0YW5jZShwb3NpdGlvbjogVmVjMywgdGV4dHVyZUlkOiBudW1iZXIsIGZhY2UgPSBGYWNlLlNPVVRIKTogdm9pZCB7XG4gICAgdGhpcy5pbnN0YW5jZVBvc2l0aW9ucy5wdXNoKHBvc2l0aW9uKTtcbiAgICB0aGlzLmluc3RhbmNlVGV4dHVyZUlkcy5wdXNoKHRleHR1cmVJZCk7XG4gICAgdGhpcy5pbnN0YW5jZVJvdGF0aW9ucy5wdXNoKGZhY2UpO1xuICB9XG5cbiAgcHVibGljIHNldFRleHR1cmVJbWFnZXModGV4dHVyZUltYWdlczogSW1hZ2VEYXRhW10pOiB2b2lkIHtcbiAgICB0aGlzLnRleHR1cmVJbWFnZXMgPSB0ZXh0dXJlSW1hZ2VzO1xuICB9XG5cbiAgcHVibGljIGdldFRleHR1cmVJbWFnZXMoKTogSW1hZ2VEYXRhW10ge1xuICAgIGNvbnN0IGFycjogSW1hZ2VEYXRhW10gPSBbXTtcbiAgICB0aGlzLnRleHR1cmVJbWFnZXMuZm9yRWFjaCgodGV4dHVyZUltYWdlKSA9PiB7XG4gICAgICBhcnIucHVzaCh0ZXh0dXJlSW1hZ2UpO1xuICAgIH0pO1xuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICBwdWJsaWMgZ2V0SW5zdGFuY2VQb3NpdGlvbnMoKTogbnVtYmVyW10ge1xuICAgIGNvbnN0IGFycjogbnVtYmVyW10gPSBbXTtcbiAgICB0aGlzLmluc3RhbmNlUG9zaXRpb25zLmZvckVhY2goKGluc3RhbmNlUG9zaXRpb24pID0+IHtcbiAgICAgIGFyci5wdXNoKC4uLmluc3RhbmNlUG9zaXRpb24udG9BcnJheSgpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYXJyO1xuICB9XG5cbiAgcHVibGljIGdldEluc3RhbmNlUm90YXRpb25zKCk6IG51bWJlcltdIHtcbiAgICBjb25zdCBhcnI6IG51bWJlcltdID0gW107XG4gICAgdGhpcy5pbnN0YW5jZVJvdGF0aW9ucy5mb3JFYWNoKChpbnN0YW5jZVJvdGF0aW9ucykgPT4ge1xuICAgICAgYXJyLnB1c2goaW5zdGFuY2VSb3RhdGlvbnMpO1xuICAgIH0pO1xuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICBwdWJsaWMgZ2V0SW5zdGFuY2VUZXh0dXJlSWRzKCk6IG51bWJlcltdIHtcbiAgICBjb25zdCBhcnI6IG51bWJlcltdID0gW107XG4gICAgdGhpcy5pbnN0YW5jZVRleHR1cmVJZHMuZm9yRWFjaCgoaW5zdGFuY2VUZXh0dXJlSWQpID0+IHtcbiAgICAgIGFyci5wdXNoKGluc3RhbmNlVGV4dHVyZUlkKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYXJyO1xuICB9XG5cbiAgcHVibGljIGdldEluc3RhbmNlQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZVBvc2l0aW9ucy5sZW5ndGg7XG4gIH1cblxuICBwdWJsaWMgZ2V0VmVydGV4Q291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5nZXRWZXJ0aWNlcygpLmxlbmd0aCAvIDM7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGBcbnN0cnVjdCBWZXJ0ZXhPdXQge1xuICBAYnVpbHRpbihwb3NpdGlvbikgcG9zaXRpb24gOiB2ZWM0ZixcbiAgQGxvY2F0aW9uKDApIGRpZmZ1c2U6IGYzMixcbiAgQGxvY2F0aW9uKDEpIEBpbnRlcnBvbGF0ZShmbGF0KSB0ZXh0dXJlSWQ6IHUzMixcbiAgQGxvY2F0aW9uKDIpIHV2IDogdmVjMmZcbn1cblxuQGdyb3VwKDApIEBiaW5kaW5nKDApIHZhcjx1bmlmb3JtPiBudW1MaWdodHM6IHUzMjtcbkBncm91cCgwKSBAYmluZGluZygxKSB2YXI8dW5pZm9ybT4gbGlnaHRzOiBhcnJheTx2ZWMzZiwgMjA+O1xuQGdyb3VwKDApIEBiaW5kaW5nKDIpIHZhcjx1bmlmb3JtPiB2aWV3OiBtYXQ0eDRmO1xuQGdyb3VwKDApIEBiaW5kaW5nKDMpIHZhcjx1bmlmb3JtPiBwcm9qZWN0aW9uOiBtYXQ0eDRmO1xuQGdyb3VwKDApIEBiaW5kaW5nKDQpIHZhciBteVNhbXBsZXI6IHNhbXBsZXI7XG5AZ3JvdXAoMCkgQGJpbmRpbmcoNSkgdmFyIG15VGV4dHVyZTogdGV4dHVyZV8yZF9hcnJheTxmMzI+O1xuXG52YXI8cHJpdmF0ZT4gbW9kZWwgPSBhcnJheTxtYXQ0eDRmLCA2PihcbiAgLy8gVCA9ICgtcGkvMiwgMClcbiAgbWF0NHg0ZigxLjAsIDAuMCwgMC4wLCAwLjAsXG4gICAgICAwLjAsIDAuMCwgLTEuMCwgMC4wLFxuICAgICAgMC4wLCAxLjAsIDAuMCwgMC4wLFxuICAgICAgMC4wLCAwLjAsIDAuMCwgMS4wKSxcbiAgLy8gQiA9IChwaS8yLCAwKVxuICBtYXQ0eDRmKDEuMCwgMC4wLCAwLjAsIDAuMCxcbiAgICAgIDAuMCwgMC4wLCAxLjAsIDAuMCxcbiAgICAgIDAuMCwgLTEuMCwgMC4wLCAwLjAsXG4gICAgICAwLjAsIDAuMCwgMC4wLCAxLjApLFxuICAvLyBTID0gKDAsIDApXG4gIG1hdDR4NGYoMS4wLCAwLjAsIDAuMCwgMC4wLFxuICAgICAgMC4wLCAxLjAsIDAuMCwgMC4wLFxuICAgICAgMC4wLCAwLjAsIDEuMCwgMC4wLFxuICAgICAgMC4wLCAwLjAsIDAuMCwgMS4wKSxcbiAgLy8gTiA9ICgwLCBwaSlcbiAgbWF0NHg0ZigtMS4wLCAwLjAsIDAuMCwgMC4wLFxuICAgICAgMC4wLCAxLjAsIDAuMCwgMC4wLFxuICAgICAgMC4wLCAwLjAsIC0xLjAsIDAuMCxcbiAgICAgIDAuMCwgMC4wLCAwLjAsIDEuMCksXG4gIC8vIEUgPSAoMCwgcGkvMilcbiAgbWF0NHg0ZigwLjAsIDAuMCwgLTEuMCwgMC4wLFxuICAgICAgMC4wLCAxLjAsIDAuMCwgMC4wLFxuICAgICAgMS4wLCAwLjAsIDAuMCwgMC4wLFxuICAgICAgMC4wLCAwLjAsIDAuMCwgMS4wKSxcbiAgLy8gVyA9ICgwLCAtcGkvMilcbiAgbWF0NHg0ZigwLjAsIDAuMCwgMS4wLCAwLjAsXG4gICAgICAwLjAsIDEuMCwgMC4wLCAwLjAsXG4gICAgICAtMS4wLCAwLjAsIDAuMCwgMC4wLFxuICAgICAgMC4wLCAwLjAsIDAuMCwgMS4wKVxuKTtcblxuLy8gVE9ETzog5b6M44GnIHVuaWZvcm0g44Gn5rih44Gb44KL44KI44GG44Gr44GZ44KLXG52YXI8cHJpdmF0ZT4gc2NhbGUgPSBtYXQ0eDRmKFxuICAxLjAsIDAuMCwgMC4wLCAwLjAsXG4gIDAuMCwgMS4wLCAwLjAsIDAuMCxcbiAgMC4wLCAwLjAsIDEuMCwgMC4wLFxuICAwLjAsIDAuMCwgMC4wLCAxLjBcbik7XG5cbkB2ZXJ0ZXhcbmZuIHZlcnRleF9tYWluKFxuICBAbG9jYXRpb24oMCkgb2Zmc2V0OiB2ZWMzZixcbiAgQGxvY2F0aW9uKDEpIG5vcm1hbDogdmVjM2YsXG4gIEBsb2NhdGlvbigyKSBwb3NpdGlvbjogdmVjM2YsXG4gIEBsb2NhdGlvbigzKSByb3RhdGlvbjogdTMyLFxuICBAbG9jYXRpb24oNCkgdXY6IHZlYzJmLFxuICBAbG9jYXRpb24oNSkgdGV4dHVyZUlkOiB1MzJcbikgLT4gVmVydGV4T3V0IHtcbiAgdmFyIG91dDogVmVydGV4T3V0O1xuICBvdXQucG9zaXRpb24gPSBwcm9qZWN0aW9uICogdmlldyAqICh2ZWM0Zihwb3NpdGlvbiwgMS4wKSArIHNjYWxlICogbW9kZWxbcm90YXRpb25dICogdmVjNGYob2Zmc2V0LCAxLjApKTtcblxuICAvLyDjg6njgqTjg4bjgqPjg7PjgrBcbiAgLy8gVE9ETzog55Kw5aKD5YWJ44Gr44KI44KL44Op44Kk44OG44Kj44Oz44KwXG4gIHZhciBkaWZmdXNlID0gMC4wO1xuICBmb3IgKHZhciBpID0gMHU7IGkgPCBudW1MaWdodHM7IGkrKykge1xuICAgIGRpZmZ1c2UgKz0gbWF4KDAuMCwgLSBkb3QobW9kZWxbcm90YXRpb25dICogdmVjNGYobm9ybWFsaXplKG5vcm1hbCksIDAuMCksIHZlYzRmKG5vcm1hbGl6ZShsaWdodHNbaV0pLCAwLjApKSk7XG4gIH1cbiAgb3V0LmRpZmZ1c2UgPSBkaWZmdXNlO1xuXG4gIG91dC50ZXh0dXJlSWQgPSB0ZXh0dXJlSWQ7XG4gIG91dC51diA9IHV2O1xuICByZXR1cm4gb3V0O1xufVxuXG5AZnJhZ21lbnRcbmZuIGZyYWdtZW50X21haW4oZnJhZ0RhdGE6IFZlcnRleE91dCkgLT4gQGxvY2F0aW9uKDApIHZlYzRmIHtcbiAgcmV0dXJuIHZlYzRmKGZyYWdEYXRhLmRpZmZ1c2UgKiB0ZXh0dXJlU2FtcGxlKG15VGV4dHVyZSwgbXlTYW1wbGVyLCBmcmFnRGF0YS51diwgZnJhZ0RhdGEudGV4dHVyZUlkKS5yZ2IsIDEuMCk7XG59XG5gO1xuIiwiaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSAnLi9jYW1lcmEnO1xuaW1wb3J0IHsgU2NlbmUgfSBmcm9tICcuL3NjZW5lJztcbmltcG9ydCBzaGFkZXIgZnJvbSAnLi9zaGFkZXIud2dzbCc7XG5pbXBvcnQgeyBJbnN0YW5jZWRNZXNoIH0gZnJvbSAnLi9tZXNoL2luc3RhbmNlZE1lc2gnO1xuXG5jb25zdCBjbGVhckNvbG9yID0geyByOiAwLjAsIGc6IDAuMCwgYjogMC4wLCBhOiAxLjAgfTtcblxuZXhwb3J0IGNsYXNzIFJlbmRlcmVyIHtcbiAgcHJpdmF0ZSBjdHg6IEdQVUNhbnZhc0NvbnRleHQ7XG4gIHByaXZhdGUgZGV2aWNlOiBHUFVEZXZpY2U7XG4gIHByaXZhdGUgZGVwdGhUZXh0dXJlOiBHUFVUZXh0dXJlO1xuICBwcml2YXRlIHJlbmRlclBpcGVsaW5lOiBHUFVSZW5kZXJQaXBlbGluZTtcbiAgcHJpdmF0ZSBzYW1wbGVyOiBHUFVTYW1wbGVyO1xuICBwcml2YXRlIG51bUxpZ2h0c0J1ZmZlcjogR1BVQnVmZmVyO1xuICBwcml2YXRlIGxpZ2h0c0J1ZmZlcjogR1BVQnVmZmVyO1xuICBwcml2YXRlIHZpZXdCdWZmZXI6IEdQVUJ1ZmZlcjtcbiAgcHJpdmF0ZSBwcm9qZWN0aW9uQnVmZmVyOiBHUFVCdWZmZXI7XG4gIHByaXZhdGUgYmluZGluZ3M6IE1hcDxJbnN0YW5jZWRNZXNoLCB7XG4gICAgYmluZEdyb3VwOiBHUFVCaW5kR3JvdXAsXG4gICAgb2Zmc2V0czogR1BVQnVmZmVyLFxuICAgIG5vcm1hbHM6IEdQVUJ1ZmZlcixcbiAgICBwb3NpdGlvbnM6IEdQVUJ1ZmZlcixcbiAgICByb3RhdGlvbnM6IEdQVUJ1ZmZlcixcbiAgICB1dnM6IEdQVUJ1ZmZlcixcbiAgICB0ZXh0dXJlSWRzOiBHUFVCdWZmZXJcbiAgfT47XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKGN0eDogR1BVQ2FudmFzQ29udGV4dCwgZGV2aWNlOiBHUFVEZXZpY2UpIHtcbiAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICB0aGlzLmRldmljZSA9IGRldmljZTtcblxuICAgIGN0eC5jb25maWd1cmUoe1xuICAgICAgZGV2aWNlOiBkZXZpY2UsXG4gICAgICBmb3JtYXQ6IG5hdmlnYXRvci5ncHUuZ2V0UHJlZmVycmVkQ2FudmFzRm9ybWF0KCksXG4gICAgICBhbHBoYU1vZGU6ICdwcmVtdWx0aXBsaWVkJ1xuICAgIH0pO1xuXG4gICAgLy8g44Kt44Oj44Oz44OQ44K544K144Kk44K644KS5Y+v5aSJ44Gr44GZ44KL5aC05ZCI44Gv44CBcmVuZGVyKCkg5YaF44Gn44KE44Gj44Gf5pa544GM44GE44GE44GL44KC77yfXG4gICAgdGhpcy5kZXB0aFRleHR1cmUgPSBkZXZpY2UuY3JlYXRlVGV4dHVyZSh7XG4gICAgICBzaXplOiBbY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHRdLFxuICAgICAgZm9ybWF0OiAnZGVwdGgyNHBsdXMnLFxuICAgICAgdXNhZ2U6IEdQVVRleHR1cmVVc2FnZS5SRU5ERVJfQVRUQUNITUVOVFxuICAgIH0pO1xuXG4gICAgLy8g44Go44KK44GC44GI44Ga44CB44K344Kn44O844OA44O844Gv5Zu65a6a44Gr44GZ44KLXG4gICAgY29uc3Qgc2hhZGVyTW9kdWxlID0gZGV2aWNlLmNyZWF0ZVNoYWRlck1vZHVsZSh7XG4gICAgICBjb2RlOiBzaGFkZXJcbiAgICB9KTtcbiAgICBjb25zdCB2ZXJ0ZXhCdWZmZXJzOiBHUFVWZXJ0ZXhCdWZmZXJMYXlvdXRbXSA9IFtcbiAgICAgIHtcbiAgICAgICAgLy8gb2Zmc2V0XG4gICAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzaGFkZXJMb2NhdGlvbjogMCxcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIGZvcm1hdDogJ2Zsb2F0MzJ4MydcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBhcnJheVN0cmlkZTogNCAqIDMsXG4gICAgICAgIHN0ZXBNb2RlOiAndmVydGV4J1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgLy8gbm9ybWFsXG4gICAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzaGFkZXJMb2NhdGlvbjogMSxcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIGZvcm1hdDogJ2Zsb2F0MzJ4MydcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBhcnJheVN0cmlkZTogNCAqIDMsXG4gICAgICAgIHN0ZXBNb2RlOiAndmVydGV4J1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgLy8gcG9zaXRpb25cbiAgICAgICAgYXR0cmlidXRlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNoYWRlckxvY2F0aW9uOiAyLFxuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgZm9ybWF0OiAnZmxvYXQzMngzJ1xuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGFycmF5U3RyaWRlOiA0ICogMyxcbiAgICAgICAgc3RlcE1vZGU6ICdpbnN0YW5jZSdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIC8vIHJvdGF0aW9uXG4gICAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzaGFkZXJMb2NhdGlvbjogMyxcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIGZvcm1hdDogJ3VpbnQzMidcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBhcnJheVN0cmlkZTogNCxcbiAgICAgICAgc3RlcE1vZGU6ICdpbnN0YW5jZSdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIC8vIHV2XG4gICAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzaGFkZXJMb2NhdGlvbjogNCxcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIGZvcm1hdDogJ2Zsb2F0MzJ4MidcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBhcnJheVN0cmlkZTogNCAqIDIsXG4gICAgICAgIHN0ZXBNb2RlOiAndmVydGV4J1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgLy8gdGV4dHVyZUlkXG4gICAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzaGFkZXJMb2NhdGlvbjogNSxcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIGZvcm1hdDogJ3VpbnQzMidcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBhcnJheVN0cmlkZTogNCxcbiAgICAgICAgc3RlcE1vZGU6ICdpbnN0YW5jZSdcbiAgICAgIH1cbiAgICBdO1xuICAgIGNvbnN0IHBpcGVsaW5lRGVzY3JpcHRvcjogR1BVUmVuZGVyUGlwZWxpbmVEZXNjcmlwdG9yID0ge1xuICAgICAgdmVydGV4OiB7XG4gICAgICAgIG1vZHVsZTogc2hhZGVyTW9kdWxlLFxuICAgICAgICBlbnRyeVBvaW50OiAndmVydGV4X21haW4nLFxuICAgICAgICBidWZmZXJzOiB2ZXJ0ZXhCdWZmZXJzXG4gICAgICB9LFxuICAgICAgZnJhZ21lbnQ6IHtcbiAgICAgICAgbW9kdWxlOiBzaGFkZXJNb2R1bGUsXG4gICAgICAgIGVudHJ5UG9pbnQ6ICdmcmFnbWVudF9tYWluJyxcbiAgICAgICAgdGFyZ2V0czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZvcm1hdDogbmF2aWdhdG9yLmdwdS5nZXRQcmVmZXJyZWRDYW52YXNGb3JtYXQoKSxcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICBwcmltaXRpdmU6IHtcbiAgICAgICAgdG9wb2xvZ3k6ICd0cmlhbmdsZS1saXN0JyxcbiAgICAgICAgY3VsbE1vZGU6ICdiYWNrJ1xuICAgICAgfSxcbiAgICAgIGxheW91dDogJ2F1dG8nLFxuICAgICAgZGVwdGhTdGVuY2lsOiB7XG4gICAgICAgIGRlcHRoV3JpdGVFbmFibGVkOiB0cnVlLFxuICAgICAgICBkZXB0aENvbXBhcmU6ICdsZXNzJyxcbiAgICAgICAgZm9ybWF0OiAnZGVwdGgyNHBsdXMnXG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLnJlbmRlclBpcGVsaW5lID0gZGV2aWNlLmNyZWF0ZVJlbmRlclBpcGVsaW5lKHBpcGVsaW5lRGVzY3JpcHRvcik7XG5cbiAgICB0aGlzLnNhbXBsZXIgPSBkZXZpY2UuY3JlYXRlU2FtcGxlcih7XG4gICAgICBtYWdGaWx0ZXI6ICdsaW5lYXInLFxuICAgICAgbWluRmlsdGVyOiAnbGluZWFyJ1xuICAgIH0pO1xuXG4gICAgdGhpcy5udW1MaWdodHNCdWZmZXIgPSB0aGlzLmRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgICAgc2l6ZTogNCxcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5VTklGT1JNIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1RcbiAgICB9KTtcbiAgICB0aGlzLmxpZ2h0c0J1ZmZlciA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICAvLyDjgqLjg6njgqTjg6Hjg7Pjg4jjga7pg73lkIjjgacgNCo0IOOBqOOBmeOCi1xuICAgICAgc2l6ZTogNCAqIDQgKiAyMCxcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5VTklGT1JNIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1RcbiAgICB9KTtcbiAgICB0aGlzLnZpZXdCdWZmZXIgPSB0aGlzLmRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgICAgc2l6ZTogMTYgKiA0LFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlVOSUZPUk0gfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVFxuICAgIH0pO1xuICAgIHRoaXMucHJvamVjdGlvbkJ1ZmZlciA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICBzaXplOiAxNiAqIDQsXG4gICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVU5JRk9STSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNUXG4gICAgfSk7XG5cbiAgICB0aGlzLmJpbmRpbmdzID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCt+ODvOODs+OCkuaPj+eUu+OBmeOCi1xuICAgKiBAcGFyYW0gc2NlbmUg5o+P55S75a++6LGh44Gu44K344O844OzXG4gICAqIEBwYXJhbSBjYW1lcmEg5o+P55S744Gr5L2/44GG44Kr44Oh44OpXG4gICAqL1xuICBwdWJsaWMgcmVuZGVyKHNjZW5lOiBTY2VuZSwgY2FtZXJhOiBDYW1lcmEpOiB2b2lkIHtcbiAgICBjb25zdCBjb21tYW5kRW5jb2RlciA9IHRoaXMuZGV2aWNlLmNyZWF0ZUNvbW1hbmRFbmNvZGVyKCk7XG5cbiAgICAvLyB1bmlmb3JtIOODh+ODvOOCv+OBruS9nOaIkFxuICAgIGNvbnN0IGxpZ2h0cyA9IHNjZW5lLmdldExpZ2h0cygpO1xuICAgIGNvbnN0IGxpZ2h0c0RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGxpZ2h0cy5mbGF0TWFwKChsaWdodCkgPT4ge1xuICAgICAgLy8g44Ki44Op44Kk44Oh44Oz44OI44Gu6YO95ZCI44Gn5pyA5b6M44GrMOOCkui/veWKoOOBmeOCi1xuICAgICAgcmV0dXJuIFtsaWdodC5nZXRYKCksIGxpZ2h0LmdldFkoKSwgbGlnaHQuZ2V0WigpLCAwXTtcbiAgICB9KSk7XG4gICAgY29uc3QgbnVtTGlnaHRzID0gbmV3IFVpbnQzMkFycmF5KFtsaWdodHMubGVuZ3RoXSk7XG4gICAgY29uc3QgdmlldyA9IG5ldyBGbG9hdDMyQXJyYXkoY2FtZXJhLmdldFZpZXdNYXRyaXgoKS50b0FycmF5KCkpO1xuICAgIGNvbnN0IHByb2plY3Rpb24gPSBuZXcgRmxvYXQzMkFycmF5KGNhbWVyYS5nZXRQcm9qZWN0aW9uTWF0cml4KCkudG9BcnJheSgpKTtcblxuICAgIHRoaXMuZGV2aWNlLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMubnVtTGlnaHRzQnVmZmVyLCAwLCBudW1MaWdodHMsIDAsIG51bUxpZ2h0cy5sZW5ndGgpO1xuICAgIHRoaXMuZGV2aWNlLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMubGlnaHRzQnVmZmVyLCAwLCBsaWdodHNEYXRhLCAwLCBsaWdodHNEYXRhLmxlbmd0aCk7XG4gICAgdGhpcy5kZXZpY2UucXVldWUud3JpdGVCdWZmZXIodGhpcy52aWV3QnVmZmVyLCAwLCB2aWV3LCAwLCB2aWV3Lmxlbmd0aCk7XG4gICAgdGhpcy5kZXZpY2UucXVldWUud3JpdGVCdWZmZXIodGhpcy5wcm9qZWN0aW9uQnVmZmVyLCAwLCBwcm9qZWN0aW9uLCAwLCBwcm9qZWN0aW9uLmxlbmd0aCk7XG5cbiAgICAvLyBjbGVhclxuICAgIGNvbW1hbmRFbmNvZGVyLmJlZ2luUmVuZGVyUGFzcyh7XG4gICAgICBjb2xvckF0dGFjaG1lbnRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBjbGVhclZhbHVlOiBjbGVhckNvbG9yLFxuICAgICAgICAgIGxvYWRPcDogJ2NsZWFyJyxcbiAgICAgICAgICBzdG9yZU9wOiAnc3RvcmUnLFxuICAgICAgICAgIHZpZXc6IHRoaXMuY3R4LmdldEN1cnJlbnRUZXh0dXJlKCkuY3JlYXRlVmlldygpXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZGVwdGhTdGVuY2lsQXR0YWNobWVudDoge1xuICAgICAgICB2aWV3OiB0aGlzLmRlcHRoVGV4dHVyZS5jcmVhdGVWaWV3KCksXG4gICAgICAgIGRlcHRoQ2xlYXJWYWx1ZTogMS4wLFxuICAgICAgICBkZXB0aExvYWRPcDogJ2NsZWFyJyxcbiAgICAgICAgZGVwdGhTdG9yZU9wOiAnc3RvcmUnXG4gICAgICB9XG4gICAgfSkuZW5kKCk7XG5cbiAgICBzY2VuZS5nZXRNZXNoZXMoKS5mb3JFYWNoKChtZXNoKSA9PiB7XG4gICAgICBsZXQgYmluZGluZyA9IHRoaXMuYmluZGluZ3MuZ2V0KG1lc2gpO1xuICAgICAgaWYgKGJpbmRpbmcgPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB0ZXh0dXJlSW1hZ2VzID0gbWVzaC5nZXRUZXh0dXJlSW1hZ2VzKCk7XG4gICAgICAgIC8vIOS4gOOBpOebruOBriB3aWR0aCDjgaggaGVpZ2h0IOOCkuS9v+eUqFxuICAgICAgICBjb25zdCB0ZXh0dXJlV2lkdGggPSB0ZXh0dXJlSW1hZ2VzWzBdLndpZHRoO1xuICAgICAgICBjb25zdCB0ZXh0dXJlSGVpZ2h0ID0gdGV4dHVyZUltYWdlc1swXS5oZWlnaHQ7XG4gICAgICAgIGNvbnN0IHRleHR1cmVDb3VudCA9IHRleHR1cmVJbWFnZXMubGVuZ3RoO1xuICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy5kZXZpY2UuY3JlYXRlVGV4dHVyZSh7XG4gICAgICAgICAgc2l6ZTogW1xuICAgICAgICAgICAgdGV4dHVyZVdpZHRoLFxuICAgICAgICAgICAgdGV4dHVyZUhlaWdodCxcbiAgICAgICAgICAgIC8vIGxheWVyIOOBjCAxIOOBoOOBqCB0ZXh0dXJlXzJkX2FycmF5IOOBqOOBl+OBpuaJseOCj+OCjOOBquOBhOOBruOBp+OAgVxuICAgICAgICAgICAgLy8gMuS7peS4iuOBruWApOOBq+OBquOCi+OCiOOBhuOBq+OBmeOCi1xuICAgICAgICAgICAgTWF0aC5tYXgodGV4dHVyZUNvdW50LCAyKVxuICAgICAgICAgIF0sXG4gICAgICAgICAgZm9ybWF0OiAncmdiYTh1bm9ybScsXG4gICAgICAgICAgdXNhZ2U6IEdQVVRleHR1cmVVc2FnZS5URVhUVVJFX0JJTkRJTkcgfFxuICAgICAgICAgICAgR1BVVGV4dHVyZVVzYWdlLkNPUFlfRFNUIHxcbiAgICAgICAgICAgIEdQVVRleHR1cmVVc2FnZS5SRU5ERVJfQVRUQUNITUVOVFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdGV4dHVyZUJ1ZmZlciA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICAgICAgc2l6ZTogdGV4dHVyZVdpZHRoICogdGV4dHVyZUhlaWdodCAqIHRleHR1cmVDb3VudCAqIDQsXG4gICAgICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLkNPUFlfU1JDLFxuICAgICAgICAgIG1hcHBlZEF0Q3JlYXRpb246IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBpeGVsRGF0YSA9IG5ldyBVaW50OEFycmF5KHRleHR1cmVCdWZmZXIuZ2V0TWFwcGVkUmFuZ2UoKSk7XG4gICAgICAgIHRleHR1cmVJbWFnZXMuZm9yRWFjaCgodGV4dHVyZUltYWdlLCBpZHgpID0+IHtcbiAgICAgICAgICBwaXhlbERhdGEuc2V0KHRleHR1cmVJbWFnZS5kYXRhLCB0ZXh0dXJlV2lkdGggKiB0ZXh0dXJlSGVpZ2h0ICogaWR4ICogNCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0ZXh0dXJlQnVmZmVyLnVubWFwKCk7XG5cbiAgICAgICAgLy8gVE9ETzog44OG44Kv44K544OB44Oj44Gu5bmF44GMIDY0IOODlOOCr+OCu+ODq++8iDI1NiDjg5DjgqTjg4jvvInjgZjjgoPjgarjgYTjgajoqq3jgb/ovrzjgoHjgarjgYTllY/poYzjgarjgpPjgajjgYvjgZfjgZ/jgYRcbiAgICAgICAgLy8gYnl0ZXNQZXJSb3cgKDY0KSBpcyBub3QgYSBtdWx0aXBsZSBvZiAyNTYuXG4gICAgICAgIGNvbW1hbmRFbmNvZGVyLmNvcHlCdWZmZXJUb1RleHR1cmUoXG4gICAgICAgICAge1xuICAgICAgICAgICAgYnVmZmVyOiB0ZXh0dXJlQnVmZmVyLFxuICAgICAgICAgICAgYnl0ZXNQZXJSb3c6IHRleHR1cmVXaWR0aCAqIDQsXG4gICAgICAgICAgICByb3dzUGVySW1hZ2U6IHRleHR1cmVIZWlnaHRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRleHR1cmU6IHRleHR1cmVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHdpZHRoOiB0ZXh0dXJlV2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHRleHR1cmVIZWlnaHQsXG4gICAgICAgICAgICBkZXB0aE9yQXJyYXlMYXllcnM6IHRleHR1cmVDb3VudFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBiaW5kR3JvdXAgPSB0aGlzLmRldmljZS5jcmVhdGVCaW5kR3JvdXAoe1xuICAgICAgICAgIGxheW91dDogdGhpcy5yZW5kZXJQaXBlbGluZS5nZXRCaW5kR3JvdXBMYXlvdXQoMCksXG4gICAgICAgICAgZW50cmllczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBiaW5kaW5nOiAwLFxuICAgICAgICAgICAgICByZXNvdXJjZToge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcjogdGhpcy5udW1MaWdodHNCdWZmZXJcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGJpbmRpbmc6IDEsXG4gICAgICAgICAgICAgIHJlc291cmNlOiB7XG4gICAgICAgICAgICAgICAgYnVmZmVyOiB0aGlzLmxpZ2h0c0J1ZmZlclxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgYmluZGluZzogMixcbiAgICAgICAgICAgICAgcmVzb3VyY2U6IHtcbiAgICAgICAgICAgICAgICBidWZmZXI6IHRoaXMudmlld0J1ZmZlclxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgYmluZGluZzogMyxcbiAgICAgICAgICAgICAgcmVzb3VyY2U6IHtcbiAgICAgICAgICAgICAgICBidWZmZXI6IHRoaXMucHJvamVjdGlvbkJ1ZmZlclxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgYmluZGluZzogNCxcbiAgICAgICAgICAgICAgcmVzb3VyY2U6IHRoaXMuc2FtcGxlclxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgYmluZGluZzogNSxcbiAgICAgICAgICAgICAgcmVzb3VyY2U6IHRleHR1cmUuY3JlYXRlVmlldygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDkuIDml6bmm7TmlrDjgZXjgozjgarjgYTjgoLjga7jgajjgZnjgotcbiAgICAgICAgLy8gb2Zmc2V0XG4gICAgICAgIGNvbnN0IG9mZnNldHMgPSBuZXcgRmxvYXQzMkFycmF5KG1lc2guZ2V0T2Zmc2V0cygpKTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0QnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgICAgICBzaXplOiBvZmZzZXRzLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlZFUlRFWCB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNUXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRldmljZS5xdWV1ZS53cml0ZUJ1ZmZlcihvZmZzZXRCdWZmZXIsIDAsIG9mZnNldHMsIDAsIG9mZnNldHMubGVuZ3RoKTtcbiAgICAgICAgLy8gbm9ybWFsXG4gICAgICAgIGNvbnN0IG5vcm1hbHMgPSBuZXcgRmxvYXQzMkFycmF5KG1lc2guZ2V0Tm9ybWFscygpKTtcbiAgICAgICAgY29uc3Qgbm9ybWFsQnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgICAgICBzaXplOiBub3JtYWxzLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlZFUlRFWCB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNUXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRldmljZS5xdWV1ZS53cml0ZUJ1ZmZlcihub3JtYWxCdWZmZXIsIDAsIG5vcm1hbHMsIDAsIG5vcm1hbHMubGVuZ3RoKTtcbiAgICAgICAgLy8gcG90aXRpb25cbiAgICAgICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShtZXNoLmdldEluc3RhbmNlUG9zaXRpb25zKCkpO1xuICAgICAgICBjb25zdCBwb3NpdGlvbkJ1ZmZlciA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICAgICAgc2l6ZTogcG9zaXRpb25zLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlZFUlRFWCB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNUXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRldmljZS5xdWV1ZS53cml0ZUJ1ZmZlcihwb3NpdGlvbkJ1ZmZlciwgMCwgcG9zaXRpb25zLCAwLCBwb3NpdGlvbnMubGVuZ3RoKTtcbiAgICAgICAgLy8gcm90YXRpb25cbiAgICAgICAgY29uc3Qgcm90YXRpb25zID0gbmV3IFVpbnQzMkFycmF5KG1lc2guZ2V0SW5zdGFuY2VSb3RhdGlvbnMoKSk7XG4gICAgICAgIGNvbnN0IHJvdGF0aW9uQnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgICAgICBzaXplOiByb3RhdGlvbnMuYnl0ZUxlbmd0aCxcbiAgICAgICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVkVSVEVYIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1RcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGV2aWNlLnF1ZXVlLndyaXRlQnVmZmVyKHJvdGF0aW9uQnVmZmVyLCAwLCByb3RhdGlvbnMsIDAsIHJvdGF0aW9ucy5sZW5ndGgpO1xuICAgICAgICAvLyB1dlxuICAgICAgICBjb25zdCB1dnMgPSBuZXcgRmxvYXQzMkFycmF5KG1lc2guZ2V0VVZDb29yZHMoKSk7XG4gICAgICAgIGNvbnN0IHV2QnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgICAgICBzaXplOiB1dnMuYnl0ZUxlbmd0aCxcbiAgICAgICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVkVSVEVYIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1RcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGV2aWNlLnF1ZXVlLndyaXRlQnVmZmVyKHV2QnVmZmVyLCAwLCB1dnMsIDAsIHV2cy5sZW5ndGgpO1xuICAgICAgICAvLyB0ZXh0dXJlSWRcbiAgICAgICAgY29uc3QgdGV4dHVyZUlkcyA9IG5ldyBVaW50MzJBcnJheShtZXNoLmdldEluc3RhbmNlVGV4dHVyZUlkcygpKTtcbiAgICAgICAgY29uc3QgdGV4dHVyZUlkQnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgICAgICBzaXplOiB0ZXh0dXJlSWRzLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlZFUlRFWCB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNUXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRldmljZS5xdWV1ZS53cml0ZUJ1ZmZlcih0ZXh0dXJlSWRCdWZmZXIsIDAsIHRleHR1cmVJZHMsIDAsIHRleHR1cmVJZHMubGVuZ3RoKTtcbiAgICAgICAgYmluZGluZyA9IHtcbiAgICAgICAgICBiaW5kR3JvdXA6IGJpbmRHcm91cCxcbiAgICAgICAgICBvZmZzZXRzOiBvZmZzZXRCdWZmZXIsXG4gICAgICAgICAgbm9ybWFsczogbm9ybWFsQnVmZmVyLFxuICAgICAgICAgIHBvc2l0aW9uczogcG9zaXRpb25CdWZmZXIsXG4gICAgICAgICAgcm90YXRpb25zOiByb3RhdGlvbkJ1ZmZlcixcbiAgICAgICAgICB1dnM6IHV2QnVmZmVyLFxuICAgICAgICAgIHRleHR1cmVJZHM6IHRleHR1cmVJZEJ1ZmZlclxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmJpbmRpbmdzLnNldChtZXNoLCBiaW5kaW5nKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlbmRlclBhc3MgPSBjb21tYW5kRW5jb2Rlci5iZWdpblJlbmRlclBhc3Moe1xuICAgICAgICBjb2xvckF0dGFjaG1lbnRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbG9hZE9wOiAnbG9hZCcsXG4gICAgICAgICAgICBzdG9yZU9wOiAnc3RvcmUnLFxuICAgICAgICAgICAgdmlldzogdGhpcy5jdHguZ2V0Q3VycmVudFRleHR1cmUoKS5jcmVhdGVWaWV3KClcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBkZXB0aFN0ZW5jaWxBdHRhY2htZW50OiB7XG4gICAgICAgICAgdmlldzogdGhpcy5kZXB0aFRleHR1cmUuY3JlYXRlVmlldygpLFxuICAgICAgICAgIGRlcHRoTG9hZE9wOiAnbG9hZCcsXG4gICAgICAgICAgZGVwdGhTdG9yZU9wOiAnc3RvcmUnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmVuZGVyUGFzcy5zZXRQaXBlbGluZSh0aGlzLnJlbmRlclBpcGVsaW5lKTtcbiAgICAgIHJlbmRlclBhc3Muc2V0QmluZEdyb3VwKDAsIGJpbmRpbmcuYmluZEdyb3VwKTtcbiAgICAgIHJlbmRlclBhc3Muc2V0VmVydGV4QnVmZmVyKDAsIGJpbmRpbmcub2Zmc2V0cyk7XG4gICAgICByZW5kZXJQYXNzLnNldFZlcnRleEJ1ZmZlcigxLCBiaW5kaW5nLm5vcm1hbHMpO1xuICAgICAgcmVuZGVyUGFzcy5zZXRWZXJ0ZXhCdWZmZXIoMiwgYmluZGluZy5wb3NpdGlvbnMpO1xuICAgICAgcmVuZGVyUGFzcy5zZXRWZXJ0ZXhCdWZmZXIoMywgYmluZGluZy5yb3RhdGlvbnMpO1xuICAgICAgcmVuZGVyUGFzcy5zZXRWZXJ0ZXhCdWZmZXIoNCwgYmluZGluZy51dnMpO1xuICAgICAgcmVuZGVyUGFzcy5zZXRWZXJ0ZXhCdWZmZXIoNSwgYmluZGluZy50ZXh0dXJlSWRzKTtcbiAgICAgIHJlbmRlclBhc3MuZHJhdyhtZXNoLmdldFZlcnRleENvdW50KCksIG1lc2guZ2V0SW5zdGFuY2VDb3VudCgpKTtcbiAgICAgIHJlbmRlclBhc3MuZW5kKCk7XG4gICAgfSk7XG4gICAgdGhpcy5kZXZpY2UucXVldWUuc3VibWl0KFtjb21tYW5kRW5jb2Rlci5maW5pc2goKV0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBMaWdodCB9IGZyb20gJy4vbGlnaHQnO1xuaW1wb3J0IHsgSW5zdGFuY2VkTWVzaCB9IGZyb20gJy4vbWVzaC9pbnN0YW5jZWRNZXNoJztcblxuZXhwb3J0IGNsYXNzIFNjZW5lIHtcbiAgcHJpdmF0ZSBtZXNoZXM6IEluc3RhbmNlZE1lc2hbXTtcbiAgcHJpdmF0ZSBsaWdodHM6IExpZ2h0W107XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCk7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihtZXNoZXM6IEluc3RhbmNlZE1lc2hbXSwgbGlnaHRzOiBMaWdodFtdKTtcbiAgcHVibGljIGNvbnN0cnVjdG9yKG1lc2hlcz86IEluc3RhbmNlZE1lc2hbXSwgbGlnaHRzPzogTGlnaHRbXSkge1xuICAgIGlmIChtZXNoZXMgIT0gbnVsbCkge1xuICAgICAgdGhpcy5tZXNoZXMgPSBtZXNoZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWVzaGVzID0gW107XG4gICAgfVxuICAgIGlmIChsaWdodHMgIT0gbnVsbCkge1xuICAgICAgdGhpcy5saWdodHMgPSBsaWdodHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGlnaHRzID0gW107XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldExpZ2h0cygpOiBMaWdodFtdIHtcbiAgICByZXR1cm4gdGhpcy5saWdodHM7XG4gIH1cblxuICBwdWJsaWMgZ2V0TWVzaGVzKCk6IEluc3RhbmNlZE1lc2hbXSB7XG4gICAgcmV0dXJuIHRoaXMubWVzaGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCt+ODvOODs+OBq+ODoeODg+OCt+ODpeOCkui/veWKoOOBmeOCi1xuICAgKiBAcGFyYW0gbWVzaCDov73liqDjgZnjgovjg6Hjg4Pjgrfjg6VcbiAgICovXG4gIHB1YmxpYyBhZGRNZXNoKG1lc2g6IEluc3RhbmNlZE1lc2gpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tZXNoZXMuaW5kZXhPZihtZXNoKSA8IDApIHtcbiAgICAgIHRoaXMubWVzaGVzLnB1c2gobWVzaCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOOCt+ODvOODs+OBi+OCieODoeODg+OCt+ODpeOCkuWPluOCiumZpOOBj1xuICAgKiBAcGFyYW0gbWVzaCDlj5bjgorpmaTjgY/jg6Hjg4Pjgrfjg6VcbiAgICovXG4gIHB1YmxpYyByZW1vdmVNZXNoKG1lc2g6IEluc3RhbmNlZE1lc2gpOiB2b2lkIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLm1lc2hlcy5pbmRleE9mKG1lc2gpO1xuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgdGhpcy5tZXNoZXMuc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOOCt+ODvOODs+OBq+ODqeOCpOODiOOCkui/veWKoOOBmeOCi1xuICAgKiBAcGFyYW0gbGlnaHQg6L+95Yqg44GZ44KL44Op44Kk44OIXG4gICAqL1xuICBwdWJsaWMgYWRkTGlnaHQobGlnaHQ6IExpZ2h0KTogdm9pZCB7XG4gICAgaWYgKHRoaXMubGlnaHRzLmluZGV4T2YobGlnaHQpIDwgMCkge1xuICAgICAgdGhpcy5saWdodHMucHVzaChsaWdodCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOOCt+ODvOODs+OBi+OCieODqeOCpOODiOOCkuWPluOCiumZpOOBj1xuICAgKiBAcGFyYW0gbGlnaHQg5Y+W44KK6Zmk44GP44Op44Kk44OIXG4gICAqL1xuICBwdWJsaWMgcmVtb3ZlTGlnaHQobGlnaHQ6IExpZ2h0KTogdm9pZCB7XG4gICAgY29uc3QgaWR4ID0gdGhpcy5saWdodHMuaW5kZXhPZihsaWdodCk7XG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICB0aGlzLmxpZ2h0cy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IFBlcnNwZWN0aXZlQ2FtZXJhIH0gZnJvbSAnLi9jYW1lcmEnO1xuaW1wb3J0IHsgRlBTS2V5Ym9hcmQsIEZQU01vdXNlLCB3aGVlbFpvb20gfSBmcm9tICcuL2lucHV0JztcbmltcG9ydCB7IExpZ2h0IH0gZnJvbSAnLi9saWdodCc7XG5pbXBvcnQgeyBsb2FkT2JqIH0gZnJvbSAnLi9sb2FkZXInO1xuaW1wb3J0IHsgSW5zdGFuY2VkQ3ViZSB9IGZyb20gJy4vbWVzaC9pbnN0YW5jZWRDdWJlJztcbmltcG9ydCB7IEluc3RhbmNlZEN1c3RvbU1lc2ggfSBmcm9tICcuL21lc2gvaW5zdGFuY2VkQ3VzdG9tTWVzaCc7XG5pbXBvcnQgeyBJbnN0YW5jZWRTcXVhcmUgfSBmcm9tICcuL21lc2gvaW5zdGFuY2VkU3F1YXJlJztcbmltcG9ydCB7IFJlbmRlcmVyIH0gZnJvbSAnLi9yZW5kZXJlcic7XG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gJy4vc2NlbmUnO1xuaW1wb3J0IHsgZmV0Y2hJbWFnZURhdGEgfSBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IHsgVmVjMyB9IGZyb20gJy4vdmVjdG9yJztcblxuLyoqXG4gKiBFeGFtcGxlXG4gKi9cblxud2luZG93Lm9ubG9hZCA9IGFzeW5jICgpID0+IHtcbiAgLy8vLy8vLy8vLyDoq7jjgIXmupblgpkgLy8vLy8vLy8vL1xuXG4gIC8vIEdQVURldmljZSDjga7lj5blvpdcbiAgY29uc3QgY3ZzID0gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSk7XG4gIGN2cy53aWR0aCA9IDEwMDA7XG4gIGN2cy5oZWlnaHQgPSA1MDA7XG4gIGNvbnN0IGN0eCA9IGN2cy5nZXRDb250ZXh0KCd3ZWJncHUnKTtcbiAgaWYgKGN0eCA9PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGFkYXB0ZXIgPSBhd2FpdCBuYXZpZ2F0b3IuZ3B1LnJlcXVlc3RBZGFwdGVyKCk7XG4gIGlmIChhZGFwdGVyID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgZGV2aWNlID0gYXdhaXQgYWRhcHRlci5yZXF1ZXN0RGV2aWNlKCk7XG5cbiAgLy8g5oOF5aCx6KGo56S6XG4gIGNvbnN0IGluZm8gPSBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ByZScpKTtcblxuICAvLyBjYW1lcmFcbiAgY29uc3QgY2FtZXJhID0gbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKFxuICAgIG5ldyBWZWMzKDAsIDAsIDEwKSwgLy8gcG9zXG4gICAgbmV3IFZlYzMoMCwgMCwgMCksICAvLyByb3RcbiAgICAoNzAgLyAxODApICogTWF0aC5QSSwgLy8gZm92XG4gICAgY3ZzLndpZHRoIC8gY3ZzLmhlaWdodCwgLy8gYXNwZWN0LCB3L2hcbiAgICAwLjUsIC8vIG5lYXJcbiAgICAxMDAgLy8gZmFyXG4gICk7XG5cbiAgLy8gc2NlbmVcbiAgY29uc3Qgc2NlbmUgPSBuZXcgU2NlbmUoKTtcblxuICAvLyBsaWdodFxuICBzY2VuZS5hZGRMaWdodChuZXcgTGlnaHQoMSwgMiwgMykpO1xuICBzY2VuZS5hZGRMaWdodChuZXcgTGlnaHQoLTEsIC0yLCAtMykpO1xuXG4gIC8vIG1lc2hcbiAgLy8g44Go44KK44GC44GI44Ga44Op44Oz44OA44Og44Gq5L2N572u44Gr5L2V5YCL44GL6YGp5b2T44Gr5Ye644GZXG4gIGZ1bmN0aW9uIHJhbmRvbUNvb3JkKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgfVxuXG4gIGNvbnN0IG1lc2gxID0gbmV3IEluc3RhbmNlZEN1YmUoKTtcbiAgbWVzaDEuc2V0VGV4dHVyZUltYWdlcyhbXG4gICAgYXdhaXQgZmV0Y2hJbWFnZURhdGEoJy4vdGV4dHVyZS9kaWNlLnBuZycpXG4gIF0pO1xuICBzY2VuZS5hZGRNZXNoKG1lc2gxKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xuICAgIG1lc2gxLmFkZEluc3RhbmNlKG5ldyBWZWMzKFxuICAgICAgcmFuZG9tQ29vcmQoKSxcbiAgICAgIHJhbmRvbUNvb3JkKCksXG4gICAgICByYW5kb21Db29yZCgpXG4gICAgKSwgMCwgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNikpO1xuICB9XG5cbiAgY29uc3QgbWVzaDIgPSBuZXcgSW5zdGFuY2VkQ3ViZSgpO1xuICBtZXNoMi5zZXRUZXh0dXJlSW1hZ2VzKFtcbiAgICBhd2FpdCBmZXRjaEltYWdlRGF0YSgnLi90ZXh0dXJlL2RpY2UyLnBuZycpXG4gIF0pO1xuICBzY2VuZS5hZGRNZXNoKG1lc2gyKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xuICAgIG1lc2gyLmFkZEluc3RhbmNlKG5ldyBWZWMzKFxuICAgICAgcmFuZG9tQ29vcmQoKSArIDEwLFxuICAgICAgcmFuZG9tQ29vcmQoKSArIDEwLFxuICAgICAgcmFuZG9tQ29vcmQoKSArIDEwXG4gICAgKSwgMCk7XG4gIH1cblxuICAvLyBzcXVhcmUg54mIXG4gIGNvbnN0IG1lc2gzID0gbmV3IEluc3RhbmNlZFNxdWFyZSgpO1xuICBtZXNoMy5zZXRUZXh0dXJlSW1hZ2VzKFtcbiAgICBhd2FpdCBmZXRjaEltYWdlRGF0YSgnLi90ZXh0dXJlL3doaXRlLnBuZycpLFxuICAgIGF3YWl0IGZldGNoSW1hZ2VEYXRhKCcuL3RleHR1cmUveWVsbG93LnBuZycpXG4gIF0pO1xuICBzY2VuZS5hZGRNZXNoKG1lc2gzKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xuICAgIG1lc2gzLmFkZEluc3RhbmNlKG5ldyBWZWMzKFxuICAgICAgcmFuZG9tQ29vcmQoKSAtIDEwLFxuICAgICAgcmFuZG9tQ29vcmQoKSAtIDEwLFxuICAgICAgcmFuZG9tQ29vcmQoKSAtIDEwXG4gICAgKSwgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMiksIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYpKTtcbiAgfVxuXG4gIC8vIE1pbmV3YXlzIOOBruWHuuWKm+OCkuiqreOBv+i+vOOBv1xuICBjb25zdCBvYmogPSBhd2FpdCBsb2FkT2JqKCcuL29iai9leGFtcGxlLm9iaicpO1xuICBjb25zb2xlLmxvZyhvYmoub2JqZWN0cy5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG9iai5vYmplY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgbWVzaDQgPSBuZXcgSW5zdGFuY2VkQ3VzdG9tTWVzaChcbiAgICAgIG9iai52LFxuICAgICAgb2JqLnZuLFxuICAgICAgb2JqLnZ0LFxuICAgICAgb2JqLm9iamVjdHNbaV0uZlxuICAgICk7XG4gICAgY29uc3QgbXRsID0gb2JqLm1hdGVyaWFscy5maW5kKG1hdGVyaWFsID0+IG1hdGVyaWFsLm5hbWUgPT0gb2JqLm9iamVjdHNbaV0ubXRsTmFtZSk7XG4gICAgaWYgKG10bCAhPSBudWxsICYmIG10bC5tYXBLZCAhPSBudWxsKSB7XG4gICAgICBtZXNoNC5zZXRUZXh0dXJlSW1hZ2VzKFtcbiAgICAgICAgYXdhaXQgZmV0Y2hJbWFnZURhdGEobXRsLm1hcEtkKVxuICAgICAgXSk7XG4gICAgfVxuICAgIHNjZW5lLmFkZE1lc2gobWVzaDQpO1xuICB9XG5cbiAgLy8gcmVuZGVyZXJcbiAgY29uc3QgcmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoY3R4LCBkZXZpY2UpO1xuXG4gIC8vLy8vLy8vLy8g44Or44O844OX6YOo5YiGIC8vLy8vLy8vLy9cblxuICAvLyDjgq3jg7zjg7vjg57jgqbjgrnlhaXlipvlh6bnkIZcbiAgY29uc3Qga2V5Ym9hcmQgPSBuZXcgRlBTS2V5Ym9hcmQod2luZG93KTtcbiAgbmV3IEZQU01vdXNlKHdpbmRvdywgY2FtZXJhKTtcbiAgd2hlZWxab29tKGNhbWVyYSk7XG5cbiAgLy8g44OR44Op44Oh44O844K/5Zue44KKXG4gIGxldCByZXF1ZXN0SWQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBsZXQgbGFzdFRpbWVzdGFtcCA9IDA7XG5cbiAgLy8g44Kr44Oh44Op44Gu56e75YuV6YCf5bqmXG4gIGxldCB2TFIgPSAwO1xuICBsZXQgdlVEID0gMDtcbiAgbGV0IHZGQiA9IDA7XG4gIGZ1bmN0aW9uIGdldENhbVZlbChwdjogbnVtYmVyLCBjdjogbnVtYmVyKSB7XG4gICAgLy8g5Yqg6YCf5bqm54Sh44GX44Gu5aC05ZCI44GvIGN2IOOCkuOBneOBruOBvuOBvui/lOOBmVxuICAgIC8vIHJldHVybiBjdjtcblxuICAgIGlmIChjdiA9PSAwIHx8IHB2ICogY3YgPCAwKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2UgaWYgKHB2IDw9IC0xIHx8IHB2ID49IDEpIHtcbiAgICAgIHJldHVybiBwdjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHB2ICsgMC4wNSAqIGN2O1xuICAgIH1cbiAgfVxuXG4gIC8vIOOCouODi+ODoeODvOOCt+ODp+ODs+WHpueQhlxuICBjb25zdCBzdGVwID0gYXN5bmMgKHRpbWVzdGFtcDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgdGltZUdhcCA9IHRpbWVzdGFtcCAtIChsYXN0VGltZXN0YW1wIHx8IHRpbWVzdGFtcCk7XG4gICAgbGFzdFRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcblxuICAgIC8qKiog5o+P55S75Yem55CG44GT44GT44GL44KJICoqKi9cblxuICAgIC8vIOOCq+ODoeODqeOBruS9jee9ruOCkuabtOaWsFxuICAgIHZMUiA9IGdldENhbVZlbCh2TFIsIGtleWJvYXJkLmdldExSKCkpO1xuICAgIHZVRCA9IGdldENhbVZlbCh2VUQsIGtleWJvYXJkLmdldFVEKCkpO1xuICAgIHZGQiA9IGdldENhbVZlbCh2RkIsIGtleWJvYXJkLmdldEZCKCkpO1xuICAgIGNhbWVyYS5tb3ZlKG5ldyBWZWMzKFxuICAgICAgdkxSICogdGltZUdhcCAvIDUwLFxuICAgICAgdlVEICogdGltZUdhcCAvIDUwLFxuICAgICAgdkZCICogdGltZUdhcCAvIDUwXG4gICAgKSk7XG5cbiAgICAvLyDmj4/nlLtcbiAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG5cbiAgICAvLyDmg4XloLHooajnpLpcbiAgICBpbmZvLnRleHRDb250ZW50ID0gYEZQUzogJHsxIC8gdGltZUdhcCAqIDEwMDB9XG5jYW1lcmFQb3NYOiAke2NhbWVyYS5wb3NpdGlvbi54fVxuY2FtZXJhUG9zWTogJHtjYW1lcmEucG9zaXRpb24ueX1cbmNhbWVyYVBvc1o6ICR7Y2FtZXJhLnBvc2l0aW9uLnp9XG5jYW1lcmFSb3RYOiAke2NhbWVyYS5yb3RhdGlvbi54fVxuY2FtZXJhUm90WTogJHtjYW1lcmEucm90YXRpb24ueX1cbmNhbWVyYVJvdFo6ICR7Y2FtZXJhLnJvdGF0aW9uLnp9XG5jYW1lcmFGb3Y6ICR7Y2FtZXJhLmZvdn1gO1xuXG4gICAgLyoqKiDmj4/nlLvlh6bnkIbjgZPjgZPjgb7jgacgKioqL1xuXG4gICAgcmVxdWVzdElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xuICB9O1xuXG4gIC8vIOODneOCpOODs+OCv+ODreODg+OCr+OBvuOCj+OCiuOBruWHpueQhlxuICAvLyDjgajjgorjgYLjgYjjgZrpm5Hjgavlrp/oo4VcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxvY2tjaGFuZ2UnLCAoKSA9PiB7XG4gICAgaWYgKGRvY3VtZW50LnBvaW50ZXJMb2NrRWxlbWVudCA9PSBudWxsKSB7XG4gICAgICBpZiAocmVxdWVzdElkICE9IG51bGwpIHtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmVxdWVzdElkKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGFzdFRpbWVzdGFtcCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgcmVxdWVzdElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xuICAgIH1cbiAgfSwgZmFsc2UpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LnJlcXVlc3RQb2ludGVyTG9jaygpO1xuICB9LCBmYWxzZSk7XG59O1xuIl0sIm5hbWVzIjpbIk1hdHJpeCIsIm0iLCJuIiwiYXJyIiwidGhpcyIsImxlbmd0aCIsIkVycm9yIiwibWF0cml4IiwiaSIsImoiLCJzZXRWYWx1ZSIsInZhbHVlIiwiZ2V0VmFsdWUiLCJtdWwiLCJtYXQiLCJuZXdNYXQiLCJzdW0iLCJrIiwidG9BcnJheSIsIlBlcnNwZWN0aXZlQ2FtZXJhIiwicG90aXRpb24iLCJyb3RhdGlvbiIsImZvdiIsImFzcGVjdCIsIm5lYXIiLCJmYXIiLCJwb3NpdGlvbiIsImdldFJvdGF0ZU1hdHJpeCIsIk1hdGgiLCJjb3MiLCJ4Iiwic2luIiwieSIsImdldFRyYW5zbGF0ZU1hdHJpeCIsInoiLCJnZXRJbnZSb3RhdGVNYXRyaXhGb3JNb3ZlIiwibW92ZSIsIm1vdGlvbiIsImNvbnZlcnRlZCIsInJvdGF0ZSIsIm1pbiIsIm1heCIsIlBJIiwiZ2V0Vmlld01hdHJpeCIsImdldFByb2plY3Rpb25NYXRyaXgiLCJ0YW4iLCJWZWMyIiwiVmVjMyIsIktFWV9MRUZUIiwiS0VZX1JJR0hUIiwiS0VZX0ZST05UIiwiS0VZX0JBQ0siLCJLRVlfVVAiLCJLRVlfRE9XTiIsIkZQU0tleWJvYXJkIiwid2luZG93IiwiTCIsIlIiLCJGIiwiQiIsIlUiLCJEIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiY29kZSIsImdldExSIiwiZ2V0VUQiLCJnZXRGQiIsIkZQU01vdXNlIiwiY2FtZXJhIiwic2Vuc2l0aXZpdHkiLCJsYXN0TW92ZW1lbnRYIiwibGFzdE1vdmVtZW50WSIsImFicyIsIm1vdmVtZW50WCIsIm1vdmVtZW50WSIsIkxpZ2h0IiwiZ2V0WCIsImdldFkiLCJnZXRaIiwiZmV0Y2hJbWFnZURhdGEiLCJzcmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImltZyIsIkltYWdlIiwib25sb2FkIiwiY3ZzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJjZWlsIiwiaGVpZ2h0IiwiY3R4IiwiZ2V0Q29udGV4dCIsImRyYXdJbWFnZSIsImdldEltYWdlRGF0YSIsIm9uZXJyb3IiLCJlIiwiZmV0Y2hUZXh0IiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwidGV4dCIsInByZXByb2Nlc3NUZXh0IiwibGluZXMiLCJyZXBsYWNlIiwic3BsaXQiLCJmb3JFYWNoIiwibGluZSIsInN0YXJ0c1dpdGgiLCJwdXNoIiwiRmFjZSIsImxvYWRNdGwiLCJtdGxVcmwiLCJtdGxzIiwibXRsTmFtZSIsIm10bE1hcEtkIiwidGVybXMiLCJuYW1lIiwibWFwS2QiLCJHZW9tZXRyeUJhc2UiLCJ2ZXJ0aWNlcyIsIm5vcm1hbHMiLCJ1dkNvb3JkcyIsImFkZEZhY2UiLCJhZGRUcmlhbmdsZSIsInYxIiwidjIiLCJ2MyIsInV2MSIsInV2MiIsInV2MyIsInN1cmZhY2VOb3JtYWwiLCJnZXRTdXJmYWNlTm9ybWFsIiwiYWRkVmVydGV4IiwiYWRkVVZDb29yZCIsImFkZE5vcm1hbCIsImEiLCJiIiwibm9ybWFsIiwidmVydGV4IiwidXZDb29yZCIsImdldFZlcnRpY2VzIiwiZ2V0Tm9ybWFscyIsImdldFVWQ29vcmRzIiwiSW5zdGFuY2VkQ3ViZSIsInN1cGVyIiwidGV4dHVyZUltYWdlcyIsImluc3RhbmNlUG9zaXRpb25zIiwiaW5zdGFuY2VSb3RhdGlvbnMiLCJpbnN0YW5jZVRleHR1cmVJZHMiLCJBIiwiQyIsIkUiLCJHIiwiSCIsImdldE9mZnNldHMiLCJhZGRJbnN0YW5jZSIsInRleHR1cmVJZCIsImZhY2UiLCJTT1VUSCIsInNldFRleHR1cmVJbWFnZXMiLCJnZXRUZXh0dXJlSW1hZ2VzIiwidGV4dHVyZUltYWdlIiwiZ2V0SW5zdGFuY2VQb3NpdGlvbnMiLCJpbnN0YW5jZVBvc2l0aW9uIiwiZ2V0SW5zdGFuY2VSb3RhdGlvbnMiLCJpbnN0YW5jZVJvdGF0aW9uIiwiZ2V0SW5zdGFuY2VUZXh0dXJlSWRzIiwiaW5zdGFuY2VUZXh0dXJlSWQiLCJnZXRJbnN0YW5jZUNvdW50IiwiZ2V0VmVydGV4Q291bnQiLCJJbnN0YW5jZWRDdXN0b21NZXNoIiwidiIsInZuIiwidnQiLCJmIiwidmVydGV4Q291bnQiLCJuMSIsIm4yIiwibjMiLCJUT1AiLCJJbnN0YW5jZWRTcXVhcmUiLCJVTCIsIlVSIiwiTEwiLCJMUiIsImNsZWFyQ29sb3IiLCJyIiwiZyIsIlJlbmRlcmVyIiwiZGV2aWNlIiwiY29uZmlndXJlIiwiZm9ybWF0IiwibmF2aWdhdG9yIiwiZ3B1IiwiZ2V0UHJlZmVycmVkQ2FudmFzRm9ybWF0IiwiYWxwaGFNb2RlIiwiZGVwdGhUZXh0dXJlIiwiY3JlYXRlVGV4dHVyZSIsInNpemUiLCJjYW52YXMiLCJ1c2FnZSIsIkdQVVRleHR1cmVVc2FnZSIsIlJFTkRFUl9BVFRBQ0hNRU5UIiwic2hhZGVyTW9kdWxlIiwiY3JlYXRlU2hhZGVyTW9kdWxlIiwicGlwZWxpbmVEZXNjcmlwdG9yIiwibW9kdWxlIiwiZW50cnlQb2ludCIsImJ1ZmZlcnMiLCJhdHRyaWJ1dGVzIiwic2hhZGVyTG9jYXRpb24iLCJvZmZzZXQiLCJhcnJheVN0cmlkZSIsInN0ZXBNb2RlIiwiZnJhZ21lbnQiLCJ0YXJnZXRzIiwicHJpbWl0aXZlIiwidG9wb2xvZ3kiLCJjdWxsTW9kZSIsImxheW91dCIsImRlcHRoU3RlbmNpbCIsImRlcHRoV3JpdGVFbmFibGVkIiwiZGVwdGhDb21wYXJlIiwicmVuZGVyUGlwZWxpbmUiLCJjcmVhdGVSZW5kZXJQaXBlbGluZSIsInNhbXBsZXIiLCJjcmVhdGVTYW1wbGVyIiwibWFnRmlsdGVyIiwibWluRmlsdGVyIiwibnVtTGlnaHRzQnVmZmVyIiwiY3JlYXRlQnVmZmVyIiwiR1BVQnVmZmVyVXNhZ2UiLCJVTklGT1JNIiwiQ09QWV9EU1QiLCJsaWdodHNCdWZmZXIiLCJ2aWV3QnVmZmVyIiwicHJvamVjdGlvbkJ1ZmZlciIsImJpbmRpbmdzIiwiTWFwIiwicmVuZGVyIiwic2NlbmUiLCJjb21tYW5kRW5jb2RlciIsImNyZWF0ZUNvbW1hbmRFbmNvZGVyIiwibGlnaHRzIiwiZ2V0TGlnaHRzIiwibGlnaHRzRGF0YSIsIkZsb2F0MzJBcnJheSIsImZsYXRNYXAiLCJsaWdodCIsIm51bUxpZ2h0cyIsIlVpbnQzMkFycmF5IiwidmlldyIsInByb2plY3Rpb24iLCJxdWV1ZSIsIndyaXRlQnVmZmVyIiwiYmVnaW5SZW5kZXJQYXNzIiwiY29sb3JBdHRhY2htZW50cyIsImNsZWFyVmFsdWUiLCJsb2FkT3AiLCJzdG9yZU9wIiwiZ2V0Q3VycmVudFRleHR1cmUiLCJjcmVhdGVWaWV3IiwiZGVwdGhTdGVuY2lsQXR0YWNobWVudCIsImRlcHRoQ2xlYXJWYWx1ZSIsImRlcHRoTG9hZE9wIiwiZGVwdGhTdG9yZU9wIiwiZW5kIiwiZ2V0TWVzaGVzIiwibWVzaCIsImJpbmRpbmciLCJnZXQiLCJ0ZXh0dXJlV2lkdGgiLCJ0ZXh0dXJlSGVpZ2h0IiwidGV4dHVyZUNvdW50IiwidGV4dHVyZSIsIlRFWFRVUkVfQklORElORyIsInRleHR1cmVCdWZmZXIiLCJDT1BZX1NSQyIsIm1hcHBlZEF0Q3JlYXRpb24iLCJwaXhlbERhdGEiLCJVaW50OEFycmF5IiwiZ2V0TWFwcGVkUmFuZ2UiLCJpZHgiLCJzZXQiLCJkYXRhIiwidW5tYXAiLCJjb3B5QnVmZmVyVG9UZXh0dXJlIiwiYnVmZmVyIiwiYnl0ZXNQZXJSb3ciLCJyb3dzUGVySW1hZ2UiLCJkZXB0aE9yQXJyYXlMYXllcnMiLCJiaW5kR3JvdXAiLCJjcmVhdGVCaW5kR3JvdXAiLCJnZXRCaW5kR3JvdXBMYXlvdXQiLCJlbnRyaWVzIiwicmVzb3VyY2UiLCJvZmZzZXRzIiwib2Zmc2V0QnVmZmVyIiwiYnl0ZUxlbmd0aCIsIlZFUlRFWCIsIm5vcm1hbEJ1ZmZlciIsInBvc2l0aW9ucyIsInBvc2l0aW9uQnVmZmVyIiwicm90YXRpb25zIiwicm90YXRpb25CdWZmZXIiLCJ1dnMiLCJ1dkJ1ZmZlciIsInRleHR1cmVJZHMiLCJ0ZXh0dXJlSWRCdWZmZXIiLCJyZW5kZXJQYXNzIiwic2V0UGlwZWxpbmUiLCJzZXRCaW5kR3JvdXAiLCJzZXRWZXJ0ZXhCdWZmZXIiLCJkcmF3Iiwic3VibWl0IiwiZmluaXNoIiwiU2NlbmUiLCJtZXNoZXMiLCJhZGRNZXNoIiwiaW5kZXhPZiIsInJlbW92ZU1lc2giLCJzcGxpY2UiLCJhZGRMaWdodCIsInJlbW92ZUxpZ2h0IiwiYm9keSIsImFwcGVuZENoaWxkIiwiYWRhcHRlciIsInJlcXVlc3RBZGFwdGVyIiwicmVxdWVzdERldmljZSIsImluZm8iLCJyYW5kb21Db29yZCIsImZsb29yIiwicmFuZG9tIiwibWVzaDEiLCJtZXNoMiIsIm1lc2gzIiwib2JqIiwib2JqVXJsIiwib2JqZWN0cyIsIm1hdGVyaWFscyIsIk51bWJlciIsImZmIiwibG9hZE9iaiIsImNvbnNvbGUiLCJsb2ciLCJtZXNoNCIsIm10bCIsImZpbmQiLCJtYXRlcmlhbCIsInJlbmRlcmVyIiwia2V5Ym9hcmQiLCJkZWx0YVkiLCJ3aGVlbFpvb20iLCJyZXF1ZXN0SWQiLCJsYXN0VGltZXN0YW1wIiwidkxSIiwidlVEIiwidkZCIiwiZ2V0Q2FtVmVsIiwicHYiLCJjdiIsInN0ZXAiLCJ0aW1lc3RhbXAiLCJ0aW1lR2FwIiwidGV4dENvbnRlbnQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJwb2ludGVyTG9ja0VsZW1lbnQiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInBlcmZvcm1hbmNlIiwibm93IiwicmVxdWVzdFBvaW50ZXJMb2NrIl0sInNvdXJjZVJvb3QiOiIifQ==