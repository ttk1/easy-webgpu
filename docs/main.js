(()=>{"use strict";class e{constructor(e,t,n){if(this.m=e,this.n=t,null!=n){if(n.length!=e*t)throw new Error("サイズの不一致");this.matrix=[];for(let s=0;s<e;s++){this.matrix[s]=[];for(let r=0;r<t;r++)this.matrix[s][r]=n[s+e*r]}}else{this.matrix=[];for(let n=0;n<e;n++){this.matrix[n]=[];for(let e=0;e<t;e++)this.matrix[n][e]=0}}}setValue(e,t,n){if(e<0||e>=this.m||t<0||t>=this.n)throw new Error("範囲外");this.matrix[e][t]=n}getValue(e,t){if(e<0||e>=this.m||t<0||t>=this.n)throw new Error("範囲外");return this.matrix[e][t]}mul(t){if(this.n!=t.m)throw new Error("サイズの不一致");const n=new e(this.m,t.n);for(let e=0;e<this.m;e++)for(let s=0;s<t.n;s++){let r=0;for(let n=0;n<this.n;n++)r+=this.getValue(e,n)*t.getValue(n,s);n.setValue(e,s,r)}return n}toArray(){const e=[];for(let t=0;t<this.m;t++)for(let n=0;n<this.n;n++)e[t+this.m*n]=this.getValue(t,n);return e}}class t{constructor(e,t,n,s,r,i){this.position=e,this.rotation=t,this.fov=n,this.aspect=s,this.near=r,this.far=i}getRotateMatrix(){return new e(4,4,[1,0,0,0,0,Math.cos(this.rotation.x),Math.sin(this.rotation.x),0,0,-Math.sin(this.rotation.x),Math.cos(this.rotation.x),0,0,0,0,1]).mul(new e(4,4,[Math.cos(this.rotation.y),0,-Math.sin(this.rotation.y),0,0,1,0,0,Math.sin(this.rotation.y),0,Math.cos(this.rotation.y),0,0,0,0,1]))}getTranslateMatrix(){return new e(4,4,[1,0,0,0,0,1,0,0,0,0,1,0,-this.position.x,-this.position.y,-this.position.z,1])}getInvRotateMatrixForMove(){return new e(4,4,[Math.cos(-this.rotation.y),0,-Math.sin(-this.rotation.y),0,0,1,0,0,Math.sin(-this.rotation.y),0,Math.cos(-this.rotation.y),0,0,0,0,1])}move(t){const n=this.getInvRotateMatrixForMove().mul(new e(4,1,[t.x,t.y,t.z,0]));this.position.x+=n.getValue(0,0),this.position.y+=n.getValue(1,0),this.position.z+=n.getValue(2,0)}rotate(e){this.rotation.x=Math.min(Math.max(this.rotation.x+e.x,-Math.PI/2),Math.PI/2),this.rotation.y=(this.rotation.y+e.y)%(2*Math.PI)}getViewMatrix(){return this.getRotateMatrix().mul(this.getTranslateMatrix())}getProjectionMatrix(){return new e(4,4,[1/(this.aspect*Math.tan(this.fov/2)),0,0,0,0,1/Math.tan(this.fov/2),0,0,0,0,-(this.far+this.near)/(this.far-this.near),-1,0,0,-2*this.far*this.near/(this.far-this.near),0])}}class n{constructor(e,t){this.x=e,this.y=t}toArray(){return[this.x,this.y]}}class s{constructor(e,t,n){this.x=e,this.y=t,this.z=n}toArray(){return[this.x,this.y,this.z]}}const r="KeyA",i="KeyD",a="KeyW",o="KeyS",h="Space",u="ShiftLeft";class c{constructor(e){this.L=0,this.R=0,this.F=0,this.B=0,this.U=0,this.D=0,e.addEventListener("keydown",(e=>{switch(e.code){case r:this.L=1;break;case i:this.R=1;break;case a:this.F=1;break;case o:this.B=1;break;case h:this.U=1;break;case u:this.D=1}}),!1),e.addEventListener("keyup",(e=>{switch(e.code){case r:this.L=0;break;case i:this.R=0;break;case a:this.F=0;break;case o:this.B=0;break;case h:this.U=0;break;case u:this.D=0}}),!1)}getLR(){return this.R-this.L}getUD(){return this.U-this.D}getFB(){return this.B-this.F}}class d{constructor(e,t,n){this.lastMovementX=0,this.lastMovementY=0,this.sensitivity=.003,this.sensitivity=n||.003,e.addEventListener("mousemove",(e=>{Math.abs(this.lastMovementX)<15&&Math.abs(e.movementX)>50||Math.abs(this.lastMovementY)<15&&Math.abs(e.movementY)>50||(this.lastMovementX=e.movementX,this.lastMovementY=e.movementY,t.rotate(new s(e.movementY*this.sensitivity,e.movementX*this.sensitivity,0)))}),!1)}}class f{constructor(e,t,n){this.x=e,this.y=t,this.z=n}getX(){return this.x}getY(){return this.y}getZ(){return this.z}}function l(e){return new Promise(((t,n)=>{const s=new Image;s.onload=()=>{const e=document.createElement("canvas"),n=64*Math.ceil(s.width/64);e.width=n,e.height=s.height;const r=e.getContext("2d");if(null==r)throw new Error("画像の読み込みに失敗しました");r.drawImage(s,0,0,n,s.height),t(r.getImageData(0,0,n,s.height))},s.onerror=e=>n(e),s.src=e}))}function g(e){return fetch(e).then((e=>e.text()))}function m(e){const t=[];return e.replace(/\r/g,"").split("\n").forEach((e=>{""!=(e=e.replace(/\s+/g," ").replace(/(^\s|\s$)/g,""))&&(e.startsWith("#")||t.push(e))})),t}var p,v=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{h(s.next(e))}catch(e){i(e)}}function o(e){try{h(s.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};function x(e){return v(this,void 0,void 0,(function*(){const t=m(yield g(e)),n=[];let s=null,r=null;for(let i=0;i<t.length;i++){const a=t[i].split(" ");"newmtl"==a[0]?(null!=s&&null!=r&&n.push({name:s,mapKd:r}),s=a[1],r=null):"map_Kd"==a[0]&&(r=e.replace(/\/[^/]*$/,"/"+a[1]))}return n.push({name:s,mapKd:r}),n}))}!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.SOUTH=2]="SOUTH",e[e.NORTH=3]="NORTH",e[e.EAST=4]="EAST",e[e.WEST=5]="WEST"}(p||(p={}));class w{constructor(){this.vertices=[],this.normals=[],this.uvCoords=[]}addFace(e,t){if(null==e||e.length<3)throw new Error("頂点が３つ以上必要です");if(null!=t&&e.length!=t.length)throw new Error("頂点の数と UV 座標の数が一致しません");for(let s=1;s<e.length-1;s++)null!=t?this.addTriangle(e[0],e[s],e[s+1],t[0],t[s],t[s+1]):this.addTriangle(e[0],e[s],e[s+1],new n(0,0),new n(0,0),new n(0,0))}addTriangle(e,t,n,s,r,i){const a=this.getSurfaceNormal(e,t,n);this.addVertex(e),this.addUVCoord(s),this.addNormal(a),this.addVertex(t),this.addUVCoord(r),this.addNormal(a),this.addVertex(n),this.addUVCoord(i),this.addNormal(a)}getSurfaceNormal(e,t,n){const r=new s(t.x-e.x,t.y-e.y,t.z-e.z),i=new s(n.x-e.x,n.y-e.y,n.z-e.z);return new s(r.y*i.z-r.z*i.y,r.z*i.x-r.x*i.z,r.x*i.y-r.y*i.x)}addNormal(e){this.normals.push(e.x,e.y,e.z)}addVertex(e){this.vertices.push(e.x,e.y,e.z)}addUVCoord(e){this.uvCoords.push(e.x,e.y)}getVertices(){return this.vertices}getNormals(){return this.normals}getUVCoords(){return this.uvCoords}}class y extends w{constructor(){super(),this.textureImages=[],this.instancePositions=[],this.instanceRotations=[],this.instanceTextureIds=[];const e=new s(-.5,.5,.5),t=new s(-.5,.5,-.5),r=new s(.5,.5,-.5),i=new s(.5,.5,.5),a=new s(-.5,-.5,.5),o=new s(-.5,-.5,-.5),h=new s(.5,-.5,-.5),u=new s(.5,-.5,.5);this.addFace([e,i,r,t],[new n(1/4,1/3),new n(.5,1/3),new n(.5,0),new n(1/4,0)]),this.addFace([a,o,h,u],[new n(1/4,2/3),new n(1/4,1),new n(.5,1),new n(.5,2/3)]),this.addFace([e,t,o,a],[new n(1/4,1/3),new n(0,1/3),new n(0,2/3),new n(1/4,2/3)]),this.addFace([i,u,h,r],[new n(.5,1/3),new n(.5,2/3),new n(3/4,2/3),new n(3/4,1/3)]),this.addFace([e,a,u,i],[new n(1/4,1/3),new n(1/4,2/3),new n(.5,2/3),new n(.5,1/3)]),this.addFace([t,r,h,o],[new n(1,1/3),new n(3/4,1/3),new n(3/4,2/3),new n(1,2/3)])}getOffsets(){return this.getVertices()}addInstance(e,t,n=p.SOUTH){this.instancePositions.push(e),this.instanceTextureIds.push(t),this.instanceRotations.push(n)}setTextureImages(e){this.textureImages=e}getTextureImages(){const e=[];return this.textureImages.forEach((t=>{e.push(t)})),e}getInstancePositions(){const e=[];return this.instancePositions.forEach((t=>{e.push(...t.toArray())})),e}getInstanceRotations(){const e=[];return this.instanceRotations.forEach((t=>{e.push(t)})),e}getInstanceTextureIds(){const e=[];return this.instanceTextureIds.forEach((t=>{e.push(t)})),e}getInstanceCount(){return this.instancePositions.length}getVertexCount(){return this.getVertices().length/3}}class T{constructor(e,t,r,i){this.v=[],this.vn=[],this.vt=[],this.f=[],this.v=e,this.vn=t,this.vt=r,this.f=i,this.vertices=[],this.normals=[],this.uvCoords=[],this.textureImages=[],this.vertexCount=0,this.f.forEach((e=>{const t=[],r=[],i=[];e.forEach((e=>{const a=this.v[e[0]-1];t.push(new s(a[0],a[1],a[2]));const o=this.vt[e[1]-1];i.push(new n(o[0],o[1]));const h=this.vn[e[2]-1];r.push(new s(h[0],h[1],h[2]))})),this.addFace(t,i,r)}))}addFace(e,t,n){for(let s=1;s<e.length-1;s++)this.addTriangle(e[0],e[s],e[s+1],n[0],n[s],n[s+1],t[0],t[s],t[s+1])}addTriangle(e,t,n,s,r,i,a,o,h){this.addVertex(e),this.addNormal(s),this.addUVCoord(a),this.addVertex(t),this.addNormal(r),this.addUVCoord(o),this.addVertex(n),this.addNormal(i),this.addUVCoord(h),this.vertexCount+=3}addVertex(e){this.vertices.push(e.x,e.y,e.z)}addNormal(e){this.normals.push(e.x,e.y,e.z)}addUVCoord(e){this.uvCoords.push(e.x,1-e.y)}getVertices(){return this.vertices}getNormals(){return this.normals}getUVCoords(){return this.uvCoords}getOffsets(){return this.getVertices()}setTextureImages(e){this.textureImages=e}getTextureImages(){const e=[];return this.textureImages.forEach((t=>{e.push(t)})),e}getInstancePositions(){return[0,20,0]}getInstanceRotations(){return[p.TOP]}getInstanceTextureIds(){return[0]}getInstanceCount(){return 1}getVertexCount(){return this.vertexCount}}class M extends w{constructor(){super(),this.textureImages=[],this.instancePositions=[],this.instanceRotations=[],this.instanceTextureIds=[];const e=new s(-.5,.5,.5),t=new s(.5,.5,.5),r=new s(.5,-.5,.5),i=new s(-.5,-.5,.5),a=new n(0,0),o=new n(1,0),h=new n(0,1),u=new n(1,1);this.addFace([e,i,r,t],[a,h,u,o])}getOffsets(){return this.getVertices()}addInstance(e,t,n=p.SOUTH){this.instancePositions.push(e),this.instanceTextureIds.push(t),this.instanceRotations.push(n)}setTextureImages(e){this.textureImages=e}getTextureImages(){const e=[];return this.textureImages.forEach((t=>{e.push(t)})),e}getInstancePositions(){const e=[];return this.instancePositions.forEach((t=>{e.push(...t.toArray())})),e}getInstanceRotations(){const e=[];return this.instanceRotations.forEach((t=>{e.push(t)})),e}getInstanceTextureIds(){const e=[];return this.instanceTextureIds.forEach((t=>{e.push(t)})),e}getInstanceCount(){return this.instancePositions.length}getVertexCount(){return this.getVertices().length/3}}const b={r:0,g:0,b:0,a:1};class P{constructor(e,t){this.ctx=e,this.device=t,e.configure({device:t,format:navigator.gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),this.depthTexture=t.createTexture({size:[e.canvas.width,e.canvas.height],format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT});const n=t.createShaderModule({code:"\nstruct VertexOut {\n  @builtin(position) position : vec4f,\n  @location(0) diffuse: f32,\n  @location(1) @interpolate(flat) textureId: u32,\n  @location(2) uv : vec2f\n}\n\n@group(0) @binding(0) var<uniform> numLights: u32;\n@group(0) @binding(1) var<uniform> lights: array<vec3f, 20>;\n@group(0) @binding(2) var<uniform> view: mat4x4f;\n@group(0) @binding(3) var<uniform> projection: mat4x4f;\n@group(0) @binding(4) var mySampler: sampler;\n@group(0) @binding(5) var myTexture: texture_2d_array<f32>;\n\nvar<private> model = array<mat4x4f, 6>(\n  // T = (-pi/2, 0)\n  mat4x4f(1.0, 0.0, 0.0, 0.0,\n      0.0, 0.0, -1.0, 0.0,\n      0.0, 1.0, 0.0, 0.0,\n      0.0, 0.0, 0.0, 1.0),\n  // B = (pi/2, 0)\n  mat4x4f(1.0, 0.0, 0.0, 0.0,\n      0.0, 0.0, 1.0, 0.0,\n      0.0, -1.0, 0.0, 0.0,\n      0.0, 0.0, 0.0, 1.0),\n  // S = (0, 0)\n  mat4x4f(1.0, 0.0, 0.0, 0.0,\n      0.0, 1.0, 0.0, 0.0,\n      0.0, 0.0, 1.0, 0.0,\n      0.0, 0.0, 0.0, 1.0),\n  // N = (0, pi)\n  mat4x4f(-1.0, 0.0, 0.0, 0.0,\n      0.0, 1.0, 0.0, 0.0,\n      0.0, 0.0, -1.0, 0.0,\n      0.0, 0.0, 0.0, 1.0),\n  // E = (0, pi/2)\n  mat4x4f(0.0, 0.0, -1.0, 0.0,\n      0.0, 1.0, 0.0, 0.0,\n      1.0, 0.0, 0.0, 0.0,\n      0.0, 0.0, 0.0, 1.0),\n  // W = (0, -pi/2)\n  mat4x4f(0.0, 0.0, 1.0, 0.0,\n      0.0, 1.0, 0.0, 0.0,\n      -1.0, 0.0, 0.0, 0.0,\n      0.0, 0.0, 0.0, 1.0)\n);\n\n// TODO: 後で uniform で渡せるようにする\nvar<private> scale = mat4x4f(\n  1.0, 0.0, 0.0, 0.0,\n  0.0, 1.0, 0.0, 0.0,\n  0.0, 0.0, 1.0, 0.0,\n  0.0, 0.0, 0.0, 1.0\n);\n\n@vertex\nfn vertex_main(\n  @location(0) offset: vec3f,\n  @location(1) normal: vec3f,\n  @location(2) position: vec3f,\n  @location(3) rotation: u32,\n  @location(4) uv: vec2f,\n  @location(5) textureId: u32\n) -> VertexOut {\n  var out: VertexOut;\n  out.position = projection * view * (vec4f(position, 1.0) + scale * model[rotation] * vec4f(offset, 1.0));\n\n  // ライティング\n  // TODO: 環境光によるライティング\n  var diffuse = 0.0;\n  for (var i = 0u; i < numLights; i++) {\n    diffuse += max(0.0, - dot(model[rotation] * vec4f(normalize(normal), 0.0), vec4f(normalize(lights[i]), 0.0)));\n  }\n  out.diffuse = diffuse;\n\n  out.textureId = textureId;\n  out.uv = uv;\n  return out;\n}\n\n@fragment\nfn fragment_main(fragData: VertexOut) -> @location(0) vec4f {\n  return vec4f(fragData.diffuse * textureSample(myTexture, mySampler, fragData.uv, fragData.textureId).rgb, 1.0);\n}\n"}),s={vertex:{module:n,entryPoint:"vertex_main",buffers:[{attributes:[{shaderLocation:0,offset:0,format:"float32x3"}],arrayStride:12,stepMode:"vertex"},{attributes:[{shaderLocation:1,offset:0,format:"float32x3"}],arrayStride:12,stepMode:"vertex"},{attributes:[{shaderLocation:2,offset:0,format:"float32x3"}],arrayStride:12,stepMode:"instance"},{attributes:[{shaderLocation:3,offset:0,format:"uint32"}],arrayStride:4,stepMode:"instance"},{attributes:[{shaderLocation:4,offset:0,format:"float32x2"}],arrayStride:8,stepMode:"vertex"},{attributes:[{shaderLocation:5,offset:0,format:"uint32"}],arrayStride:4,stepMode:"instance"}]},fragment:{module:n,entryPoint:"fragment_main",targets:[{format:navigator.gpu.getPreferredCanvasFormat()}]},primitive:{topology:"triangle-list",cullMode:"back"},layout:"auto",depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus"}};this.renderPipeline=t.createRenderPipeline(s),this.sampler=t.createSampler({magFilter:"linear",minFilter:"linear"}),this.numLightsBuffer=this.device.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.lightsBuffer=this.device.createBuffer({size:320,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.viewBuffer=this.device.createBuffer({size:64,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.projectionBuffer=this.device.createBuffer({size:64,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.bindings=new Map}render(e,t){const n=this.device.createCommandEncoder(),s=e.getLights(),r=new Float32Array(s.flatMap((e=>[e.getX(),e.getY(),e.getZ(),0]))),i=new Uint32Array([s.length]),a=new Float32Array(t.getViewMatrix().toArray()),o=new Float32Array(t.getProjectionMatrix().toArray());this.device.queue.writeBuffer(this.numLightsBuffer,0,i,0,i.length),this.device.queue.writeBuffer(this.lightsBuffer,0,r,0,r.length),this.device.queue.writeBuffer(this.viewBuffer,0,a,0,a.length),this.device.queue.writeBuffer(this.projectionBuffer,0,o,0,o.length),n.beginRenderPass({colorAttachments:[{clearValue:b,loadOp:"clear",storeOp:"store",view:this.ctx.getCurrentTexture().createView()}],depthStencilAttachment:{view:this.depthTexture.createView(),depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store"}}).end(),e.getMeshes().forEach((e=>{let t=this.bindings.get(e);if(null==t){const s=e.getTextureImages(),r=s[0].width,i=s[0].height,a=s.length,o=this.device.createTexture({size:[r,i,Math.max(a,2)],format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT}),h=this.device.createBuffer({size:r*i*a*4,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),u=new Uint8Array(h.getMappedRange());s.forEach(((e,t)=>{u.set(e.data,r*i*t*4)})),h.unmap(),n.copyBufferToTexture({buffer:h,bytesPerRow:4*r,rowsPerImage:i},{texture:o},{width:r,height:i,depthOrArrayLayers:a});const c=this.device.createBindGroup({layout:this.renderPipeline.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this.numLightsBuffer}},{binding:1,resource:{buffer:this.lightsBuffer}},{binding:2,resource:{buffer:this.viewBuffer}},{binding:3,resource:{buffer:this.projectionBuffer}},{binding:4,resource:this.sampler},{binding:5,resource:o.createView()}]}),d=new Float32Array(e.getOffsets()),f=this.device.createBuffer({size:d.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});this.device.queue.writeBuffer(f,0,d,0,d.length);const l=new Float32Array(e.getNormals()),g=this.device.createBuffer({size:l.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});this.device.queue.writeBuffer(g,0,l,0,l.length);const m=new Float32Array(e.getInstancePositions()),p=this.device.createBuffer({size:m.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});this.device.queue.writeBuffer(p,0,m,0,m.length);const v=new Uint32Array(e.getInstanceRotations()),x=this.device.createBuffer({size:v.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});this.device.queue.writeBuffer(x,0,v,0,v.length);const w=new Float32Array(e.getUVCoords()),y=this.device.createBuffer({size:w.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});this.device.queue.writeBuffer(y,0,w,0,w.length);const T=new Uint32Array(e.getInstanceTextureIds()),M=this.device.createBuffer({size:T.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});this.device.queue.writeBuffer(M,0,T,0,T.length),t={bindGroup:c,offsets:f,normals:g,positions:p,rotations:x,uvs:y,textureIds:M},this.bindings.set(e,t)}const s=n.beginRenderPass({colorAttachments:[{loadOp:"load",storeOp:"store",view:this.ctx.getCurrentTexture().createView()}],depthStencilAttachment:{view:this.depthTexture.createView(),depthLoadOp:"load",depthStoreOp:"store"}});s.setPipeline(this.renderPipeline),s.setBindGroup(0,t.bindGroup),s.setVertexBuffer(0,t.offsets),s.setVertexBuffer(1,t.normals),s.setVertexBuffer(2,t.positions),s.setVertexBuffer(3,t.rotations),s.setVertexBuffer(4,t.uvs),s.setVertexBuffer(5,t.textureIds),s.draw(e.getVertexCount(),e.getInstanceCount()),s.end()})),this.device.queue.submit([n.finish()])}}class U{constructor(e,t){this.meshes=null!=e?e:[],this.lights=null!=t?t:[]}getLights(){return this.lights}getMeshes(){return this.meshes}addMesh(e){this.meshes.indexOf(e)<0&&this.meshes.push(e)}removeMesh(e){const t=this.meshes.indexOf(e);t>=0&&this.meshes.splice(t,1)}addLight(e){this.lights.indexOf(e)<0&&this.lights.push(e)}removeLight(e){const t=this.lights.indexOf(e);t>=0&&this.lights.splice(t,1)}}var I=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{h(s.next(e))}catch(e){i(e)}}function o(e){try{h(s.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};window.onload=()=>I(void 0,void 0,void 0,(function*(){const e=document.body.appendChild(document.createElement("canvas"));e.width=1e3,e.height=500;const n=e.getContext("webgpu");if(null==n)return;const r=yield navigator.gpu.requestAdapter();if(null==r)return;const i=yield r.requestDevice(),a=document.body.appendChild(document.createElement("pre")),o=new t(new s(0,0,10),new s(0,0,0),70/180*Math.PI,e.width/e.height,.5,100),h=new U;function u(){return Math.floor(10*Math.random())}h.addLight(new f(1,2,3)),h.addLight(new f(-1,-2,-3));const p=new y;p.setTextureImages([yield l("./texture/dice.png")]),h.addMesh(p);for(let e=0;e<100;e++)p.addInstance(new s(u(),u(),u()),0,Math.floor(6*Math.random()));const w=new y;w.setTextureImages([yield l("./texture/dice2.png")]),h.addMesh(w);for(let e=0;e<100;e++)w.addInstance(new s(u()+10,u()+10,u()+10),0);const b=new M;b.setTextureImages([yield l("./texture/white.png"),yield l("./texture/yellow.png")]),h.addMesh(b);for(let e=0;e<100;e++)b.addInstance(new s(u()-10,u()-10,u()-10),Math.floor(2*Math.random()),Math.floor(6*Math.random()));const B=yield function(e){return v(this,void 0,void 0,(function*(){const t=m(yield g(e)),n=[],s=[],r=[],i=[],a=[];let o=[],h=null;for(let u=0;u<t.length;u++){const c=t[u].split(" ");if("usemtl"==c[0])null!=h&&i.push({f:o,mtlName:h}),o=[],h=c[1];else if("v"==c[0])n.push([Number(c[1]),Number(c[2]),Number(c[3])]);else if("vn"==c[0])s.push([Number(c[1]),Number(c[2]),Number(c[3])]);else if("vt"==c[0])r.push([Number(c[1]),Number(c[2]),Number(c[3])]);else if("f"==c[0]){const e=[];o.push(e);for(let t=1;t<c.length;t++){const n=c[t].split("/");e.push([Number(n[0]),Number(n[1]),Number(n[2])])}}else"mtllib"==c[0]&&a.push(...yield x(e.replace(/\/[^/]*$/,"/"+c[1])))}return i.push({f:o,mtlName:h}),{v:n,vn:s,vt:r,objects:i,materials:a}}))}("./obj/example.obj");for(let e=0;e<B.objects.length;e++){const t=new T(B.v,B.vn,B.vt,B.objects[e].f),n=B.materials.find((t=>t.name==B.objects[e].mtlName));null!=n&&null!=n.mapKd&&t.setTextureImages([yield l(n.mapKd)]),h.addMesh(t)}const V=new P(n,i),E=new c(window);new d(window,o),function(e){window.addEventListener("wheel",(t=>{e.fov=Math.max(30/180*Math.PI,Math.min(110/180*Math.PI,e.fov+.001*t.deltaY))}),!1)}(o);let C=null,O=0,R=0,S=0,L=0;function N(e,t){return 0==t||e*t<0?0:e<=-1||e>=1?e:e+.05*t}const F=e=>I(void 0,void 0,void 0,(function*(){const t=e-(O||e);O=e,R=N(R,E.getLR()),S=N(S,E.getUD()),L=N(L,E.getFB()),o.move(new s(R*t/50,S*t/50,L*t/50)),V.render(h,o),a.textContent=`FPS: ${1/t*1e3}\ncameraPosX: ${o.position.x}\ncameraPosY: ${o.position.y}\ncameraPosZ: ${o.position.z}\ncameraRotX: ${o.rotation.x}\ncameraRotY: ${o.rotation.y}\ncameraRotZ: ${o.rotation.z}\ncameraFov: ${o.fov}`,C=requestAnimationFrame(F)}));document.addEventListener("pointerlockchange",(()=>{null==document.pointerLockElement?null!=C&&cancelAnimationFrame(C):(O=performance.now(),C=requestAnimationFrame(F))}),!1),document.addEventListener("click",(()=>{document.body.requestPointerLock()}),!1)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFlBQVlDLE1BQzVCaEIsRUFBWVksc0JBQXNCSixHLElBRW5DLEdBQ0hsUixTQUFTM0IsaUJBQWlCLFNBQVMsS0FDakMyQixTQUFTK08sS0FBSzRDLG9CQUFvQixJQUNqQyxFQUNMLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AdHRrMS9lYXN5LXdlYmdwdS8uL3NyYy9tYXRyaXgudHMiLCJ3ZWJwYWNrOi8vQHR0azEvZWFzeS13ZWJncHUvLi9zcmMvY2FtZXJhLnRzIiwid2VicGFjazovL0B0dGsxL2Vhc3ktd2ViZ3B1Ly4vc3JjL3ZlY3Rvci50cyIsIndlYnBhY2s6Ly9AdHRrMS9lYXN5LXdlYmdwdS8uL3NyYy9pbnB1dC50cyIsIndlYnBhY2s6Ly9AdHRrMS9lYXN5LXdlYmdwdS8uL3NyYy9saWdodC50cyIsIndlYnBhY2s6Ly9AdHRrMS9lYXN5LXdlYmdwdS8uL3NyYy91dGlsLnRzIiwid2VicGFjazovL0B0dGsxL2Vhc3ktd2ViZ3B1Ly4vc3JjL2ZhY2UudHMiLCJ3ZWJwYWNrOi8vQHR0azEvZWFzeS13ZWJncHUvLi9zcmMvbG9hZGVyLnRzIiwid2VicGFjazovL0B0dGsxL2Vhc3ktd2ViZ3B1Ly4vc3JjL2dlb21ldHJ5QmFzZS50cyIsIndlYnBhY2s6Ly9AdHRrMS9lYXN5LXdlYmdwdS8uL3NyYy9tZXNoL2luc3RhbmNlZEN1YmUudHMiLCJ3ZWJwYWNrOi8vQHR0azEvZWFzeS13ZWJncHUvLi9zcmMvbWVzaC9pbnN0YW5jZWRDdXN0b21NZXNoLnRzIiwid2VicGFjazovL0B0dGsxL2Vhc3ktd2ViZ3B1Ly4vc3JjL21lc2gvaW5zdGFuY2VkU3F1YXJlLnRzIiwid2VicGFjazovL0B0dGsxL2Vhc3ktd2ViZ3B1Ly4vc3JjL3NoYWRlci53Z3NsLnRzIiwid2VicGFjazovL0B0dGsxL2Vhc3ktd2ViZ3B1Ly4vc3JjL3JlbmRlcmVyLnRzIiwid2VicGFjazovL0B0dGsxL2Vhc3ktd2ViZ3B1Ly4vc3JjL3NjZW5lLnRzIiwid2VicGFjazovL0B0dGsxL2Vhc3ktd2ViZ3B1Ly4vc3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIE1hdHJpeCB7XG4gIHB1YmxpYyBtOiBudW1iZXI7XG4gIHB1YmxpYyBuOiBudW1iZXI7XG4gIHByaXZhdGUgbWF0cml4OiBudW1iZXJbXVtdO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihtOiBudW1iZXIsIG46IG51bWJlcik7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihtOiBudW1iZXIsIG46IG51bWJlciwgYXJyOiBudW1iZXJbXSk7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihtOiBudW1iZXIsIG46IG51bWJlciwgYXJyPzogbnVtYmVyW10pIHtcbiAgICB0aGlzLm0gPSBtO1xuICAgIHRoaXMubiA9IG47XG5cbiAgICBpZiAoYXJyICE9IG51bGwpIHtcbiAgICAgIC8vIGFyciDjgYzkuI7jgYjjgonjgozjgabjgYTjgZ/jgonjgIFhcnIg44Gn5Yid5pyf5YyW44GZ44KLXG4gICAgICBpZiAoYXJyLmxlbmd0aCAhPSBtICogbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+OCteOCpOOCuuOBruS4jeS4gOiHtCcpO1xuICAgICAgfVxuICAgICAgdGhpcy5tYXRyaXggPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbTsgaSsrKSB7XG4gICAgICAgIHRoaXMubWF0cml4W2ldID0gW107XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbjsgaisrKSB7XG4gICAgICAgICAgdGhpcy5tYXRyaXhbaV1bal0gPSBhcnJbaSArIG0gKiBqXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hdHJpeCA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtOyBpKyspIHtcbiAgICAgICAgdGhpcy5tYXRyaXhbaV0gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBuOyBqKyspIHtcbiAgICAgICAgICB0aGlzLm1hdHJpeFtpXVtqXSA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0VmFsdWUoaTogbnVtYmVyLCBqOiBudW1iZXIsIHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoaSA8IDAgfHwgaSA+PSB0aGlzLm0gfHwgaiA8IDAgfHwgaiA+PSB0aGlzLm4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign56+E5Zuy5aSWJyk7XG4gICAgfVxuICAgIHRoaXMubWF0cml4W2ldW2pdID0gdmFsdWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0VmFsdWUoaTogbnVtYmVyLCBqOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmIChpIDwgMCB8fCBpID49IHRoaXMubSB8fCBqIDwgMCB8fCBqID49IHRoaXMubikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfnr4Tlm7LlpJYnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubWF0cml4W2ldW2pdO1xuICB9XG5cbiAgLyoqXG4gICAqIOOBk+OBruihjOWIl+OBqyBtYXQg44KS5Y+z44GL44KJ5LmX566X44GX44Gf44KC44Gu44KS6L+U44GZXG4gICAqIEBwYXJhbSBtYXRcbiAgICogQHJldHVybnMg44GT44Gu6KGM5YiX44GrbWF044KS5Y+z44GL44KJ5LmX566X44GX44Gf57WQ5p6cXG4gICAqL1xuICBwdWJsaWMgbXVsKG1hdDogTWF0cml4KTogTWF0cml4IHtcbiAgICBpZiAodGhpcy5uICE9IG1hdC5tKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+OCteOCpOOCuuOBruS4jeS4gOiHtCcpO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld01hdCA9IG5ldyBNYXRyaXgodGhpcy5tLCBtYXQubik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm07IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtYXQubjsgaisrKSB7XG4gICAgICAgIGxldCBzdW0gPSAwO1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMubjsgaysrKSB7XG4gICAgICAgICAgc3VtICs9IHRoaXMuZ2V0VmFsdWUoaSwgaykgKiBtYXQuZ2V0VmFsdWUoaywgaik7XG4gICAgICAgIH1cbiAgICAgICAgbmV3TWF0LnNldFZhbHVlKGksIGosIHN1bSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXdNYXQ7XG4gIH1cblxuICBwdWJsaWMgdG9BcnJheSgpOiBudW1iZXJbXSB7XG4gICAgY29uc3QgYXJyID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm07IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLm47IGorKykge1xuICAgICAgICBhcnJbaSArIHRoaXMubSAqIGpdID0gdGhpcy5nZXRWYWx1ZShpLCBqKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTWF0cml4IH0gZnJvbSAnLi9tYXRyaXgnO1xuaW1wb3J0IHsgVmVjMyB9IGZyb20gJy4vdmVjdG9yJztcblxuZXhwb3J0IGludGVyZmFjZSBDYW1lcmEge1xuICBwb3NpdGlvbjogVmVjMztcbiAgcm90YXRpb246IFZlYzM7XG4gIG1vdmUobW90aW9uOiBWZWMzKTogdm9pZDtcbiAgcm90YXRlKHJvdGF0aW9uOiBWZWMzKTogdm9pZDtcbiAgZ2V0Vmlld01hdHJpeCgpOiBNYXRyaXg7XG4gIGdldFByb2plY3Rpb25NYXRyaXgoKTogTWF0cml4O1xufVxuXG4vKipcbiAqIOmAj+imluaKleW9seOCq+ODoeODqVxuICovXG5leHBvcnQgY2xhc3MgUGVyc3BlY3RpdmVDYW1lcmEgaW1wbGVtZW50cyBDYW1lcmEge1xuICBwdWJsaWMgcG9zaXRpb246IFZlYzM7XG4gIHB1YmxpYyByb3RhdGlvbjogVmVjMztcbiAgcHVibGljIGZvdjogbnVtYmVyO1xuICBwdWJsaWMgYXNwZWN0OiBudW1iZXI7XG4gIHB1YmxpYyBuZWFyOiBudW1iZXI7XG4gIHB1YmxpYyBmYXI6IG51bWJlcjtcblxuICAvKipcbiAgICogQHBhcmFtIHBvdGl0aW9uIOOCq+ODoeODqeOBruS9jee9rlxuICAgKiBAcGFyYW0gcm90YXRpb24g44Kr44Oh44Op5rOo6KaW54K544O75Zue6Lui77yI44Kq44Kk44Op44O86KeS77yJLCBYIC0+IFkg44Gu6aCG44Gr5Zue6Lui77yI5LiA5pemWuOBr+eEoeimluOBmeOCi+OCiOOBhuOBq+OBl+OBpuOCi++8iVxuICAgKiBAcGFyYW0gZm92IOimlumHjuinkiwg5Y2Y5L2N44Gv44Op44K444Ki44OzXG4gICAqIEBwYXJhbSBhc3BlY3Qg55S76Z2i44Gu57im5qiq5q+ULCB3L2hcbiAgICogQHBhcmFtIG5lYXIgbmVhciBwbGFuZeOBvuOBp+OBrui3nembolxuICAgKiBAcGFyYW0gZmFyIGZhciBwbGFuZeOBvuOBp+OBrui3nembolxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKHBvdGl0aW9uOiBWZWMzLCByb3RhdGlvbjogVmVjMywgZm92OiBudW1iZXIsIGFzcGVjdDogbnVtYmVyLCBuZWFyOiBudW1iZXIsIGZhcjogbnVtYmVyKSB7XG4gICAgdGhpcy5wb3NpdGlvbiA9IHBvdGl0aW9uO1xuICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcbiAgICB0aGlzLmZvdiA9IGZvdjtcbiAgICB0aGlzLmFzcGVjdCA9IGFzcGVjdDtcbiAgICB0aGlzLm5lYXIgPSBuZWFyO1xuICAgIHRoaXMuZmFyID0gZmFyO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRSb3RhdGVNYXRyaXgoKTogTWF0cml4IHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeCg0LCA0LCBbXG4gICAgICAxLCAwLCAwLCAwLFxuICAgICAgMCwgTWF0aC5jb3ModGhpcy5yb3RhdGlvbi54KSwgTWF0aC5zaW4odGhpcy5yb3RhdGlvbi54KSwgMCxcbiAgICAgIDAsIC0gTWF0aC5zaW4odGhpcy5yb3RhdGlvbi54KSwgTWF0aC5jb3ModGhpcy5yb3RhdGlvbi54KSwgMCxcbiAgICAgIDAsIDAsIDAsIDFcbiAgICBdKS5tdWwobmV3IE1hdHJpeCg0LCA0LCBbXG4gICAgICBNYXRoLmNvcyh0aGlzLnJvdGF0aW9uLnkpLCAwLCAtIE1hdGguc2luKHRoaXMucm90YXRpb24ueSksIDAsXG4gICAgICAwLCAxLCAwLCAwLFxuICAgICAgTWF0aC5zaW4odGhpcy5yb3RhdGlvbi55KSwgMCwgTWF0aC5jb3ModGhpcy5yb3RhdGlvbi55KSwgMCxcbiAgICAgIDAsIDAsIDAsIDFcbiAgICBdKSk7XG4gIH1cblxuICBwcml2YXRlIGdldFRyYW5zbGF0ZU1hdHJpeCgpOiBNYXRyaXgge1xuICAgIHJldHVybiBuZXcgTWF0cml4KDQsIDQsIFtcbiAgICAgIDEsIDAsIDAsIDAsXG4gICAgICAwLCAxLCAwLCAwLFxuICAgICAgMCwgMCwgMSwgMCxcbiAgICAgIC0gdGhpcy5wb3NpdGlvbi54LCAtIHRoaXMucG9zaXRpb24ueSwgLSB0aGlzLnBvc2l0aW9uLnosIDFcbiAgICBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnp7vli5XmmYLjgavoppbngrnjga7pq5jjgZXjgavplqLjgo/jgonjgZrmsLTlubPmlrnlkJHjgbjnp7vli5XjgZfjgZ/jgYTjga7jgafjgIFcbiAgICogeCDmlrnlkJHjga7lm57ou6LvvIjjg5Tjg4Pjg4HvvInjga8gMCDjgafoqIjnrpfjgZnjgotcbiAgICovXG4gIHByaXZhdGUgZ2V0SW52Um90YXRlTWF0cml4Rm9yTW92ZSgpOiBNYXRyaXgge1xuICAgIHJldHVybiBuZXcgTWF0cml4KDQsIDQsIFtcbiAgICAgIE1hdGguY29zKC0gdGhpcy5yb3RhdGlvbi55KSwgMCwgLSBNYXRoLnNpbigtIHRoaXMucm90YXRpb24ueSksIDAsXG4gICAgICAwLCAxLCAwLCAwLFxuICAgICAgTWF0aC5zaW4oLSB0aGlzLnJvdGF0aW9uLnkpLCAwLCBNYXRoLmNvcygtIHRoaXMucm90YXRpb24ueSksIDAsXG4gICAgICAwLCAwLCAwLCAxXG4gICAgXSk7XG4gIH1cblxuICAvKipcbiAgICog44Kr44Oh44Op44Gu5L2N572u44KS56e75YuV44GZ44KLXG4gICAqIEBwYXJhbSBtb3Rpb24g56e75YuV44OZ44Kv44OI44OrXG4gICAqL1xuICBwdWJsaWMgbW92ZShtb3Rpb246IFZlYzMpOiB2b2lkIHtcbiAgICBjb25zdCBjb252ZXJ0ZWQgPSB0aGlzLmdldEludlJvdGF0ZU1hdHJpeEZvck1vdmUoKS5tdWwobmV3IE1hdHJpeCg0LCAxLCBbXG4gICAgICBtb3Rpb24ueCxcbiAgICAgIG1vdGlvbi55LFxuICAgICAgbW90aW9uLnosXG4gICAgICAwXG4gICAgXSkpO1xuICAgIHRoaXMucG9zaXRpb24ueCArPSBjb252ZXJ0ZWQuZ2V0VmFsdWUoMCwgMCk7XG4gICAgdGhpcy5wb3NpdGlvbi55ICs9IGNvbnZlcnRlZC5nZXRWYWx1ZSgxLCAwKTtcbiAgICB0aGlzLnBvc2l0aW9uLnogKz0gY29udmVydGVkLmdldFZhbHVlKDIsIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCq+ODoeODqeOBruWQkeOBjeOCkuWbnui7ouOBmeOCi+OAglxuICAgKiDlnoLnm7TmlrnlkJHvvIh477yJ44Gu5Zue6Lui44GvIFstIFBJIC8gMiwgKyBQSSAvIDJdIOOBruevhOWbsuOBq+WItumZkOOBmeOCi+OAglxuICAgKiBAcGFyYW0gcm90YXRpb24g44Kr44Oh44Op5rOo6KaW54K544O75Zue6Lui77yI44Kq44Kk44Op44O86KeS77yJLCBYIC0+IFkg44Gu6aCG44Gr5Zue6Lui77yI5LiA5pemWuOBr+eEoeimluOBmeOCi+OCiOOBhuOBq+OBl+OBpuOCi++8iVxuICAgKi9cbiAgcHVibGljIHJvdGF0ZShyb3RhdGlvbjogVmVjMyk6IHZvaWQge1xuICAgIHRoaXMucm90YXRpb24ueCA9IE1hdGgubWluKE1hdGgubWF4KHRoaXMucm90YXRpb24ueCArIHJvdGF0aW9uLngsIC0gTWF0aC5QSSAvIDIpLCBNYXRoLlBJIC8gMik7XG4gICAgdGhpcy5yb3RhdGlvbi55ID0gKHRoaXMucm90YXRpb24ueSArIHJvdGF0aW9uLnkpICUgKDIgKiBNYXRoLlBJKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDjg5Pjg6Xjg7zlpInmj5vooYzliJfjgpLov5TjgZlcbiAgICovXG4gIHB1YmxpYyBnZXRWaWV3TWF0cml4KCk6IE1hdHJpeCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Um90YXRlTWF0cml4KCkubXVsKHRoaXMuZ2V0VHJhbnNsYXRlTWF0cml4KCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIOaKleW9seWkieaPm+ihjOWIl+OCkui/lOOBmVxuICAgKi9cbiAgcHVibGljIGdldFByb2plY3Rpb25NYXRyaXgoKTogTWF0cml4IHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeCg0LCA0LCBbXG4gICAgICAxIC8gKHRoaXMuYXNwZWN0ICogTWF0aC50YW4odGhpcy5mb3YgLyAyKSksIDAsIDAsIDAsXG4gICAgICAwLCAxIC8gTWF0aC50YW4odGhpcy5mb3YgLyAyKSwgMCwgMCxcbiAgICAgIDAsIDAsIC0gKHRoaXMuZmFyICsgdGhpcy5uZWFyKSAvICh0aGlzLmZhciAtIHRoaXMubmVhciksIC0xLFxuICAgICAgMCwgMCwgLSAyICogdGhpcy5mYXIgKiB0aGlzLm5lYXIgLyAodGhpcy5mYXIgLSB0aGlzLm5lYXIpLCAwXG4gICAgXSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBWZWMyIHtcbiAgcHVibGljIHg6IG51bWJlcjtcbiAgcHVibGljIHk6IG51bWJlcjtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoeCA6bnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gIH1cblxuICBwdWJsaWMgdG9BcnJheSgpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueV07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZlYzMge1xuICBwdWJsaWMgeDogbnVtYmVyO1xuICBwdWJsaWMgeTogbnVtYmVyO1xuICBwdWJsaWMgejogbnVtYmVyO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcih4IDpudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMueiA9IHo7XG4gIH1cblxuICBwdWJsaWMgdG9BcnJheSgpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueSwgdGhpcy56XTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVmVjNCB7XG4gIHB1YmxpYyB4OiBudW1iZXI7XG4gIHB1YmxpYyB5OiBudW1iZXI7XG4gIHB1YmxpYyB6OiBudW1iZXI7XG4gIHB1YmxpYyB3OiBudW1iZXI7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKHggOm51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIsIHc6IG51bWJlcikge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICAgIHRoaXMudyA9IHc7XG4gIH1cblxuICBwdWJsaWMgdG9BcnJheSgpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLnddO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDYW1lcmEsIFBlcnNwZWN0aXZlQ2FtZXJhIH0gZnJvbSAnLi9jYW1lcmEnO1xuaW1wb3J0IHsgVmVjMyB9IGZyb20gJy4vdmVjdG9yJztcblxuLy8g44Kt44O844Oe44OD44OX6Kit5a6aXG5jb25zdCBLRVlfTEVGVCA9ICdLZXlBJztcbmNvbnN0IEtFWV9SSUdIVCA9ICdLZXlEJztcbmNvbnN0IEtFWV9GUk9OVCA9ICdLZXlXJztcbmNvbnN0IEtFWV9CQUNLID0gJ0tleVMnO1xuY29uc3QgS0VZX1VQID0gJ1NwYWNlJztcbmNvbnN0IEtFWV9ET1dOID0gJ1NoaWZ0TGVmdCc7XG5cbmV4cG9ydCBjbGFzcyBGUFNLZXlib2FyZCB7XG4gIHByaXZhdGUgTCA9IDA7IC8vIEFcbiAgcHJpdmF0ZSBSID0gMDsgLy8gRFxuICBwcml2YXRlIEYgPSAwOyAvLyBXXG4gIHByaXZhdGUgQiA9IDA7IC8vIFNcbiAgcHJpdmF0ZSBVID0gMDsgLy8gU1BDXG4gIHByaXZhdGUgRCA9IDA7IC8vIFNGVFxuXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aW5kb3c6IFdpbmRvdykge1xuICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIHN3aXRjaCAoZXZlbnQuY29kZSkge1xuICAgICAgICBjYXNlIEtFWV9MRUZUOlxuICAgICAgICAgIHRoaXMuTCA9IDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgS0VZX1JJR0hUOlxuICAgICAgICAgIHRoaXMuUiA9IDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgS0VZX0ZST05UOlxuICAgICAgICAgIHRoaXMuRiA9IDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgS0VZX0JBQ0s6XG4gICAgICAgICAgdGhpcy5CID0gMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBLRVlfVVA6XG4gICAgICAgICAgdGhpcy5VID0gMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBLRVlfRE9XTjpcbiAgICAgICAgICB0aGlzLkQgPSAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlS2V5VXAgPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIHN3aXRjaCAoZXZlbnQuY29kZSkge1xuICAgICAgICBjYXNlIEtFWV9MRUZUOlxuICAgICAgICAgIHRoaXMuTCA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgS0VZX1JJR0hUOlxuICAgICAgICAgIHRoaXMuUiA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgS0VZX0ZST05UOlxuICAgICAgICAgIHRoaXMuRiA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgS0VZX0JBQ0s6XG4gICAgICAgICAgdGhpcy5CID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBLRVlfVVA6XG4gICAgICAgICAgdGhpcy5VID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBLRVlfRE9XTjpcbiAgICAgICAgICB0aGlzLkQgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duLCBmYWxzZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaGFuZGxlS2V5VXAsIGZhbHNlKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRMUigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLlIgLSB0aGlzLkw7XG4gIH1cblxuICBwdWJsaWMgZ2V0VUQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5VIC0gdGhpcy5EO1xuICB9XG5cbiAgcHVibGljIGdldEZCKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuQiAtIHRoaXMuRjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRlBTTW91c2Uge1xuICBwcml2YXRlIGxhc3RNb3ZlbWVudFggPSAwO1xuICBwcml2YXRlIGxhc3RNb3ZlbWVudFkgPSAwO1xuICBwcml2YXRlIHNlbnNpdGl2aXR5ID0gMC4wMDM7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKHdpbmRvdzogV2luZG93LCBjYW1lcmE6IENhbWVyYSwgc2Vuc2l0aXZpdHk/OiBudW1iZXIpIHtcbiAgICAvLyDmhJ/luqbjga7jg4fjg5Xjgqnjg6vjg4jlgKToqK3lrppcbiAgICB0aGlzLnNlbnNpdGl2aXR5ID0gc2Vuc2l0aXZpdHkgfHwgMC4wMDM7XG5cbiAgICBjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIC8vIOODnuOCpuOCueOBq+OCiOOBo+OBpuOBr+WApOOBjOOBn+OBvuOBq+i3s+OBreOBpuOCq+ODoeODqeOBruaWueWQkeOBjOaApeOBq+WkieOCj+OBo+OBpuOBl+OBvuOBhuWgtOWQiOOBjOOBguOCi+OBruOBp1xuICAgICAgLy8g5YmN5Zue44Gu5YCk44KC6LiP44G+44GI6Kq/5pW044GZ44KLXG4gICAgICBpZiAoTWF0aC5hYnModGhpcy5sYXN0TW92ZW1lbnRYKSA8IDE1ICYmIE1hdGguYWJzKGV2ZW50Lm1vdmVtZW50WCkgPiA1MCB8fFxuICAgICAgICBNYXRoLmFicyh0aGlzLmxhc3RNb3ZlbWVudFkpIDwgMTUgJiYgTWF0aC5hYnMoZXZlbnQubW92ZW1lbnRZKSA+IDUwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIOWJjeWbnuOBruWApOOCkuabtOaWsFxuICAgICAgdGhpcy5sYXN0TW92ZW1lbnRYID0gZXZlbnQubW92ZW1lbnRYO1xuICAgICAgdGhpcy5sYXN0TW92ZW1lbnRZID0gZXZlbnQubW92ZW1lbnRZO1xuXG4gICAgICAvLyDjgqrjgqTjg6njg7zop5LjgafjgoTjgovjga7jgafnuKbmlrnlkJHjgYwgeCDjgafjgYLjgovjgZPjgajjgavms6jmhI9cbiAgICAgIC8vIOOCreODo+ODs+ODkOOCueOBr+e4puaWueWQkeOBjCB5IOOBquOBruOBp+OBk+OBk+OBp+WFpeOCjOabv+OBiOOBpuOBhOOCi1xuICAgICAgLy8g44GT44GT44Gr44Kr44Oh44Op44Gu44Kk44Oz44K544K/44Oz44K544Gu5Yem55CG44KS5YWl44KM44Gf44GP44Gq44GE44GM44CC44CC44CC44Go44KK44GC44GI44Ga44GT44Gu5a6f6KOF44GnXG4gICAgICBjYW1lcmEucm90YXRlKG5ldyBWZWMzKFxuICAgICAgICBldmVudC5tb3ZlbWVudFkgKiB0aGlzLnNlbnNpdGl2aXR5LFxuICAgICAgICBldmVudC5tb3ZlbWVudFggKiB0aGlzLnNlbnNpdGl2aXR5LFxuICAgICAgICAwXG4gICAgICApKTtcbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZU1vdmUsIGZhbHNlKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gd2hlZWxab29tKGNhbWVyYTogUGVyc3BlY3RpdmVDYW1lcmEpOiB2b2lkIHtcbiAgY29uc3QgaGFuZGxlV2hlZWwgPSAoZXZlbnQ6IFdoZWVsRXZlbnQpID0+IHtcbiAgICAvLyAzMCB+IDExMCDjga7nr4Tlm7LjgafoqK3lrprjgZnjgotcbiAgICBjYW1lcmEuZm92ID0gTWF0aC5tYXgoKDMwIC8gMTgwKSAqIE1hdGguUEksXG4gICAgICBNYXRoLm1pbigoMTEwIC8gMTgwKSAqIE1hdGguUEksXG4gICAgICAgIGNhbWVyYS5mb3YgKyBldmVudC5kZWx0YVkgKiAwLjAwMSkpO1xuICB9O1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBoYW5kbGVXaGVlbCwgZmFsc2UpO1xufVxuIiwiZXhwb3J0IGNsYXNzIExpZ2h0IHtcbiAgcHJpdmF0ZSB4OiBudW1iZXI7XG4gIHByaXZhdGUgeTogbnVtYmVyO1xuICBwcml2YXRlIHo6IG51bWJlcjtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICB9XG5cbiAgcHVibGljIGdldFgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy54O1xuICB9XG5cbiAgcHVibGljIGdldFkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy55O1xuICB9XG5cbiAgcHVibGljIGdldFooKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy56O1xuICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZmV0Y2hJbWFnZURhdGEoc3JjOiBzdHJpbmcpOiBQcm9taXNlPEltYWdlRGF0YT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xuICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICBjb25zdCBjdnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgIC8vIOW+jOOBp+ODhuOCr+OCueODgeODo+OCkuiqreOBv+OBoOOBmemam+OBq+S4gOihjOOBruODkOOCpOODiOaVsOOBjDI1NuOBruWAjeaVsOOBq+OBquOBo+OBpuOBhOOCi+W/heimgeOBjOOBguOCi+OBn+OCgVxuICAgICAgLy8g44GT44GT44Gn55S75YOP44OH44O844K/44Gu5bmF44KSNjTjga7lgI3mlbDjgavjg6rjgrXjgqTjgrrjgZnjgovjgZfjgabjgYrjgY9cbiAgICAgIC8vIHJlZjogaHR0cHM6Ly93d3cudzMub3JnL1RSL3dlYmdwdS8jZG9tLWdwdWltYWdlZGF0YWxheW91dC1ieXRlc3BlcnJvd1xuICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLmNlaWwoaW1nLndpZHRoIC8gNjQpICogNjQ7XG4gICAgICBjdnMud2lkdGggPSB3aWR0aDtcbiAgICAgIGN2cy5oZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgICAgY29uc3QgY3R4ID0gY3ZzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICBpZiAoY3R4ID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfnlLvlg4/jga7oqq3jgb/ovrzjgb/jgavlpLHmlZfjgZfjgb7jgZfjgZ8nKTtcbiAgICAgIH1cbiAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB3aWR0aCwgaW1nLmhlaWdodCk7XG4gICAgICByZXNvbHZlKGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGltZy5oZWlnaHQpKTtcbiAgICB9O1xuICAgIGltZy5vbmVycm9yID0gKGUpID0+IHJlamVjdChlKTtcbiAgICBpbWcuc3JjID0gc3JjO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoVGV4dChzcmM6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHJldHVybiBmZXRjaChzcmMpLnRoZW4ocmVzID0+IHJlcy50ZXh0KCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJlcHJvY2Vzc1RleHQodGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgdGV4dC5yZXBsYWNlKC9cXHIvZywgJycpLnNwbGl0KCdcXG4nKS5mb3JFYWNoKGxpbmUgPT4ge1xuICAgIC8vIOS9meioiOOBquOCueODmuODvOOCueOCkumZpOWOu1xuICAgIGxpbmUgPSBsaW5lLnJlcGxhY2UoL1xccysvZywgJyAnKS5yZXBsYWNlKC8oXlxcc3xcXHMkKS9nLCAnJyk7XG4gICAgLy8g56m644Gu6KGM44KS5YmK6ZmkXG4gICAgaWYgKGxpbmUgPT0gJycpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8g44Kz44Oh44Oz44OI6KGM44KS5YmK6ZmkXG4gICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnIycpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxpbmVzLnB1c2gobGluZSk7XG4gIH0pO1xuICByZXR1cm4gbGluZXM7XG59XG4iLCJleHBvcnQgZW51bSBGYWNlIHtcbiAgVE9QID0gMCxcbiAgQk9UVE9NID0gMSxcbiAgU09VVEggPSAyLFxuICBOT1JUSCA9IDMsXG4gIEVBU1QgPSA0LFxuICBXRVNUID0gNVxufVxuIiwiaW1wb3J0IHsgZmV0Y2hUZXh0LCBwcmVwcm9jZXNzVGV4dCB9IGZyb20gJy4vdXRpbCc7XG5cbmV4cG9ydCB0eXBlIE15T2JqZWN0ID0ge1xuICBmOiBudW1iZXJbXVtdW107XG4gIG10bE5hbWU6IHN0cmluZyB8IG51bGw7XG59O1xuXG5leHBvcnQgdHlwZSBPYmogPSB7XG4gIHY6IG51bWJlcltdW107XG4gIHZuOiBudW1iZXJbXVtdO1xuICB2dDogbnVtYmVyW11bXTtcbiAgb2JqZWN0czogTXlPYmplY3RbXTtcbiAgbWF0ZXJpYWxzOiBNdGxbXTtcbn07XG5cbmV4cG9ydCB0eXBlIE10bCA9IHtcbiAgbmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgbWFwS2Q6IHN0cmluZyB8IG51bGw7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBsb2FkTXRsKG10bFVybDogc3RyaW5nKTogUHJvbWlzZTxNdGxbXT4ge1xuICBjb25zdCB0ZXh0ID0gYXdhaXQgZmV0Y2hUZXh0KG10bFVybCk7XG4gIGNvbnN0IGxpbmVzID0gcHJlcHJvY2Vzc1RleHQodGV4dCk7XG5cbiAgY29uc3QgbXRsczogTXRsW10gPSBbXTtcbiAgbGV0IG10bE5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBsZXQgbXRsTWFwS2Q6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgdGVybXMgPSBsaW5lc1tpXS5zcGxpdCgnICcpO1xuICAgIGlmICh0ZXJtc1swXSA9PSAnbmV3bXRsJykge1xuICAgICAgaWYgKG10bE5hbWUgIT0gbnVsbCAmJiBtdGxNYXBLZCAhPSBudWxsKSB7XG4gICAgICAgIG10bHMucHVzaCh7XG4gICAgICAgICAgbmFtZTogbXRsTmFtZSxcbiAgICAgICAgICBtYXBLZDogbXRsTWFwS2RcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBtdGxOYW1lID0gdGVybXNbMV07XG4gICAgICBtdGxNYXBLZCA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh0ZXJtc1swXSA9PSAnbWFwX0tkJykge1xuICAgICAgbXRsTWFwS2QgPSBtdGxVcmwucmVwbGFjZSgvXFwvW14vXSokLywgJy8nICsgdGVybXNbMV0pO1xuICAgIH1cbiAgfVxuXG4gIG10bHMucHVzaCh7XG4gICAgbmFtZTogbXRsTmFtZSxcbiAgICBtYXBLZDogbXRsTWFwS2RcbiAgfSk7XG5cbiAgcmV0dXJuIG10bHM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkT2JqKG9ialVybDogc3RyaW5nKTogUHJvbWlzZTxPYmo+IHtcbiAgY29uc3QgdGV4dCA9IGF3YWl0IGZldGNoVGV4dChvYmpVcmwpO1xuICBjb25zdCBsaW5lcyA9IHByZXByb2Nlc3NUZXh0KHRleHQpO1xuXG4gIGNvbnN0IHY6IG51bWJlcltdW10gPSBbXTtcbiAgY29uc3Qgdm46IG51bWJlcltdW10gPSBbXTtcbiAgY29uc3QgdnQ6IG51bWJlcltdW10gPSBbXTtcbiAgY29uc3Qgb2JqZWN0czogTXlPYmplY3RbXSA9IFtdO1xuICBjb25zdCBtYXRlcmlhbHM6IE10bFtdID0gW107XG5cbiAgbGV0IGY6IG51bWJlcltdW11bXSA9IFtdO1xuICBsZXQgbXRsTmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB0ZXJtcyA9IGxpbmVzW2ldLnNwbGl0KCcgJyk7XG4gICAgaWYgKHRlcm1zWzBdID09ICd1c2VtdGwnKSB7XG4gICAgICBpZiAobXRsTmFtZSAhPSBudWxsKSB7XG4gICAgICAgIG9iamVjdHMucHVzaCh7XG4gICAgICAgICAgZjogZixcbiAgICAgICAgICBtdGxOYW1lOiBtdGxOYW1lXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZiA9IFtdO1xuICAgICAgbXRsTmFtZSA9IHRlcm1zWzFdO1xuICAgIH0gZWxzZSBpZiAodGVybXNbMF0gPT0gJ3YnKSB7XG4gICAgICB2LnB1c2goW051bWJlcih0ZXJtc1sxXSksIE51bWJlcih0ZXJtc1syXSksIE51bWJlcih0ZXJtc1szXSldKTtcbiAgICB9IGVsc2UgaWYgKHRlcm1zWzBdID09ICd2bicpIHtcbiAgICAgIHZuLnB1c2goW051bWJlcih0ZXJtc1sxXSksIE51bWJlcih0ZXJtc1syXSksIE51bWJlcih0ZXJtc1szXSldKTtcbiAgICB9IGVsc2UgaWYgKHRlcm1zWzBdID09ICd2dCcpIHtcbiAgICAgIHZ0LnB1c2goW051bWJlcih0ZXJtc1sxXSksIE51bWJlcih0ZXJtc1syXSksIE51bWJlcih0ZXJtc1szXSldKTtcbiAgICB9IGVsc2UgaWYgKHRlcm1zWzBdID09ICdmJykge1xuICAgICAgY29uc3QgZmY6IG51bWJlcltdW10gPSBbXTtcbiAgICAgIGYucHVzaChmZik7XG4gICAgICBmb3IgKGxldCBqID0gMTsgaiA8IHRlcm1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGNvbnN0IHZlcnRleCA9IHRlcm1zW2pdLnNwbGl0KCcvJyk7XG4gICAgICAgIGZmLnB1c2goW051bWJlcih2ZXJ0ZXhbMF0pLCBOdW1iZXIodmVydGV4WzFdKSwgTnVtYmVyKHZlcnRleFsyXSldKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRlcm1zWzBdID09ICdtdGxsaWInKSB7XG4gICAgICBtYXRlcmlhbHMucHVzaCguLi4oYXdhaXQgbG9hZE10bChvYmpVcmwucmVwbGFjZSgvXFwvW14vXSokLywgJy8nICsgdGVybXNbMV0pKSkpO1xuICAgIH1cbiAgfVxuXG4gIG9iamVjdHMucHVzaCh7XG4gICAgZjogZixcbiAgICBtdGxOYW1lOiBtdGxOYW1lXG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgdjogdixcbiAgICB2bjogdm4sXG4gICAgdnQ6IHZ0LFxuICAgIG9iamVjdHM6IG9iamVjdHMsXG4gICAgbWF0ZXJpYWxzOiBtYXRlcmlhbHNcbiAgfTtcbn1cbiIsImltcG9ydCB7IFZlYzIsIFZlYzMgfSBmcm9tICcuL3ZlY3Rvcic7XG5cbmV4cG9ydCBjbGFzcyBHZW9tZXRyeUJhc2Uge1xuICBwcml2YXRlIHZlcnRpY2VzOiBudW1iZXJbXTtcbiAgcHJpdmF0ZSBub3JtYWxzOiBudW1iZXJbXTtcbiAgcHJpdmF0ZSB1dkNvb3JkczogbnVtYmVyW107XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudmVydGljZXMgPSBbXTtcbiAgICB0aGlzLm5vcm1hbHMgPSBbXTtcbiAgICB0aGlzLnV2Q29vcmRzID0gW107XG4gIH1cblxuICAvKipcbiAgICog5LiO44GI44KJ44KM44Gf6aCC54K544GL44KJ5qeL5oiQ44GV44KM44KL5aSa6KeS5b2i44KS6L+95Yqg44GZ44KL44CCXG4gICAqIOmggueCueOBr+ihqOmdouOBi+OCieimi+OBpuWPjeaZguioiOWbnuOCiuOBp+aMh+WumuOBl+OBquOBkeOCjOOBsOOBquOCieOBquOBhOOAglxuICAgKiBAcGFyYW0gdmVydGljZXMg5aSa6KeS5b2i44KS5qeL5oiQ44GZ44KL6aCC54K5XG4gICAqIEBwYXJhbSB1dkNvb3JkcyDpoILngrnjgavlr77lv5zjgZnjgosgVVYg5bqn5qiZXG4gICAqL1xuICBwdWJsaWMgYWRkRmFjZSh2ZXJ0aWNlczogVmVjM1tdLCB1dkNvb3Jkcz86IFZlYzJbXSkge1xuICAgIGlmICh2ZXJ0aWNlcyA9PSBudWxsIHx8IHZlcnRpY2VzLmxlbmd0aCA8IDMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign6aCC54K544GM77yT44Gk5Lul5LiK5b+F6KaB44Gn44GZJyk7XG4gICAgfVxuICAgIGlmICh1dkNvb3JkcyAhPSBudWxsICYmIHZlcnRpY2VzLmxlbmd0aCAhPSB1dkNvb3Jkcy5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign6aCC54K544Gu5pWw44GoIFVWIOW6p+aomeOBruaVsOOBjOS4gOiHtOOBl+OBvuOBm+OCkycpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHZlcnRpY2VzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgaWYgKHV2Q29vcmRzICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5hZGRUcmlhbmdsZSh2ZXJ0aWNlc1swXSwgdmVydGljZXNbaV0sIHZlcnRpY2VzW2kgKyAxXSwgdXZDb29yZHNbMF0sIHV2Q29vcmRzW2ldLCB1dkNvb3Jkc1tpICsgMV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdXZDb29yZHMg44GM54Sh44GE5aC05ZCI44GvICgwLCAwKSDjgpLlhaXjgozjgabjgYrjgY9cbiAgICAgICAgdGhpcy5hZGRUcmlhbmdsZSh2ZXJ0aWNlc1swXSwgdmVydGljZXNbaV0sIHZlcnRpY2VzW2kgKyAxXSwgbmV3IFZlYzIoMCwgMCksIG5ldyBWZWMyKDAsIDApLCBuZXcgVmVjMigwLCAwKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHYxIH4gdjMg44GL44KJ44Gq44KL5LiJ6KeS5b2i6Z2i44KS6L+95Yqg44GZ44KL44CCXG4gICAqIOmggueCueOBr+ihqOmdouOBi+OCieimi+OBpuWPjeaZguioiOWbnuOCiuOBp+aMh+WumuOBl+OBquOBkeOCjOOBsOOBquOCieOBquOBhOOAglxuICAgKiBAcGFyYW0gdjFcbiAgICogQHBhcmFtIHYyXG4gICAqIEBwYXJhbSB2M1xuICAgKiBAcGFyYW0gdXYxXG4gICAqIEBwYXJhbSB1djJcbiAgICogQHBhcmFtIHV2M1xuICAgKi9cbiAgcHJpdmF0ZSBhZGRUcmlhbmdsZSh2MTogVmVjMywgdjI6IFZlYzMsIHYzOiBWZWMzLCB1djE6IFZlYzIsIHV2MjogVmVjMiwgdXYzOiBWZWMyKSB7XG4gICAgLy8g6Z2i5rOV57ea44OZ44Kv44OI44Or44KS5rOV57ea44OZ44Kv44OI44Or44Go44GX44Gm5L2/44GGXG4gICAgY29uc3Qgc3VyZmFjZU5vcm1hbCA9IHRoaXMuZ2V0U3VyZmFjZU5vcm1hbCh2MSwgdjIsIHYzKTtcbiAgICAvLyB2MVxuICAgIHRoaXMuYWRkVmVydGV4KHYxKTtcbiAgICB0aGlzLmFkZFVWQ29vcmQodXYxKTtcbiAgICB0aGlzLmFkZE5vcm1hbChzdXJmYWNlTm9ybWFsKTtcbiAgICAvLyB2MlxuICAgIHRoaXMuYWRkVmVydGV4KHYyKTtcbiAgICB0aGlzLmFkZFVWQ29vcmQodXYyKTtcbiAgICB0aGlzLmFkZE5vcm1hbChzdXJmYWNlTm9ybWFsKTtcbiAgICAvLyB2M1xuICAgIHRoaXMuYWRkVmVydGV4KHYzKTtcbiAgICB0aGlzLmFkZFVWQ29vcmQodXYzKTtcbiAgICB0aGlzLmFkZE5vcm1hbChzdXJmYWNlTm9ybWFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiB2MSB+IHYzIOOBi+OCieOBquOCi+S4ieinkuW9oumdouOBrumdouazlee3muODmeOCr+ODiOODq+OCkui/lOOBmeOAglxuICAgKiDpoILngrnjga/ooajpnaLjgYvjgonopovjgablj43mmYLoqIjlm57jgorjgafmjIflrprjgZfjgarjgZHjgozjgbDjgarjgonjgarjgYTjgIJcbiAgICogQHBhcmFtIHYxXG4gICAqIEBwYXJhbSB2MlxuICAgKiBAcGFyYW0gdjNcbiAgICogQHJldHVybnMg6Z2i5rOV57ea44OZ44Kv44OI44OrXG4gICAqL1xuICBwcml2YXRlIGdldFN1cmZhY2VOb3JtYWwodjE6IFZlYzMsIHYyOiBWZWMzLCB2MzogVmVjMyk6IFZlYzMge1xuICAgIGNvbnN0IGEgPSBuZXcgVmVjMyh2Mi54IC0gdjEueCwgdjIueSAtIHYxLnksIHYyLnogLSB2MS56KTtcbiAgICBjb25zdCBiID0gbmV3IFZlYzModjMueCAtIHYxLngsIHYzLnkgLSB2MS55LCB2My56IC0gdjEueik7XG4gICAgLy8g5aSW56mNXG4gICAgcmV0dXJuIG5ldyBWZWMzKGEueSAqIGIueiAtIGEueiAqIGIueSwgYS56ICogYi54IC0gYS54ICogYi56LCBhLnggKiBiLnkgLSBhLnkgKiBiLngpO1xuICB9XG5cbiAgLyoqXG4gICAqIOazlee3muODmeOCr+ODiOODq+OCkui/veWKoOOBmeOCi+OAglxuICAgKiBAcGFyYW0gbm9ybWFsIOazlee3muODmeOCr+ODiOODq1xuICAgKi9cbiAgcHJpdmF0ZSBhZGROb3JtYWwobm9ybWFsOiBWZWMzKSB7XG4gICAgdGhpcy5ub3JtYWxzLnB1c2gobm9ybWFsLngsIG5vcm1hbC55LCBub3JtYWwueik7XG4gIH1cblxuICBwcml2YXRlIGFkZFZlcnRleCh2ZXJ0ZXg6IFZlYzMpIHtcbiAgICB0aGlzLnZlcnRpY2VzLnB1c2godmVydGV4LngsIHZlcnRleC55LCB2ZXJ0ZXgueik7XG4gIH1cblxuICAvKipcbiAgICogVVYg5bqn5qiZ44KS6L+95Yqg44GZ44KL44CCXG4gICAqIEBwYXJhbSB1dkNvb3JkIFVWIOW6p+aomVxuICAgKi9cbiAgcHVibGljIGFkZFVWQ29vcmQodXZDb29yZDogVmVjMikge1xuICAgIHRoaXMudXZDb29yZHMucHVzaCh1dkNvb3JkLngsIHV2Q29vcmQueSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0VmVydGljZXMoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLnZlcnRpY2VzO1xuICB9XG5cbiAgcHVibGljIGdldE5vcm1hbHMoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLm5vcm1hbHM7XG4gIH1cblxuICBwdWJsaWMgZ2V0VVZDb29yZHMoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLnV2Q29vcmRzO1xuICB9XG59XG4iLCJpbXBvcnQgeyBGYWNlIH0gZnJvbSAnLi4vZmFjZSc7XG5pbXBvcnQgeyBHZW9tZXRyeUJhc2UgfSBmcm9tICcuLi9nZW9tZXRyeUJhc2UnO1xuaW1wb3J0IHsgVmVjMiwgVmVjMyB9IGZyb20gJy4uL3ZlY3Rvcic7XG5pbXBvcnQgeyBJbnN0YW5jZWRNZXNoIH0gZnJvbSAnLi9pbnN0YW5jZWRNZXNoJztcblxuLyoqXG4gKiBDdWJlIOOBruOCpOODs+OCueOCv+ODs+OCueWMluODkOODvOOCuOODp+ODs1xuICpcbiAqL1xuZXhwb3J0IGNsYXNzIEluc3RhbmNlZEN1YmUgZXh0ZW5kcyBHZW9tZXRyeUJhc2UgaW1wbGVtZW50cyBJbnN0YW5jZWRNZXNoIHtcbiAgcHJpdmF0ZSB0ZXh0dXJlSW1hZ2VzOiBJbWFnZURhdGFbXTtcbiAgcHJpdmF0ZSBpbnN0YW5jZVBvc2l0aW9uczogVmVjM1tdO1xuICBwcml2YXRlIGluc3RhbmNlUm90YXRpb25zOiBudW1iZXJbXTtcbiAgcHJpdmF0ZSBpbnN0YW5jZVRleHR1cmVJZHM6IG51bWJlcltdO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudGV4dHVyZUltYWdlcyA9IFtdO1xuICAgIHRoaXMuaW5zdGFuY2VQb3NpdGlvbnMgPSBbXTtcbiAgICB0aGlzLmluc3RhbmNlUm90YXRpb25zID0gW107XG4gICAgdGhpcy5pbnN0YW5jZVRleHR1cmVJZHMgPSBbXTtcblxuICAgIC8vIOmggueCueOBruS9jee9rumWouS/gjpcbiAgICAvLyAgIEItLS0tLS1DXG4gICAgLy8gIC98ICAgICAvfFxuICAgIC8vIEEtLS0tLS1EIHxcbiAgICAvLyB8IEYtLS0tfC1HXG4gICAgLy8gfC8gICAgIHwvXG4gICAgLy8gRS0tLS0tLUhcbiAgICAvL1xuICAgIC8vIOS4ijogeSssIOS4izogeS1cbiAgICAvLyDliY06IHorLCDlpaU6IHotXG4gICAgLy8g5Y+zOiB4Kywg5bemOiB4LVxuICAgIGNvbnN0IEEgPSBuZXcgVmVjMygtMC41LCAwLjUsIDAuNSk7XG4gICAgY29uc3QgQiA9IG5ldyBWZWMzKC0wLjUsIDAuNSwgLTAuNSk7XG4gICAgY29uc3QgQyA9IG5ldyBWZWMzKDAuNSwgMC41LCAtMC41KTtcbiAgICBjb25zdCBEID0gbmV3IFZlYzMoMC41LCAwLjUsIDAuNSk7XG4gICAgY29uc3QgRSA9IG5ldyBWZWMzKC0wLjUsIC0wLjUsIDAuNSk7XG4gICAgY29uc3QgRiA9IG5ldyBWZWMzKC0wLjUsIC0wLjUsIC0wLjUpO1xuICAgIGNvbnN0IEcgPSBuZXcgVmVjMygwLjUsIC0wLjUsIC0wLjUpO1xuICAgIGNvbnN0IEggPSBuZXcgVmVjMygwLjUsIC0wLjUsIDAuNSk7XG5cbiAgICAvLyDog4zpnaLjgqvjg6rjg7PjgrDjga7jgZ/jgoHjgavjgIHlj43mmYLoqIjlm57jgorjgafntbHkuIDjgZfjgabjgYTjgotcbiAgICAvLyDkuIrpnaJcbiAgICB0aGlzLmFkZEZhY2UoW0EsIEQsIEMsIEJdLCBbXG4gICAgICBuZXcgVmVjMigxIC8gNCwgMSAvIDMpLFxuICAgICAgbmV3IFZlYzIoMiAvIDQsIDEgLyAzKSxcbiAgICAgIG5ldyBWZWMyKDIgLyA0LCAwIC8gMyksXG4gICAgICBuZXcgVmVjMigxIC8gNCwgMCAvIDMpXG4gICAgXSk7XG4gICAgLy8g5bqV6Z2iXG4gICAgdGhpcy5hZGRGYWNlKFtFLCBGLCBHLCBIXSwgW1xuICAgICAgbmV3IFZlYzIoMSAvIDQsIDIgLyAzKSxcbiAgICAgIG5ldyBWZWMyKDEgLyA0LCAzIC8gMyksXG4gICAgICBuZXcgVmVjMigyIC8gNCwgMyAvIDMpLFxuICAgICAgbmV3IFZlYzIoMiAvIDQsIDIgLyAzKVxuICAgIF0pO1xuICAgIC8vIOW3pumdolxuICAgIHRoaXMuYWRkRmFjZShbQSwgQiwgRiwgRV0sIFtcbiAgICAgIG5ldyBWZWMyKDEgLyA0LCAxIC8gMyksXG4gICAgICBuZXcgVmVjMigwIC8gNCwgMSAvIDMpLFxuICAgICAgbmV3IFZlYzIoMCAvIDQsIDIgLyAzKSxcbiAgICAgIG5ldyBWZWMyKDEgLyA0LCAyIC8gMylcbiAgICBdKTtcbiAgICAvLyDlj7PpnaJcbiAgICB0aGlzLmFkZEZhY2UoW0QsIEgsIEcsIENdLCBbXG4gICAgICBuZXcgVmVjMigyIC8gNCwgMSAvIDMpLFxuICAgICAgbmV3IFZlYzIoMiAvIDQsIDIgLyAzKSxcbiAgICAgIG5ldyBWZWMyKDMgLyA0LCAyIC8gMyksXG4gICAgICBuZXcgVmVjMigzIC8gNCwgMSAvIDMpXG4gICAgXSk7XG4gICAgLy8g5YmN6Z2iXG4gICAgdGhpcy5hZGRGYWNlKFtBLCBFLCBILCBEXSwgW1xuICAgICAgbmV3IFZlYzIoMSAvIDQsIDEgLyAzKSxcbiAgICAgIG5ldyBWZWMyKDEgLyA0LCAyIC8gMyksXG4gICAgICBuZXcgVmVjMigyIC8gNCwgMiAvIDMpLFxuICAgICAgbmV3IFZlYzIoMiAvIDQsIDEgLyAzKVxuICAgIF0pO1xuICAgIC8vIOWlpemdolxuICAgIHRoaXMuYWRkRmFjZShbQiwgQywgRywgRl0sIFtcbiAgICAgIG5ldyBWZWMyKDQgLyA0LCAxIC8gMyksXG4gICAgICBuZXcgVmVjMigzIC8gNCwgMSAvIDMpLFxuICAgICAgbmV3IFZlYzIoMyAvIDQsIDIgLyAzKSxcbiAgICAgIG5ldyBWZWMyKDQgLyA0LCAyIC8gMylcbiAgICBdKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRPZmZzZXRzKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy5nZXRWZXJ0aWNlcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCpOODs+OCueOCv+ODs+OCueOCkui/veWKoOOBmeOCi1xuICAgKiBAcGFyYW0gcG9zaXRpb24g44Kk44Oz44K544K/44Oz44K544Gu5L2N572uXG4gICAqIEBwYXJhbSB0ZXh0dXJlSWQg44OG44Kv44K544OB44Oj44GuIElEXG4gICAqIEBwYXJhbSBmYWNlIOOCpOODs+OCueOCv+ODs+OCueOBruWQkeOBje+8iOODh+ODleOCqeODq+ODiOaJi+WJjeOBjOWNl++8iVxuICAgKi9cbiAgcHVibGljIGFkZEluc3RhbmNlKHBvc2l0aW9uOiBWZWMzLCB0ZXh0dXJlSWQ6IG51bWJlciwgZmFjZSA9IEZhY2UuU09VVEgpOiB2b2lkIHtcbiAgICB0aGlzLmluc3RhbmNlUG9zaXRpb25zLnB1c2gocG9zaXRpb24pO1xuICAgIHRoaXMuaW5zdGFuY2VUZXh0dXJlSWRzLnB1c2godGV4dHVyZUlkKTtcbiAgICB0aGlzLmluc3RhbmNlUm90YXRpb25zLnB1c2goZmFjZSk7XG4gIH1cblxuICBwdWJsaWMgc2V0VGV4dHVyZUltYWdlcyh0ZXh0dXJlSW1hZ2VzOiBJbWFnZURhdGFbXSk6IHZvaWQge1xuICAgIHRoaXMudGV4dHVyZUltYWdlcyA9IHRleHR1cmVJbWFnZXM7XG4gIH1cblxuICBwdWJsaWMgZ2V0VGV4dHVyZUltYWdlcygpOiBJbWFnZURhdGFbXSB7XG4gICAgY29uc3QgYXJyOiBJbWFnZURhdGFbXSA9IFtdO1xuICAgIHRoaXMudGV4dHVyZUltYWdlcy5mb3JFYWNoKCh0ZXh0dXJlSW1hZ2UpID0+IHtcbiAgICAgIGFyci5wdXNoKHRleHR1cmVJbWFnZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRJbnN0YW5jZVBvc2l0aW9ucygpOiBudW1iZXJbXSB7XG4gICAgY29uc3QgYXJyOiBudW1iZXJbXSA9IFtdO1xuICAgIHRoaXMuaW5zdGFuY2VQb3NpdGlvbnMuZm9yRWFjaCgoaW5zdGFuY2VQb3NpdGlvbikgPT4ge1xuICAgICAgYXJyLnB1c2goLi4uaW5zdGFuY2VQb3NpdGlvbi50b0FycmF5KCkpO1xuICAgIH0pO1xuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICBwdWJsaWMgZ2V0SW5zdGFuY2VSb3RhdGlvbnMoKTogbnVtYmVyW10ge1xuICAgIGNvbnN0IGFycjogbnVtYmVyW10gPSBbXTtcbiAgICB0aGlzLmluc3RhbmNlUm90YXRpb25zLmZvckVhY2goKGluc3RhbmNlUm90YXRpb24pID0+IHtcbiAgICAgIGFyci5wdXNoKGluc3RhbmNlUm90YXRpb24pO1xuICAgIH0pO1xuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICBwdWJsaWMgZ2V0SW5zdGFuY2VUZXh0dXJlSWRzKCk6IG51bWJlcltdIHtcbiAgICBjb25zdCBhcnI6IG51bWJlcltdID0gW107XG4gICAgdGhpcy5pbnN0YW5jZVRleHR1cmVJZHMuZm9yRWFjaCgoaW5zdGFuY2VUZXh0dXJlSWQpID0+IHtcbiAgICAgIGFyci5wdXNoKGluc3RhbmNlVGV4dHVyZUlkKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYXJyO1xuICB9XG5cbiAgcHVibGljIGdldEluc3RhbmNlQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZVBvc2l0aW9ucy5sZW5ndGg7XG4gIH1cblxuICBwdWJsaWMgZ2V0VmVydGV4Q291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5nZXRWZXJ0aWNlcygpLmxlbmd0aCAvIDM7XG4gIH1cbn1cbiIsImltcG9ydCB7IEZhY2UgfSBmcm9tICcuLi9mYWNlJztcbmltcG9ydCB7IFZlYzIsIFZlYzMgfSBmcm9tICcuLi92ZWN0b3InO1xuaW1wb3J0IHsgSW5zdGFuY2VkTWVzaCB9IGZyb20gJy4vaW5zdGFuY2VkTWVzaCc7XG5cbmV4cG9ydCBjbGFzcyBJbnN0YW5jZWRDdXN0b21NZXNoIGltcGxlbWVudHMgSW5zdGFuY2VkTWVzaCB7XG4gIHByaXZhdGUgdjogbnVtYmVyW11bXSA9IFtdO1xuICBwcml2YXRlIHZuOiBudW1iZXJbXVtdID0gW107XG4gIHByaXZhdGUgdnQ6IG51bWJlcltdW10gPSBbXTtcbiAgcHJpdmF0ZSBmOiBudW1iZXJbXVtdW10gPSBbXTtcbiAgcHJpdmF0ZSB2ZXJ0aWNlczogbnVtYmVyW107XG4gIHByaXZhdGUgbm9ybWFsczogbnVtYmVyW107XG4gIHByaXZhdGUgdXZDb29yZHM6IG51bWJlcltdO1xuICBwcml2YXRlIHRleHR1cmVJbWFnZXM6IEltYWdlRGF0YVtdO1xuICBwcml2YXRlIHZlcnRleENvdW50OiBudW1iZXI7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKHY6IG51bWJlcltdW10sIHZuOiBudW1iZXJbXVtdLCB2dDogbnVtYmVyW11bXSwgZjogbnVtYmVyW11bXVtdKSB7XG4gICAgdGhpcy52ID0gdjtcbiAgICB0aGlzLnZuID0gdm47XG4gICAgdGhpcy52dCA9IHZ0O1xuICAgIHRoaXMuZiA9IGY7XG4gICAgdGhpcy52ZXJ0aWNlcyA9IFtdO1xuICAgIHRoaXMubm9ybWFscyA9IFtdO1xuICAgIHRoaXMudXZDb29yZHMgPSBbXTtcbiAgICB0aGlzLnRleHR1cmVJbWFnZXMgPSBbXTtcbiAgICB0aGlzLnZlcnRleENvdW50ID0gMDtcblxuICAgIHRoaXMuZi5mb3JFYWNoKGZhY2UgPT4ge1xuICAgICAgY29uc3QgdmVydGljZXM6IFZlYzNbXSA9IFtdO1xuICAgICAgY29uc3Qgbm9ybWFsczogVmVjM1tdID0gW107XG4gICAgICBjb25zdCB1dkNvb3JkczogVmVjMltdID0gW107XG5cbiAgICAgIGZhY2UuZm9yRWFjaCh2ZXJ0ZXggPT4ge1xuICAgICAgICBjb25zdCB2ID0gdGhpcy52W3ZlcnRleFswXSAtIDFdO1xuICAgICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKHZbMF0sIHZbMV0sIHZbMl0pKTtcblxuICAgICAgICBjb25zdCB2dCA9IHRoaXMudnRbdmVydGV4WzFdIC0gMV07XG4gICAgICAgIHV2Q29vcmRzLnB1c2gobmV3IFZlYzIodnRbMF0sIHZ0WzFdKSk7XG5cbiAgICAgICAgY29uc3Qgdm4gPSB0aGlzLnZuW3ZlcnRleFsyXSAtIDFdO1xuICAgICAgICBub3JtYWxzLnB1c2gobmV3IFZlYzModm5bMF0sIHZuWzFdLCB2blsyXSkpO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuYWRkRmFjZSh2ZXJ0aWNlcywgdXZDb29yZHMsIG5vcm1hbHMpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRGYWNlKHZlcnRpY2VzOiBWZWMzW10sIHV2Q29vcmRzOiBWZWMyW10sIG5vcm1hbHM6IFZlYzNbXSkge1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdmVydGljZXMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICB0aGlzLmFkZFRyaWFuZ2xlKFxuICAgICAgICB2ZXJ0aWNlc1swXSwgdmVydGljZXNbaV0sdmVydGljZXNbaSArIDFdLFxuICAgICAgICBub3JtYWxzWzBdLCBub3JtYWxzW2ldLCBub3JtYWxzW2kgKyAxXSxcbiAgICAgICAgdXZDb29yZHNbMF0sIHV2Q29vcmRzW2ldLCB1dkNvb3Jkc1tpICsgMV1cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRUcmlhbmdsZSh2MTogVmVjMywgdjI6IFZlYzMsIHYzOiBWZWMzLCBuMTogVmVjMywgbjI6IFZlYzMsIG4zOiBWZWMzLCB1djE6IFZlYzIsIHV2MjogVmVjMiwgdXYzOiBWZWMyKSB7XG4gICAgLy8gdjFcbiAgICB0aGlzLmFkZFZlcnRleCh2MSk7XG4gICAgdGhpcy5hZGROb3JtYWwobjEpO1xuICAgIHRoaXMuYWRkVVZDb29yZCh1djEpO1xuICAgIC8vIHYyXG4gICAgdGhpcy5hZGRWZXJ0ZXgodjIpO1xuICAgIHRoaXMuYWRkTm9ybWFsKG4yKTtcbiAgICB0aGlzLmFkZFVWQ29vcmQodXYyKTtcbiAgICAvLyB2M1xuICAgIHRoaXMuYWRkVmVydGV4KHYzKTtcbiAgICB0aGlzLmFkZE5vcm1hbChuMyk7XG4gICAgdGhpcy5hZGRVVkNvb3JkKHV2Myk7XG5cbiAgICB0aGlzLnZlcnRleENvdW50ICs9IDM7XG4gIH1cblxuICBwcml2YXRlIGFkZFZlcnRleCh2ZXJ0ZXg6IFZlYzMpIHtcbiAgICB0aGlzLnZlcnRpY2VzLnB1c2godmVydGV4LngsIHZlcnRleC55LCB2ZXJ0ZXgueik7XG4gIH1cblxuICBwcml2YXRlIGFkZE5vcm1hbChub3JtYWw6IFZlYzMpIHtcbiAgICB0aGlzLm5vcm1hbHMucHVzaChub3JtYWwueCwgbm9ybWFsLnksIG5vcm1hbC56KTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkVVZDb29yZCh1dkNvb3JkOiBWZWMyKSB7XG4gICAgdGhpcy51dkNvb3Jkcy5wdXNoKHV2Q29vcmQueCwgMSAtIHV2Q29vcmQueSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0VmVydGljZXMoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLnZlcnRpY2VzO1xuICB9XG4gIHB1YmxpYyBnZXROb3JtYWxzKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy5ub3JtYWxzO1xuICB9XG4gIHB1YmxpYyBnZXRVVkNvb3JkcygpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMudXZDb29yZHM7XG4gIH1cbiAgcHVibGljIGdldE9mZnNldHMoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLmdldFZlcnRpY2VzKCk7XG4gIH1cblxuICBwdWJsaWMgc2V0VGV4dHVyZUltYWdlcyh0ZXh0dXJlSW1hZ2VzOiBJbWFnZURhdGFbXSk6IHZvaWQge1xuICAgIHRoaXMudGV4dHVyZUltYWdlcyA9IHRleHR1cmVJbWFnZXM7XG4gIH1cblxuICBwdWJsaWMgZ2V0VGV4dHVyZUltYWdlcygpOiBJbWFnZURhdGFbXSB7XG4gICAgY29uc3QgYXJyOiBJbWFnZURhdGFbXSA9IFtdO1xuICAgIHRoaXMudGV4dHVyZUltYWdlcy5mb3JFYWNoKCh0ZXh0dXJlSW1hZ2UpID0+IHtcbiAgICAgIGFyci5wdXNoKHRleHR1cmVJbWFnZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRJbnN0YW5jZVBvc2l0aW9ucygpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIFswLCAyMCwgMF07XG4gIH1cblxuICBwdWJsaWMgZ2V0SW5zdGFuY2VSb3RhdGlvbnMoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiBbRmFjZS5UT1BdO1xuICB9XG5cbiAgcHVibGljIGdldEluc3RhbmNlVGV4dHVyZUlkcygpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIFswXTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRJbnN0YW5jZUNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICBwdWJsaWMgZ2V0VmVydGV4Q291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy52ZXJ0ZXhDb3VudDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRmFjZSB9IGZyb20gJy4uL2ZhY2UnO1xuaW1wb3J0IHsgR2VvbWV0cnlCYXNlIH0gZnJvbSAnLi4vZ2VvbWV0cnlCYXNlJztcbmltcG9ydCB7IFZlYzIsIFZlYzMgfSBmcm9tICcuLi92ZWN0b3InO1xuaW1wb3J0IHsgSW5zdGFuY2VkTWVzaCB9IGZyb20gJy4vaW5zdGFuY2VkTWVzaCc7XG5cbi8qKlxuICogU3F1YXJlIOOBruOCpOODs+OCueOCv+ODs+OCueWMluODkOODvOOCuOODp+ODs1xuICovXG5leHBvcnQgY2xhc3MgSW5zdGFuY2VkU3F1YXJlIGV4dGVuZHMgR2VvbWV0cnlCYXNlIGltcGxlbWVudHMgSW5zdGFuY2VkTWVzaCB7XG4gIHByaXZhdGUgdGV4dHVyZUltYWdlczogSW1hZ2VEYXRhW107XG4gIHByaXZhdGUgaW5zdGFuY2VQb3NpdGlvbnM6IFZlYzNbXTtcbiAgcHJpdmF0ZSBpbnN0YW5jZVJvdGF0aW9uczogbnVtYmVyW107XG4gIHByaXZhdGUgaW5zdGFuY2VUZXh0dXJlSWRzOiBudW1iZXJbXTtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnRleHR1cmVJbWFnZXMgPSBbXTtcbiAgICB0aGlzLmluc3RhbmNlUG9zaXRpb25zID0gW107XG4gICAgdGhpcy5pbnN0YW5jZVJvdGF0aW9ucyA9IFtdO1xuICAgIHRoaXMuaW5zdGFuY2VUZXh0dXJlSWRzID0gW107XG5cbiAgICAvLyDpoILngrnjga7kvY3nva7plqLkv4I6XG4gICAgLy8gQS0tLS0tLUJcbiAgICAvLyB8ICAgICAgfFxuICAgIC8vIHwgICAgICB8XG4gICAgLy8gRC0tLS0tLUNcbiAgICBjb25zdCBBID0gbmV3IFZlYzMoLTAuNSwgMC41LCAwLjUpO1xuICAgIGNvbnN0IEIgPSBuZXcgVmVjMygwLjUsIDAuNSwgMC41KTtcbiAgICBjb25zdCBDID0gbmV3IFZlYzMoMC41LCAtMC41LCAwLjUpO1xuICAgIGNvbnN0IEQgPSBuZXcgVmVjMygtMC41LCAtMC41LCAwLjUpO1xuXG4gICAgLy8gVVYg44Oe44OD44OU44Oz44KwXG4gICAgLy8gVUwgKDAsIDApIC0tIFVSICgxLCAwKVxuICAgIC8vICAgICAgfCAgICAgICAgICAgIHxcbiAgICAvLyAgICAgIHwgICAgICAgICAgICB8XG4gICAgLy8gTEwgKDAsIDEpIC0tIExSICgxLCAxKVxuICAgIGNvbnN0IFVMID0gbmV3IFZlYzIoMCwgMCk7XG4gICAgY29uc3QgVVIgPSBuZXcgVmVjMigxLCAwKTtcbiAgICBjb25zdCBMTCA9IG5ldyBWZWMyKDAsIDEpO1xuICAgIGNvbnN0IExSID0gbmV3IFZlYzIoMSwgMSk7XG5cbiAgICAvLyDog4zpnaLjgqvjg6rjg7PjgrDjga7jgZ/jgoHjgavjgIHlj43mmYLoqIjlm57jgorjgafntbHkuIDjgZfjgabjgYTjgotcbiAgICB0aGlzLmFkZEZhY2UoW0EsIEQsIEMsIEJdLCBbVUwsIExMLCBMUiwgVVJdKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRPZmZzZXRzKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy5nZXRWZXJ0aWNlcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOOCpOODs+OCueOCv+ODs+OCueOCkui/veWKoOOBmeOCi1xuICAgKiBAcGFyYW0gcG9zaXRpb24g44Kk44Oz44K544K/44Oz44K544Gu5L2N572uXG4gICAqIEBwYXJhbSB0ZXh0dXJlSWQg44OG44Kv44K544OB44Oj44GuIElEXG4gICAqIEBwYXJhbSBmYWNlIOOCpOODs+OCueOCv+ODs+OCueOBruWQkeOBje+8iOODh+ODleOCqeODq+ODiOaJi+WJjeOBjOWNl++8iVxuICAgKi9cbiAgcHVibGljIGFkZEluc3RhbmNlKHBvc2l0aW9uOiBWZWMzLCB0ZXh0dXJlSWQ6IG51bWJlciwgZmFjZSA9IEZhY2UuU09VVEgpOiB2b2lkIHtcbiAgICB0aGlzLmluc3RhbmNlUG9zaXRpb25zLnB1c2gocG9zaXRpb24pO1xuICAgIHRoaXMuaW5zdGFuY2VUZXh0dXJlSWRzLnB1c2godGV4dHVyZUlkKTtcbiAgICB0aGlzLmluc3RhbmNlUm90YXRpb25zLnB1c2goZmFjZSk7XG4gIH1cblxuICBwdWJsaWMgc2V0VGV4dHVyZUltYWdlcyh0ZXh0dXJlSW1hZ2VzOiBJbWFnZURhdGFbXSk6IHZvaWQge1xuICAgIHRoaXMudGV4dHVyZUltYWdlcyA9IHRleHR1cmVJbWFnZXM7XG4gIH1cblxuICBwdWJsaWMgZ2V0VGV4dHVyZUltYWdlcygpOiBJbWFnZURhdGFbXSB7XG4gICAgY29uc3QgYXJyOiBJbWFnZURhdGFbXSA9IFtdO1xuICAgIHRoaXMudGV4dHVyZUltYWdlcy5mb3JFYWNoKCh0ZXh0dXJlSW1hZ2UpID0+IHtcbiAgICAgIGFyci5wdXNoKHRleHR1cmVJbWFnZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRJbnN0YW5jZVBvc2l0aW9ucygpOiBudW1iZXJbXSB7XG4gICAgY29uc3QgYXJyOiBudW1iZXJbXSA9IFtdO1xuICAgIHRoaXMuaW5zdGFuY2VQb3NpdGlvbnMuZm9yRWFjaCgoaW5zdGFuY2VQb3NpdGlvbikgPT4ge1xuICAgICAgYXJyLnB1c2goLi4uaW5zdGFuY2VQb3NpdGlvbi50b0FycmF5KCkpO1xuICAgIH0pO1xuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICBwdWJsaWMgZ2V0SW5zdGFuY2VSb3RhdGlvbnMoKTogbnVtYmVyW10ge1xuICAgIGNvbnN0IGFycjogbnVtYmVyW10gPSBbXTtcbiAgICB0aGlzLmluc3RhbmNlUm90YXRpb25zLmZvckVhY2goKGluc3RhbmNlUm90YXRpb25zKSA9PiB7XG4gICAgICBhcnIucHVzaChpbnN0YW5jZVJvdGF0aW9ucyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRJbnN0YW5jZVRleHR1cmVJZHMoKTogbnVtYmVyW10ge1xuICAgIGNvbnN0IGFycjogbnVtYmVyW10gPSBbXTtcbiAgICB0aGlzLmluc3RhbmNlVGV4dHVyZUlkcy5mb3JFYWNoKChpbnN0YW5jZVRleHR1cmVJZCkgPT4ge1xuICAgICAgYXJyLnB1c2goaW5zdGFuY2VUZXh0dXJlSWQpO1xuICAgIH0pO1xuICAgIHJldHVybiBhcnI7XG4gIH1cblxuICBwdWJsaWMgZ2V0SW5zdGFuY2VDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlUG9zaXRpb25zLmxlbmd0aDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRWZXJ0ZXhDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmdldFZlcnRpY2VzKCkubGVuZ3RoIC8gMztcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgYFxuc3RydWN0IFZlcnRleE91dCB7XG4gIEBidWlsdGluKHBvc2l0aW9uKSBwb3NpdGlvbiA6IHZlYzRmLFxuICBAbG9jYXRpb24oMCkgZGlmZnVzZTogZjMyLFxuICBAbG9jYXRpb24oMSkgQGludGVycG9sYXRlKGZsYXQpIHRleHR1cmVJZDogdTMyLFxuICBAbG9jYXRpb24oMikgdXYgOiB2ZWMyZlxufVxuXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMCkgdmFyPHVuaWZvcm0+IG51bUxpZ2h0czogdTMyO1xuQGdyb3VwKDApIEBiaW5kaW5nKDEpIHZhcjx1bmlmb3JtPiBsaWdodHM6IGFycmF5PHZlYzNmLCAyMD47XG5AZ3JvdXAoMCkgQGJpbmRpbmcoMikgdmFyPHVuaWZvcm0+IHZpZXc6IG1hdDR4NGY7XG5AZ3JvdXAoMCkgQGJpbmRpbmcoMykgdmFyPHVuaWZvcm0+IHByb2plY3Rpb246IG1hdDR4NGY7XG5AZ3JvdXAoMCkgQGJpbmRpbmcoNCkgdmFyIG15U2FtcGxlcjogc2FtcGxlcjtcbkBncm91cCgwKSBAYmluZGluZyg1KSB2YXIgbXlUZXh0dXJlOiB0ZXh0dXJlXzJkX2FycmF5PGYzMj47XG5cbnZhcjxwcml2YXRlPiBtb2RlbCA9IGFycmF5PG1hdDR4NGYsIDY+KFxuICAvLyBUID0gKC1waS8yLCAwKVxuICBtYXQ0eDRmKDEuMCwgMC4wLCAwLjAsIDAuMCxcbiAgICAgIDAuMCwgMC4wLCAtMS4wLCAwLjAsXG4gICAgICAwLjAsIDEuMCwgMC4wLCAwLjAsXG4gICAgICAwLjAsIDAuMCwgMC4wLCAxLjApLFxuICAvLyBCID0gKHBpLzIsIDApXG4gIG1hdDR4NGYoMS4wLCAwLjAsIDAuMCwgMC4wLFxuICAgICAgMC4wLCAwLjAsIDEuMCwgMC4wLFxuICAgICAgMC4wLCAtMS4wLCAwLjAsIDAuMCxcbiAgICAgIDAuMCwgMC4wLCAwLjAsIDEuMCksXG4gIC8vIFMgPSAoMCwgMClcbiAgbWF0NHg0ZigxLjAsIDAuMCwgMC4wLCAwLjAsXG4gICAgICAwLjAsIDEuMCwgMC4wLCAwLjAsXG4gICAgICAwLjAsIDAuMCwgMS4wLCAwLjAsXG4gICAgICAwLjAsIDAuMCwgMC4wLCAxLjApLFxuICAvLyBOID0gKDAsIHBpKVxuICBtYXQ0eDRmKC0xLjAsIDAuMCwgMC4wLCAwLjAsXG4gICAgICAwLjAsIDEuMCwgMC4wLCAwLjAsXG4gICAgICAwLjAsIDAuMCwgLTEuMCwgMC4wLFxuICAgICAgMC4wLCAwLjAsIDAuMCwgMS4wKSxcbiAgLy8gRSA9ICgwLCBwaS8yKVxuICBtYXQ0eDRmKDAuMCwgMC4wLCAtMS4wLCAwLjAsXG4gICAgICAwLjAsIDEuMCwgMC4wLCAwLjAsXG4gICAgICAxLjAsIDAuMCwgMC4wLCAwLjAsXG4gICAgICAwLjAsIDAuMCwgMC4wLCAxLjApLFxuICAvLyBXID0gKDAsIC1waS8yKVxuICBtYXQ0eDRmKDAuMCwgMC4wLCAxLjAsIDAuMCxcbiAgICAgIDAuMCwgMS4wLCAwLjAsIDAuMCxcbiAgICAgIC0xLjAsIDAuMCwgMC4wLCAwLjAsXG4gICAgICAwLjAsIDAuMCwgMC4wLCAxLjApXG4pO1xuXG4vLyBUT0RPOiDlvozjgacgdW5pZm9ybSDjgafmuKHjgZvjgovjgojjgYbjgavjgZnjgotcbnZhcjxwcml2YXRlPiBzY2FsZSA9IG1hdDR4NGYoXG4gIDEuMCwgMC4wLCAwLjAsIDAuMCxcbiAgMC4wLCAxLjAsIDAuMCwgMC4wLFxuICAwLjAsIDAuMCwgMS4wLCAwLjAsXG4gIDAuMCwgMC4wLCAwLjAsIDEuMFxuKTtcblxuQHZlcnRleFxuZm4gdmVydGV4X21haW4oXG4gIEBsb2NhdGlvbigwKSBvZmZzZXQ6IHZlYzNmLFxuICBAbG9jYXRpb24oMSkgbm9ybWFsOiB2ZWMzZixcbiAgQGxvY2F0aW9uKDIpIHBvc2l0aW9uOiB2ZWMzZixcbiAgQGxvY2F0aW9uKDMpIHJvdGF0aW9uOiB1MzIsXG4gIEBsb2NhdGlvbig0KSB1djogdmVjMmYsXG4gIEBsb2NhdGlvbig1KSB0ZXh0dXJlSWQ6IHUzMlxuKSAtPiBWZXJ0ZXhPdXQge1xuICB2YXIgb3V0OiBWZXJ0ZXhPdXQ7XG4gIG91dC5wb3NpdGlvbiA9IHByb2plY3Rpb24gKiB2aWV3ICogKHZlYzRmKHBvc2l0aW9uLCAxLjApICsgc2NhbGUgKiBtb2RlbFtyb3RhdGlvbl0gKiB2ZWM0ZihvZmZzZXQsIDEuMCkpO1xuXG4gIC8vIOODqeOCpOODhuOCo+ODs+OCsFxuICAvLyBUT0RPOiDnkrDlooPlhYnjgavjgojjgovjg6njgqTjg4bjgqPjg7PjgrBcbiAgdmFyIGRpZmZ1c2UgPSAwLjA7XG4gIGZvciAodmFyIGkgPSAwdTsgaSA8IG51bUxpZ2h0czsgaSsrKSB7XG4gICAgZGlmZnVzZSArPSBtYXgoMC4wLCAtIGRvdChtb2RlbFtyb3RhdGlvbl0gKiB2ZWM0Zihub3JtYWxpemUobm9ybWFsKSwgMC4wKSwgdmVjNGYobm9ybWFsaXplKGxpZ2h0c1tpXSksIDAuMCkpKTtcbiAgfVxuICBvdXQuZGlmZnVzZSA9IGRpZmZ1c2U7XG5cbiAgb3V0LnRleHR1cmVJZCA9IHRleHR1cmVJZDtcbiAgb3V0LnV2ID0gdXY7XG4gIHJldHVybiBvdXQ7XG59XG5cbkBmcmFnbWVudFxuZm4gZnJhZ21lbnRfbWFpbihmcmFnRGF0YTogVmVydGV4T3V0KSAtPiBAbG9jYXRpb24oMCkgdmVjNGYge1xuICByZXR1cm4gdmVjNGYoZnJhZ0RhdGEuZGlmZnVzZSAqIHRleHR1cmVTYW1wbGUobXlUZXh0dXJlLCBteVNhbXBsZXIsIGZyYWdEYXRhLnV2LCBmcmFnRGF0YS50ZXh0dXJlSWQpLnJnYiwgMS4wKTtcbn1cbmA7XG4iLCJpbXBvcnQgeyBDYW1lcmEgfSBmcm9tICcuL2NhbWVyYSc7XG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gJy4vc2NlbmUnO1xuaW1wb3J0IHNoYWRlciBmcm9tICcuL3NoYWRlci53Z3NsJztcbmltcG9ydCB7IEluc3RhbmNlZE1lc2ggfSBmcm9tICcuL21lc2gvaW5zdGFuY2VkTWVzaCc7XG5cbmNvbnN0IGNsZWFyQ29sb3IgPSB7IHI6IDAuMCwgZzogMC4wLCBiOiAwLjAsIGE6IDEuMCB9O1xuXG5leHBvcnQgY2xhc3MgUmVuZGVyZXIge1xuICBwcml2YXRlIGN0eDogR1BVQ2FudmFzQ29udGV4dDtcbiAgcHJpdmF0ZSBkZXZpY2U6IEdQVURldmljZTtcbiAgcHJpdmF0ZSBkZXB0aFRleHR1cmU6IEdQVVRleHR1cmU7XG4gIHByaXZhdGUgcmVuZGVyUGlwZWxpbmU6IEdQVVJlbmRlclBpcGVsaW5lO1xuICBwcml2YXRlIHNhbXBsZXI6IEdQVVNhbXBsZXI7XG4gIHByaXZhdGUgbnVtTGlnaHRzQnVmZmVyOiBHUFVCdWZmZXI7XG4gIHByaXZhdGUgbGlnaHRzQnVmZmVyOiBHUFVCdWZmZXI7XG4gIHByaXZhdGUgdmlld0J1ZmZlcjogR1BVQnVmZmVyO1xuICBwcml2YXRlIHByb2plY3Rpb25CdWZmZXI6IEdQVUJ1ZmZlcjtcbiAgcHJpdmF0ZSBiaW5kaW5nczogTWFwPEluc3RhbmNlZE1lc2gsIHtcbiAgICBiaW5kR3JvdXA6IEdQVUJpbmRHcm91cCxcbiAgICBvZmZzZXRzOiBHUFVCdWZmZXIsXG4gICAgbm9ybWFsczogR1BVQnVmZmVyLFxuICAgIHBvc2l0aW9uczogR1BVQnVmZmVyLFxuICAgIHJvdGF0aW9uczogR1BVQnVmZmVyLFxuICAgIHV2czogR1BVQnVmZmVyLFxuICAgIHRleHR1cmVJZHM6IEdQVUJ1ZmZlclxuICB9PjtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoY3R4OiBHUFVDYW52YXNDb250ZXh0LCBkZXZpY2U6IEdQVURldmljZSkge1xuICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgIHRoaXMuZGV2aWNlID0gZGV2aWNlO1xuXG4gICAgY3R4LmNvbmZpZ3VyZSh7XG4gICAgICBkZXZpY2U6IGRldmljZSxcbiAgICAgIGZvcm1hdDogbmF2aWdhdG9yLmdwdS5nZXRQcmVmZXJyZWRDYW52YXNGb3JtYXQoKSxcbiAgICAgIGFscGhhTW9kZTogJ3ByZW11bHRpcGxpZWQnXG4gICAgfSk7XG5cbiAgICAvLyDjgq3jg6Pjg7Pjg5DjgrnjgrXjgqTjgrrjgpLlj6/lpInjgavjgZnjgovloLTlkIjjga/jgIFyZW5kZXIoKSDlhoXjgafjgoTjgaPjgZ/mlrnjgYzjgYTjgYTjgYvjgoLvvJ9cbiAgICB0aGlzLmRlcHRoVGV4dHVyZSA9IGRldmljZS5jcmVhdGVUZXh0dXJlKHtcbiAgICAgIHNpemU6IFtjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodF0sXG4gICAgICBmb3JtYXQ6ICdkZXB0aDI0cGx1cycsXG4gICAgICB1c2FnZTogR1BVVGV4dHVyZVVzYWdlLlJFTkRFUl9BVFRBQ0hNRU5UXG4gICAgfSk7XG5cbiAgICAvLyDjgajjgorjgYLjgYjjgZrjgIHjgrfjgqfjg7zjg4Djg7zjga/lm7rlrprjgavjgZnjgotcbiAgICBjb25zdCBzaGFkZXJNb2R1bGUgPSBkZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHtcbiAgICAgIGNvZGU6IHNoYWRlclxuICAgIH0pO1xuICAgIGNvbnN0IHZlcnRleEJ1ZmZlcnM6IEdQVVZlcnRleEJ1ZmZlckxheW91dFtdID0gW1xuICAgICAge1xuICAgICAgICAvLyBvZmZzZXRcbiAgICAgICAgYXR0cmlidXRlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNoYWRlckxvY2F0aW9uOiAwLFxuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgZm9ybWF0OiAnZmxvYXQzMngzJ1xuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGFycmF5U3RyaWRlOiA0ICogMyxcbiAgICAgICAgc3RlcE1vZGU6ICd2ZXJ0ZXgnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAvLyBub3JtYWxcbiAgICAgICAgYXR0cmlidXRlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNoYWRlckxvY2F0aW9uOiAxLFxuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgZm9ybWF0OiAnZmxvYXQzMngzJ1xuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGFycmF5U3RyaWRlOiA0ICogMyxcbiAgICAgICAgc3RlcE1vZGU6ICd2ZXJ0ZXgnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAvLyBwb3NpdGlvblxuICAgICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgc2hhZGVyTG9jYXRpb246IDIsXG4gICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICBmb3JtYXQ6ICdmbG9hdDMyeDMnXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgYXJyYXlTdHJpZGU6IDQgKiAzLFxuICAgICAgICBzdGVwTW9kZTogJ2luc3RhbmNlJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgLy8gcm90YXRpb25cbiAgICAgICAgYXR0cmlidXRlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNoYWRlckxvY2F0aW9uOiAzLFxuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgZm9ybWF0OiAndWludDMyJ1xuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGFycmF5U3RyaWRlOiA0LFxuICAgICAgICBzdGVwTW9kZTogJ2luc3RhbmNlJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgLy8gdXZcbiAgICAgICAgYXR0cmlidXRlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNoYWRlckxvY2F0aW9uOiA0LFxuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgZm9ybWF0OiAnZmxvYXQzMngyJ1xuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGFycmF5U3RyaWRlOiA0ICogMixcbiAgICAgICAgc3RlcE1vZGU6ICd2ZXJ0ZXgnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAvLyB0ZXh0dXJlSWRcbiAgICAgICAgYXR0cmlidXRlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNoYWRlckxvY2F0aW9uOiA1LFxuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgZm9ybWF0OiAndWludDMyJ1xuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGFycmF5U3RyaWRlOiA0LFxuICAgICAgICBzdGVwTW9kZTogJ2luc3RhbmNlJ1xuICAgICAgfVxuICAgIF07XG4gICAgY29uc3QgcGlwZWxpbmVEZXNjcmlwdG9yOiBHUFVSZW5kZXJQaXBlbGluZURlc2NyaXB0b3IgPSB7XG4gICAgICB2ZXJ0ZXg6IHtcbiAgICAgICAgbW9kdWxlOiBzaGFkZXJNb2R1bGUsXG4gICAgICAgIGVudHJ5UG9pbnQ6ICd2ZXJ0ZXhfbWFpbicsXG4gICAgICAgIGJ1ZmZlcnM6IHZlcnRleEJ1ZmZlcnNcbiAgICAgIH0sXG4gICAgICBmcmFnbWVudDoge1xuICAgICAgICBtb2R1bGU6IHNoYWRlck1vZHVsZSxcbiAgICAgICAgZW50cnlQb2ludDogJ2ZyYWdtZW50X21haW4nLFxuICAgICAgICB0YXJnZXRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZm9ybWF0OiBuYXZpZ2F0b3IuZ3B1LmdldFByZWZlcnJlZENhbnZhc0Zvcm1hdCgpLFxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHByaW1pdGl2ZToge1xuICAgICAgICB0b3BvbG9neTogJ3RyaWFuZ2xlLWxpc3QnLFxuICAgICAgICBjdWxsTW9kZTogJ2JhY2snXG4gICAgICB9LFxuICAgICAgbGF5b3V0OiAnYXV0bycsXG4gICAgICBkZXB0aFN0ZW5jaWw6IHtcbiAgICAgICAgZGVwdGhXcml0ZUVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGRlcHRoQ29tcGFyZTogJ2xlc3MnLFxuICAgICAgICBmb3JtYXQ6ICdkZXB0aDI0cGx1cydcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMucmVuZGVyUGlwZWxpbmUgPSBkZXZpY2UuY3JlYXRlUmVuZGVyUGlwZWxpbmUocGlwZWxpbmVEZXNjcmlwdG9yKTtcblxuICAgIHRoaXMuc2FtcGxlciA9IGRldmljZS5jcmVhdGVTYW1wbGVyKHtcbiAgICAgIG1hZ0ZpbHRlcjogJ2xpbmVhcicsXG4gICAgICBtaW5GaWx0ZXI6ICdsaW5lYXInXG4gICAgfSk7XG5cbiAgICB0aGlzLm51bUxpZ2h0c0J1ZmZlciA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICBzaXplOiA0LFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlVOSUZPUk0gfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVFxuICAgIH0pO1xuICAgIHRoaXMubGlnaHRzQnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgIC8vIOOCouODqeOCpOODoeODs+ODiOOBrumDveWQiOOBpyA0KjQg44Go44GZ44KLXG4gICAgICBzaXplOiA0ICogNCAqIDIwLFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlVOSUZPUk0gfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVFxuICAgIH0pO1xuICAgIHRoaXMudmlld0J1ZmZlciA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICBzaXplOiAxNiAqIDQsXG4gICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVU5JRk9STSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNUXG4gICAgfSk7XG4gICAgdGhpcy5wcm9qZWN0aW9uQnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgIHNpemU6IDE2ICogNCxcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5VTklGT1JNIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1RcbiAgICB9KTtcblxuICAgIHRoaXMuYmluZGluZ3MgPSBuZXcgTWFwKCk7XG4gIH1cblxuICAvKipcbiAgICog44K344O844Oz44KS5o+P55S744GZ44KLXG4gICAqIEBwYXJhbSBzY2VuZSDmj4/nlLvlr77osaHjga7jgrfjg7zjg7NcbiAgICogQHBhcmFtIGNhbWVyYSDmj4/nlLvjgavkvb/jgYbjgqvjg6Hjg6lcbiAgICovXG4gIHB1YmxpYyByZW5kZXIoc2NlbmU6IFNjZW5lLCBjYW1lcmE6IENhbWVyYSk6IHZvaWQge1xuICAgIGNvbnN0IGNvbW1hbmRFbmNvZGVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQ29tbWFuZEVuY29kZXIoKTtcblxuICAgIC8vIHVuaWZvcm0g44OH44O844K/44Gu5L2c5oiQXG4gICAgY29uc3QgbGlnaHRzID0gc2NlbmUuZ2V0TGlnaHRzKCk7XG4gICAgY29uc3QgbGlnaHRzRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkobGlnaHRzLmZsYXRNYXAoKGxpZ2h0KSA9PiB7XG4gICAgICAvLyDjgqLjg6njgqTjg6Hjg7Pjg4jjga7pg73lkIjjgafmnIDlvozjgasw44KS6L+95Yqg44GZ44KLXG4gICAgICByZXR1cm4gW2xpZ2h0LmdldFgoKSwgbGlnaHQuZ2V0WSgpLCBsaWdodC5nZXRaKCksIDBdO1xuICAgIH0pKTtcbiAgICBjb25zdCBudW1MaWdodHMgPSBuZXcgVWludDMyQXJyYXkoW2xpZ2h0cy5sZW5ndGhdKTtcbiAgICBjb25zdCB2aWV3ID0gbmV3IEZsb2F0MzJBcnJheShjYW1lcmEuZ2V0Vmlld01hdHJpeCgpLnRvQXJyYXkoKSk7XG4gICAgY29uc3QgcHJvamVjdGlvbiA9IG5ldyBGbG9hdDMyQXJyYXkoY2FtZXJhLmdldFByb2plY3Rpb25NYXRyaXgoKS50b0FycmF5KCkpO1xuXG4gICAgdGhpcy5kZXZpY2UucXVldWUud3JpdGVCdWZmZXIodGhpcy5udW1MaWdodHNCdWZmZXIsIDAsIG51bUxpZ2h0cywgMCwgbnVtTGlnaHRzLmxlbmd0aCk7XG4gICAgdGhpcy5kZXZpY2UucXVldWUud3JpdGVCdWZmZXIodGhpcy5saWdodHNCdWZmZXIsIDAsIGxpZ2h0c0RhdGEsIDAsIGxpZ2h0c0RhdGEubGVuZ3RoKTtcbiAgICB0aGlzLmRldmljZS5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLnZpZXdCdWZmZXIsIDAsIHZpZXcsIDAsIHZpZXcubGVuZ3RoKTtcbiAgICB0aGlzLmRldmljZS5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLnByb2plY3Rpb25CdWZmZXIsIDAsIHByb2plY3Rpb24sIDAsIHByb2plY3Rpb24ubGVuZ3RoKTtcblxuICAgIC8vIGNsZWFyXG4gICAgY29tbWFuZEVuY29kZXIuYmVnaW5SZW5kZXJQYXNzKHtcbiAgICAgIGNvbG9yQXR0YWNobWVudHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGNsZWFyVmFsdWU6IGNsZWFyQ29sb3IsXG4gICAgICAgICAgbG9hZE9wOiAnY2xlYXInLFxuICAgICAgICAgIHN0b3JlT3A6ICdzdG9yZScsXG4gICAgICAgICAgdmlldzogdGhpcy5jdHguZ2V0Q3VycmVudFRleHR1cmUoKS5jcmVhdGVWaWV3KClcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBkZXB0aFN0ZW5jaWxBdHRhY2htZW50OiB7XG4gICAgICAgIHZpZXc6IHRoaXMuZGVwdGhUZXh0dXJlLmNyZWF0ZVZpZXcoKSxcbiAgICAgICAgZGVwdGhDbGVhclZhbHVlOiAxLjAsXG4gICAgICAgIGRlcHRoTG9hZE9wOiAnY2xlYXInLFxuICAgICAgICBkZXB0aFN0b3JlT3A6ICdzdG9yZSdcbiAgICAgIH1cbiAgICB9KS5lbmQoKTtcblxuICAgIHNjZW5lLmdldE1lc2hlcygpLmZvckVhY2goKG1lc2gpID0+IHtcbiAgICAgIGxldCBiaW5kaW5nID0gdGhpcy5iaW5kaW5ncy5nZXQobWVzaCk7XG4gICAgICBpZiAoYmluZGluZyA9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHRleHR1cmVJbWFnZXMgPSBtZXNoLmdldFRleHR1cmVJbWFnZXMoKTtcbiAgICAgICAgLy8g5LiA44Gk55uu44GuIHdpZHRoIOOBqCBoZWlnaHQg44KS5L2/55SoXG4gICAgICAgIGNvbnN0IHRleHR1cmVXaWR0aCA9IHRleHR1cmVJbWFnZXNbMF0ud2lkdGg7XG4gICAgICAgIGNvbnN0IHRleHR1cmVIZWlnaHQgPSB0ZXh0dXJlSW1hZ2VzWzBdLmhlaWdodDtcbiAgICAgICAgY29uc3QgdGV4dHVyZUNvdW50ID0gdGV4dHVyZUltYWdlcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSB0aGlzLmRldmljZS5jcmVhdGVUZXh0dXJlKHtcbiAgICAgICAgICBzaXplOiBbXG4gICAgICAgICAgICB0ZXh0dXJlV2lkdGgsXG4gICAgICAgICAgICB0ZXh0dXJlSGVpZ2h0LFxuICAgICAgICAgICAgLy8gbGF5ZXIg44GMIDEg44Gg44GoIHRleHR1cmVfMmRfYXJyYXkg44Go44GX44Gm5omx44KP44KM44Gq44GE44Gu44Gn44CBXG4gICAgICAgICAgICAvLyAy5Lul5LiK44Gu5YCk44Gr44Gq44KL44KI44GG44Gr44GZ44KLXG4gICAgICAgICAgICBNYXRoLm1heCh0ZXh0dXJlQ291bnQsIDIpXG4gICAgICAgICAgXSxcbiAgICAgICAgICBmb3JtYXQ6ICdyZ2JhOHVub3JtJyxcbiAgICAgICAgICB1c2FnZTogR1BVVGV4dHVyZVVzYWdlLlRFWFRVUkVfQklORElORyB8XG4gICAgICAgICAgICBHUFVUZXh0dXJlVXNhZ2UuQ09QWV9EU1QgfFxuICAgICAgICAgICAgR1BVVGV4dHVyZVVzYWdlLlJFTkRFUl9BVFRBQ0hNRU5UXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0ZXh0dXJlQnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgICAgICBzaXplOiB0ZXh0dXJlV2lkdGggKiB0ZXh0dXJlSGVpZ2h0ICogdGV4dHVyZUNvdW50ICogNCxcbiAgICAgICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuQ09QWV9TUkMsXG4gICAgICAgICAgbWFwcGVkQXRDcmVhdGlvbjogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcGl4ZWxEYXRhID0gbmV3IFVpbnQ4QXJyYXkodGV4dHVyZUJ1ZmZlci5nZXRNYXBwZWRSYW5nZSgpKTtcbiAgICAgICAgdGV4dHVyZUltYWdlcy5mb3JFYWNoKCh0ZXh0dXJlSW1hZ2UsIGlkeCkgPT4ge1xuICAgICAgICAgIHBpeGVsRGF0YS5zZXQodGV4dHVyZUltYWdlLmRhdGEsIHRleHR1cmVXaWR0aCAqIHRleHR1cmVIZWlnaHQgKiBpZHggKiA0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRleHR1cmVCdWZmZXIudW5tYXAoKTtcblxuICAgICAgICAvLyBUT0RPOiDjg4bjgq/jgrnjg4Hjg6Pjga7luYXjgYwgNjQg44OU44Kv44K744Or77yIMjU2IOODkOOCpOODiO+8ieOBmOOCg+OBquOBhOOBqOiqreOBv+i+vOOCgeOBquOBhOWVj+mhjOOBquOCk+OBqOOBi+OBl+OBn+OBhFxuICAgICAgICAvLyBieXRlc1BlclJvdyAoNjQpIGlzIG5vdCBhIG11bHRpcGxlIG9mIDI1Ni5cbiAgICAgICAgY29tbWFuZEVuY29kZXIuY29weUJ1ZmZlclRvVGV4dHVyZShcbiAgICAgICAgICB7XG4gICAgICAgICAgICBidWZmZXI6IHRleHR1cmVCdWZmZXIsXG4gICAgICAgICAgICBieXRlc1BlclJvdzogdGV4dHVyZVdpZHRoICogNCxcbiAgICAgICAgICAgIHJvd3NQZXJJbWFnZTogdGV4dHVyZUhlaWdodFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgd2lkdGg6IHRleHR1cmVXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdGV4dHVyZUhlaWdodCxcbiAgICAgICAgICAgIGRlcHRoT3JBcnJheUxheWVyczogdGV4dHVyZUNvdW50XG4gICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGJpbmRHcm91cCA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJpbmRHcm91cCh7XG4gICAgICAgICAgbGF5b3V0OiB0aGlzLnJlbmRlclBpcGVsaW5lLmdldEJpbmRHcm91cExheW91dCgwKSxcbiAgICAgICAgICBlbnRyaWVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGJpbmRpbmc6IDAsXG4gICAgICAgICAgICAgIHJlc291cmNlOiB7XG4gICAgICAgICAgICAgICAgYnVmZmVyOiB0aGlzLm51bUxpZ2h0c0J1ZmZlclxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgYmluZGluZzogMSxcbiAgICAgICAgICAgICAgcmVzb3VyY2U6IHtcbiAgICAgICAgICAgICAgICBidWZmZXI6IHRoaXMubGlnaHRzQnVmZmVyXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBiaW5kaW5nOiAyLFxuICAgICAgICAgICAgICByZXNvdXJjZToge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcjogdGhpcy52aWV3QnVmZmVyXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBiaW5kaW5nOiAzLFxuICAgICAgICAgICAgICByZXNvdXJjZToge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcjogdGhpcy5wcm9qZWN0aW9uQnVmZmVyXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBiaW5kaW5nOiA0LFxuICAgICAgICAgICAgICByZXNvdXJjZTogdGhpcy5zYW1wbGVyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBiaW5kaW5nOiA1LFxuICAgICAgICAgICAgICByZXNvdXJjZTogdGV4dHVyZS5jcmVhdGVWaWV3KClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOS4gOaXpuabtOaWsOOBleOCjOOBquOBhOOCguOBruOBqOOBmeOCi1xuICAgICAgICAvLyBvZmZzZXRcbiAgICAgICAgY29uc3Qgb2Zmc2V0cyA9IG5ldyBGbG9hdDMyQXJyYXkobWVzaC5nZXRPZmZzZXRzKCkpO1xuICAgICAgICBjb25zdCBvZmZzZXRCdWZmZXIgPSB0aGlzLmRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgICAgICAgIHNpemU6IG9mZnNldHMuYnl0ZUxlbmd0aCxcbiAgICAgICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVkVSVEVYIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1RcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGV2aWNlLnF1ZXVlLndyaXRlQnVmZmVyKG9mZnNldEJ1ZmZlciwgMCwgb2Zmc2V0cywgMCwgb2Zmc2V0cy5sZW5ndGgpO1xuICAgICAgICAvLyBub3JtYWxcbiAgICAgICAgY29uc3Qgbm9ybWFscyA9IG5ldyBGbG9hdDMyQXJyYXkobWVzaC5nZXROb3JtYWxzKCkpO1xuICAgICAgICBjb25zdCBub3JtYWxCdWZmZXIgPSB0aGlzLmRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgICAgICAgIHNpemU6IG5vcm1hbHMuYnl0ZUxlbmd0aCxcbiAgICAgICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVkVSVEVYIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1RcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGV2aWNlLnF1ZXVlLndyaXRlQnVmZmVyKG5vcm1hbEJ1ZmZlciwgMCwgbm9ybWFscywgMCwgbm9ybWFscy5sZW5ndGgpO1xuICAgICAgICAvLyBwb3RpdGlvblxuICAgICAgICBjb25zdCBwb3NpdGlvbnMgPSBuZXcgRmxvYXQzMkFycmF5KG1lc2guZ2V0SW5zdGFuY2VQb3NpdGlvbnMoKSk7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uQnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgICAgICBzaXplOiBwb3NpdGlvbnMuYnl0ZUxlbmd0aCxcbiAgICAgICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVkVSVEVYIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1RcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGV2aWNlLnF1ZXVlLndyaXRlQnVmZmVyKHBvc2l0aW9uQnVmZmVyLCAwLCBwb3NpdGlvbnMsIDAsIHBvc2l0aW9ucy5sZW5ndGgpO1xuICAgICAgICAvLyByb3RhdGlvblxuICAgICAgICBjb25zdCByb3RhdGlvbnMgPSBuZXcgVWludDMyQXJyYXkobWVzaC5nZXRJbnN0YW5jZVJvdGF0aW9ucygpKTtcbiAgICAgICAgY29uc3Qgcm90YXRpb25CdWZmZXIgPSB0aGlzLmRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgICAgICAgIHNpemU6IHJvdGF0aW9ucy5ieXRlTGVuZ3RoLFxuICAgICAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5WRVJURVggfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kZXZpY2UucXVldWUud3JpdGVCdWZmZXIocm90YXRpb25CdWZmZXIsIDAsIHJvdGF0aW9ucywgMCwgcm90YXRpb25zLmxlbmd0aCk7XG4gICAgICAgIC8vIHV2XG4gICAgICAgIGNvbnN0IHV2cyA9IG5ldyBGbG9hdDMyQXJyYXkobWVzaC5nZXRVVkNvb3JkcygpKTtcbiAgICAgICAgY29uc3QgdXZCdWZmZXIgPSB0aGlzLmRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgICAgICAgIHNpemU6IHV2cy5ieXRlTGVuZ3RoLFxuICAgICAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5WRVJURVggfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kZXZpY2UucXVldWUud3JpdGVCdWZmZXIodXZCdWZmZXIsIDAsIHV2cywgMCwgdXZzLmxlbmd0aCk7XG4gICAgICAgIC8vIHRleHR1cmVJZFxuICAgICAgICBjb25zdCB0ZXh0dXJlSWRzID0gbmV3IFVpbnQzMkFycmF5KG1lc2guZ2V0SW5zdGFuY2VUZXh0dXJlSWRzKCkpO1xuICAgICAgICBjb25zdCB0ZXh0dXJlSWRCdWZmZXIgPSB0aGlzLmRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgICAgICAgIHNpemU6IHRleHR1cmVJZHMuYnl0ZUxlbmd0aCxcbiAgICAgICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVkVSVEVYIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1RcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGV2aWNlLnF1ZXVlLndyaXRlQnVmZmVyKHRleHR1cmVJZEJ1ZmZlciwgMCwgdGV4dHVyZUlkcywgMCwgdGV4dHVyZUlkcy5sZW5ndGgpO1xuICAgICAgICBiaW5kaW5nID0ge1xuICAgICAgICAgIGJpbmRHcm91cDogYmluZEdyb3VwLFxuICAgICAgICAgIG9mZnNldHM6IG9mZnNldEJ1ZmZlcixcbiAgICAgICAgICBub3JtYWxzOiBub3JtYWxCdWZmZXIsXG4gICAgICAgICAgcG9zaXRpb25zOiBwb3NpdGlvbkJ1ZmZlcixcbiAgICAgICAgICByb3RhdGlvbnM6IHJvdGF0aW9uQnVmZmVyLFxuICAgICAgICAgIHV2czogdXZCdWZmZXIsXG4gICAgICAgICAgdGV4dHVyZUlkczogdGV4dHVyZUlkQnVmZmVyXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYmluZGluZ3Muc2V0KG1lc2gsIGJpbmRpbmcpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVuZGVyUGFzcyA9IGNvbW1hbmRFbmNvZGVyLmJlZ2luUmVuZGVyUGFzcyh7XG4gICAgICAgIGNvbG9yQXR0YWNobWVudHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsb2FkT3A6ICdsb2FkJyxcbiAgICAgICAgICAgIHN0b3JlT3A6ICdzdG9yZScsXG4gICAgICAgICAgICB2aWV3OiB0aGlzLmN0eC5nZXRDdXJyZW50VGV4dHVyZSgpLmNyZWF0ZVZpZXcoKVxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGRlcHRoU3RlbmNpbEF0dGFjaG1lbnQ6IHtcbiAgICAgICAgICB2aWV3OiB0aGlzLmRlcHRoVGV4dHVyZS5jcmVhdGVWaWV3KCksXG4gICAgICAgICAgZGVwdGhMb2FkT3A6ICdsb2FkJyxcbiAgICAgICAgICBkZXB0aFN0b3JlT3A6ICdzdG9yZSdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZW5kZXJQYXNzLnNldFBpcGVsaW5lKHRoaXMucmVuZGVyUGlwZWxpbmUpO1xuICAgICAgcmVuZGVyUGFzcy5zZXRCaW5kR3JvdXAoMCwgYmluZGluZy5iaW5kR3JvdXApO1xuICAgICAgcmVuZGVyUGFzcy5zZXRWZXJ0ZXhCdWZmZXIoMCwgYmluZGluZy5vZmZzZXRzKTtcbiAgICAgIHJlbmRlclBhc3Muc2V0VmVydGV4QnVmZmVyKDEsIGJpbmRpbmcubm9ybWFscyk7XG4gICAgICByZW5kZXJQYXNzLnNldFZlcnRleEJ1ZmZlcigyLCBiaW5kaW5nLnBvc2l0aW9ucyk7XG4gICAgICByZW5kZXJQYXNzLnNldFZlcnRleEJ1ZmZlcigzLCBiaW5kaW5nLnJvdGF0aW9ucyk7XG4gICAgICByZW5kZXJQYXNzLnNldFZlcnRleEJ1ZmZlcig0LCBiaW5kaW5nLnV2cyk7XG4gICAgICByZW5kZXJQYXNzLnNldFZlcnRleEJ1ZmZlcig1LCBiaW5kaW5nLnRleHR1cmVJZHMpO1xuICAgICAgcmVuZGVyUGFzcy5kcmF3KG1lc2guZ2V0VmVydGV4Q291bnQoKSwgbWVzaC5nZXRJbnN0YW5jZUNvdW50KCkpO1xuICAgICAgcmVuZGVyUGFzcy5lbmQoKTtcbiAgICB9KTtcbiAgICB0aGlzLmRldmljZS5xdWV1ZS5zdWJtaXQoW2NvbW1hbmRFbmNvZGVyLmZpbmlzaCgpXSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IExpZ2h0IH0gZnJvbSAnLi9saWdodCc7XG5pbXBvcnQgeyBJbnN0YW5jZWRNZXNoIH0gZnJvbSAnLi9tZXNoL2luc3RhbmNlZE1lc2gnO1xuXG5leHBvcnQgY2xhc3MgU2NlbmUge1xuICBwcml2YXRlIG1lc2hlczogSW5zdGFuY2VkTWVzaFtdO1xuICBwcml2YXRlIGxpZ2h0czogTGlnaHRbXTtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoKTtcbiAgcHVibGljIGNvbnN0cnVjdG9yKG1lc2hlczogSW5zdGFuY2VkTWVzaFtdLCBsaWdodHM6IExpZ2h0W10pO1xuICBwdWJsaWMgY29uc3RydWN0b3IobWVzaGVzPzogSW5zdGFuY2VkTWVzaFtdLCBsaWdodHM/OiBMaWdodFtdKSB7XG4gICAgaWYgKG1lc2hlcyAhPSBudWxsKSB7XG4gICAgICB0aGlzLm1lc2hlcyA9IG1lc2hlcztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tZXNoZXMgPSBbXTtcbiAgICB9XG4gICAgaWYgKGxpZ2h0cyAhPSBudWxsKSB7XG4gICAgICB0aGlzLmxpZ2h0cyA9IGxpZ2h0cztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5saWdodHMgPSBbXTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0TGlnaHRzKCk6IExpZ2h0W10ge1xuICAgIHJldHVybiB0aGlzLmxpZ2h0cztcbiAgfVxuXG4gIHB1YmxpYyBnZXRNZXNoZXMoKTogSW5zdGFuY2VkTWVzaFtdIHtcbiAgICByZXR1cm4gdGhpcy5tZXNoZXM7XG4gIH1cblxuICAvKipcbiAgICog44K344O844Oz44Gr44Oh44OD44K344Ol44KS6L+95Yqg44GZ44KLXG4gICAqIEBwYXJhbSBtZXNoIOi/veWKoOOBmeOCi+ODoeODg+OCt+ODpVxuICAgKi9cbiAgcHVibGljIGFkZE1lc2gobWVzaDogSW5zdGFuY2VkTWVzaCk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1lc2hlcy5pbmRleE9mKG1lc2gpIDwgMCkge1xuICAgICAgdGhpcy5tZXNoZXMucHVzaChtZXNoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44K344O844Oz44GL44KJ44Oh44OD44K344Ol44KS5Y+W44KK6Zmk44GPXG4gICAqIEBwYXJhbSBtZXNoIOWPluOCiumZpOOBj+ODoeODg+OCt+ODpVxuICAgKi9cbiAgcHVibGljIHJlbW92ZU1lc2gobWVzaDogSW5zdGFuY2VkTWVzaCk6IHZvaWQge1xuICAgIGNvbnN0IGlkeCA9IHRoaXMubWVzaGVzLmluZGV4T2YobWVzaCk7XG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICB0aGlzLm1lc2hlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44K344O844Oz44Gr44Op44Kk44OI44KS6L+95Yqg44GZ44KLXG4gICAqIEBwYXJhbSBsaWdodCDov73liqDjgZnjgovjg6njgqTjg4hcbiAgICovXG4gIHB1YmxpYyBhZGRMaWdodChsaWdodDogTGlnaHQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5saWdodHMuaW5kZXhPZihsaWdodCkgPCAwKSB7XG4gICAgICB0aGlzLmxpZ2h0cy5wdXNoKGxpZ2h0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44K344O844Oz44GL44KJ44Op44Kk44OI44KS5Y+W44KK6Zmk44GPXG4gICAqIEBwYXJhbSBsaWdodCDlj5bjgorpmaTjgY/jg6njgqTjg4hcbiAgICovXG4gIHB1YmxpYyByZW1vdmVMaWdodChsaWdodDogTGlnaHQpOiB2b2lkIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLmxpZ2h0cy5pbmRleE9mKGxpZ2h0KTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgIHRoaXMubGlnaHRzLnNwbGljZShpZHgsIDEpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgUGVyc3BlY3RpdmVDYW1lcmEgfSBmcm9tICcuL2NhbWVyYSc7XG5pbXBvcnQgeyBGUFNLZXlib2FyZCwgRlBTTW91c2UsIHdoZWVsWm9vbSB9IGZyb20gJy4vaW5wdXQnO1xuaW1wb3J0IHsgTGlnaHQgfSBmcm9tICcuL2xpZ2h0JztcbmltcG9ydCB7IGxvYWRPYmogfSBmcm9tICcuL2xvYWRlcic7XG5pbXBvcnQgeyBJbnN0YW5jZWRDdWJlIH0gZnJvbSAnLi9tZXNoL2luc3RhbmNlZEN1YmUnO1xuaW1wb3J0IHsgSW5zdGFuY2VkQ3VzdG9tTWVzaCB9IGZyb20gJy4vbWVzaC9pbnN0YW5jZWRDdXN0b21NZXNoJztcbmltcG9ydCB7IEluc3RhbmNlZFNxdWFyZSB9IGZyb20gJy4vbWVzaC9pbnN0YW5jZWRTcXVhcmUnO1xuaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVyJztcbmltcG9ydCB7IFNjZW5lIH0gZnJvbSAnLi9zY2VuZSc7XG5pbXBvcnQgeyBmZXRjaEltYWdlRGF0YSB9IGZyb20gJy4vdXRpbCc7XG5pbXBvcnQgeyBWZWMzIH0gZnJvbSAnLi92ZWN0b3InO1xuXG4vKipcbiAqIEV4YW1wbGVcbiAqL1xuXG53aW5kb3cub25sb2FkID0gYXN5bmMgKCkgPT4ge1xuICAvLy8vLy8vLy8vIOiruOOAhea6luWCmSAvLy8vLy8vLy8vXG5cbiAgLy8gR1BVRGV2aWNlIOOBruWPluW+l1xuICBjb25zdCBjdnMgPSBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpKTtcbiAgY3ZzLndpZHRoID0gMTAwMDtcbiAgY3ZzLmhlaWdodCA9IDUwMDtcbiAgY29uc3QgY3R4ID0gY3ZzLmdldENvbnRleHQoJ3dlYmdwdScpO1xuICBpZiAoY3R4ID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgYWRhcHRlciA9IGF3YWl0IG5hdmlnYXRvci5ncHUucmVxdWVzdEFkYXB0ZXIoKTtcbiAgaWYgKGFkYXB0ZXIgPT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBkZXZpY2UgPSBhd2FpdCBhZGFwdGVyLnJlcXVlc3REZXZpY2UoKTtcblxuICAvLyDmg4XloLHooajnpLpcbiAgY29uc3QgaW5mbyA9IGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncHJlJykpO1xuXG4gIC8vIGNhbWVyYVxuICBjb25zdCBjYW1lcmEgPSBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoXG4gICAgbmV3IFZlYzMoMCwgMCwgMTApLCAvLyBwb3NcbiAgICBuZXcgVmVjMygwLCAwLCAwKSwgIC8vIHJvdFxuICAgICg3MCAvIDE4MCkgKiBNYXRoLlBJLCAvLyBmb3ZcbiAgICBjdnMud2lkdGggLyBjdnMuaGVpZ2h0LCAvLyBhc3BlY3QsIHcvaFxuICAgIDAuNSwgLy8gbmVhclxuICAgIDEwMCAvLyBmYXJcbiAgKTtcblxuICAvLyBzY2VuZVxuICBjb25zdCBzY2VuZSA9IG5ldyBTY2VuZSgpO1xuXG4gIC8vIGxpZ2h0XG4gIHNjZW5lLmFkZExpZ2h0KG5ldyBMaWdodCgxLCAyLCAzKSk7XG4gIHNjZW5lLmFkZExpZ2h0KG5ldyBMaWdodCgtMSwgLTIsIC0zKSk7XG5cbiAgLy8gbWVzaFxuICAvLyDjgajjgorjgYLjgYjjgZrjg6njg7Pjg4Djg6DjgarkvY3nva7jgavkvZXlgIvjgYvpganlvZPjgavlh7rjgZlcbiAgZnVuY3Rpb24gcmFuZG9tQ29vcmQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICB9XG5cbiAgY29uc3QgbWVzaDEgPSBuZXcgSW5zdGFuY2VkQ3ViZSgpO1xuICBtZXNoMS5zZXRUZXh0dXJlSW1hZ2VzKFtcbiAgICBhd2FpdCBmZXRjaEltYWdlRGF0YSgnLi90ZXh0dXJlL2RpY2UucG5nJylcbiAgXSk7XG4gIHNjZW5lLmFkZE1lc2gobWVzaDEpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7XG4gICAgbWVzaDEuYWRkSW5zdGFuY2UobmV3IFZlYzMoXG4gICAgICByYW5kb21Db29yZCgpLFxuICAgICAgcmFuZG9tQ29vcmQoKSxcbiAgICAgIHJhbmRvbUNvb3JkKClcbiAgICApLCAwLCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2KSk7XG4gIH1cblxuICBjb25zdCBtZXNoMiA9IG5ldyBJbnN0YW5jZWRDdWJlKCk7XG4gIG1lc2gyLnNldFRleHR1cmVJbWFnZXMoW1xuICAgIGF3YWl0IGZldGNoSW1hZ2VEYXRhKCcuL3RleHR1cmUvZGljZTIucG5nJylcbiAgXSk7XG4gIHNjZW5lLmFkZE1lc2gobWVzaDIpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7XG4gICAgbWVzaDIuYWRkSW5zdGFuY2UobmV3IFZlYzMoXG4gICAgICByYW5kb21Db29yZCgpICsgMTAsXG4gICAgICByYW5kb21Db29yZCgpICsgMTAsXG4gICAgICByYW5kb21Db29yZCgpICsgMTBcbiAgICApLCAwKTtcbiAgfVxuXG4gIC8vIHNxdWFyZSDniYhcbiAgY29uc3QgbWVzaDMgPSBuZXcgSW5zdGFuY2VkU3F1YXJlKCk7XG4gIG1lc2gzLnNldFRleHR1cmVJbWFnZXMoW1xuICAgIGF3YWl0IGZldGNoSW1hZ2VEYXRhKCcuL3RleHR1cmUvd2hpdGUucG5nJyksXG4gICAgYXdhaXQgZmV0Y2hJbWFnZURhdGEoJy4vdGV4dHVyZS95ZWxsb3cucG5nJylcbiAgXSk7XG4gIHNjZW5lLmFkZE1lc2gobWVzaDMpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7XG4gICAgbWVzaDMuYWRkSW5zdGFuY2UobmV3IFZlYzMoXG4gICAgICByYW5kb21Db29yZCgpIC0gMTAsXG4gICAgICByYW5kb21Db29yZCgpIC0gMTAsXG4gICAgICByYW5kb21Db29yZCgpIC0gMTBcbiAgICApLCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSwgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNikpO1xuICB9XG5cbiAgLy8gTWluZXdheXMg44Gu5Ye65Yqb44KS6Kqt44G/6L6844G/XG4gIGNvbnN0IG9iaiA9IGF3YWl0IGxvYWRPYmooJy4vb2JqL2V4YW1wbGUub2JqJyk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqLm9iamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBtZXNoNCA9IG5ldyBJbnN0YW5jZWRDdXN0b21NZXNoKFxuICAgICAgb2JqLnYsXG4gICAgICBvYmoudm4sXG4gICAgICBvYmoudnQsXG4gICAgICBvYmoub2JqZWN0c1tpXS5mXG4gICAgKTtcbiAgICBjb25zdCBtdGwgPSBvYmoubWF0ZXJpYWxzLmZpbmQobWF0ZXJpYWwgPT4gbWF0ZXJpYWwubmFtZSA9PSBvYmoub2JqZWN0c1tpXS5tdGxOYW1lKTtcbiAgICBpZiAobXRsICE9IG51bGwgJiYgbXRsLm1hcEtkICE9IG51bGwpIHtcbiAgICAgIG1lc2g0LnNldFRleHR1cmVJbWFnZXMoW1xuICAgICAgICBhd2FpdCBmZXRjaEltYWdlRGF0YShtdGwubWFwS2QpXG4gICAgICBdKTtcbiAgICB9XG4gICAgc2NlbmUuYWRkTWVzaChtZXNoNCk7XG4gIH1cblxuICAvLyByZW5kZXJlclxuICBjb25zdCByZW5kZXJlciA9IG5ldyBSZW5kZXJlcihjdHgsIGRldmljZSk7XG5cbiAgLy8vLy8vLy8vLyDjg6vjg7zjg5fpg6jliIYgLy8vLy8vLy8vL1xuXG4gIC8vIOOCreODvOODu+ODnuOCpuOCueWFpeWKm+WHpueQhlxuICBjb25zdCBrZXlib2FyZCA9IG5ldyBGUFNLZXlib2FyZCh3aW5kb3cpO1xuICBuZXcgRlBTTW91c2Uod2luZG93LCBjYW1lcmEpO1xuICB3aGVlbFpvb20oY2FtZXJhKTtcblxuICAvLyDjg5Hjg6njg6Hjg7zjgr/lm57jgopcbiAgbGV0IHJlcXVlc3RJZDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIGxldCBsYXN0VGltZXN0YW1wID0gMDtcblxuICAvLyDjgqvjg6Hjg6njga7np7vli5XpgJ/luqZcbiAgbGV0IHZMUiA9IDA7XG4gIGxldCB2VUQgPSAwO1xuICBsZXQgdkZCID0gMDtcbiAgZnVuY3Rpb24gZ2V0Q2FtVmVsKHB2OiBudW1iZXIsIGN2OiBudW1iZXIpIHtcbiAgICAvLyDliqDpgJ/luqbnhKHjgZfjga7loLTlkIjjga8gY3Yg44KS44Gd44Gu44G+44G+6L+U44GZXG4gICAgLy8gcmV0dXJuIGN2O1xuXG4gICAgaWYgKGN2ID09IDAgfHwgcHYgKiBjdiA8IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSBpZiAocHYgPD0gLTEgfHwgcHYgPj0gMSkge1xuICAgICAgcmV0dXJuIHB2O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcHYgKyAwLjA1ICogY3Y7XG4gICAgfVxuICB9XG5cbiAgLy8g44Ki44OL44Oh44O844K344On44Oz5Yem55CGXG4gIGNvbnN0IHN0ZXAgPSBhc3luYyAodGltZXN0YW1wOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCB0aW1lR2FwID0gdGltZXN0YW1wIC0gKGxhc3RUaW1lc3RhbXAgfHwgdGltZXN0YW1wKTtcbiAgICBsYXN0VGltZXN0YW1wID0gdGltZXN0YW1wO1xuXG4gICAgLyoqKiDmj4/nlLvlh6bnkIbjgZPjgZPjgYvjgokgKioqL1xuXG4gICAgLy8g44Kr44Oh44Op44Gu5L2N572u44KS5pu05pawXG4gICAgdkxSID0gZ2V0Q2FtVmVsKHZMUiwga2V5Ym9hcmQuZ2V0TFIoKSk7XG4gICAgdlVEID0gZ2V0Q2FtVmVsKHZVRCwga2V5Ym9hcmQuZ2V0VUQoKSk7XG4gICAgdkZCID0gZ2V0Q2FtVmVsKHZGQiwga2V5Ym9hcmQuZ2V0RkIoKSk7XG4gICAgY2FtZXJhLm1vdmUobmV3IFZlYzMoXG4gICAgICB2TFIgKiB0aW1lR2FwIC8gNTAsXG4gICAgICB2VUQgKiB0aW1lR2FwIC8gNTAsXG4gICAgICB2RkIgKiB0aW1lR2FwIC8gNTBcbiAgICApKTtcblxuICAgIC8vIOaPj+eUu1xuICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTtcblxuICAgIC8vIOaDheWgseihqOekulxuICAgIGluZm8udGV4dENvbnRlbnQgPSBgRlBTOiAkezEgLyB0aW1lR2FwICogMTAwMH1cbmNhbWVyYVBvc1g6ICR7Y2FtZXJhLnBvc2l0aW9uLnh9XG5jYW1lcmFQb3NZOiAke2NhbWVyYS5wb3NpdGlvbi55fVxuY2FtZXJhUG9zWjogJHtjYW1lcmEucG9zaXRpb24uen1cbmNhbWVyYVJvdFg6ICR7Y2FtZXJhLnJvdGF0aW9uLnh9XG5jYW1lcmFSb3RZOiAke2NhbWVyYS5yb3RhdGlvbi55fVxuY2FtZXJhUm90WjogJHtjYW1lcmEucm90YXRpb24uen1cbmNhbWVyYUZvdjogJHtjYW1lcmEuZm92fWA7XG5cbiAgICAvKioqIOaPj+eUu+WHpueQhuOBk+OBk+OBvuOBpyAqKiovXG5cbiAgICByZXF1ZXN0SWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gIH07XG5cbiAgLy8g44Od44Kk44Oz44K/44Ot44OD44Kv44G+44KP44KK44Gu5Yem55CGXG4gIC8vIOOBqOOCiuOBguOBiOOBmumbkeOBq+Wun+ijhVxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybG9ja2NoYW5nZScsICgpID0+IHtcbiAgICBpZiAoZG9jdW1lbnQucG9pbnRlckxvY2tFbGVtZW50ID09IG51bGwpIHtcbiAgICAgIGlmIChyZXF1ZXN0SWQgIT0gbnVsbCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShyZXF1ZXN0SWQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsYXN0VGltZXN0YW1wID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICByZXF1ZXN0SWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gICAgfVxuICB9LCBmYWxzZSk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGRvY3VtZW50LmJvZHkucmVxdWVzdFBvaW50ZXJMb2NrKCk7XG4gIH0sIGZhbHNlKTtcbn07XG4iXSwibmFtZXMiOlsiTWF0cml4IiwibSIsIm4iLCJhcnIiLCJ0aGlzIiwibGVuZ3RoIiwiRXJyb3IiLCJtYXRyaXgiLCJpIiwiaiIsInNldFZhbHVlIiwidmFsdWUiLCJnZXRWYWx1ZSIsIm11bCIsIm1hdCIsIm5ld01hdCIsInN1bSIsImsiLCJ0b0FycmF5IiwiUGVyc3BlY3RpdmVDYW1lcmEiLCJwb3RpdGlvbiIsInJvdGF0aW9uIiwiZm92IiwiYXNwZWN0IiwibmVhciIsImZhciIsInBvc2l0aW9uIiwiZ2V0Um90YXRlTWF0cml4IiwiTWF0aCIsImNvcyIsIngiLCJzaW4iLCJ5IiwiZ2V0VHJhbnNsYXRlTWF0cml4IiwieiIsImdldEludlJvdGF0ZU1hdHJpeEZvck1vdmUiLCJtb3ZlIiwibW90aW9uIiwiY29udmVydGVkIiwicm90YXRlIiwibWluIiwibWF4IiwiUEkiLCJnZXRWaWV3TWF0cml4IiwiZ2V0UHJvamVjdGlvbk1hdHJpeCIsInRhbiIsIlZlYzIiLCJWZWMzIiwiS0VZX0xFRlQiLCJLRVlfUklHSFQiLCJLRVlfRlJPTlQiLCJLRVlfQkFDSyIsIktFWV9VUCIsIktFWV9ET1dOIiwiRlBTS2V5Ym9hcmQiLCJ3aW5kb3ciLCJMIiwiUiIsIkYiLCJCIiwiVSIsIkQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJjb2RlIiwiZ2V0TFIiLCJnZXRVRCIsImdldEZCIiwiRlBTTW91c2UiLCJjYW1lcmEiLCJzZW5zaXRpdml0eSIsImxhc3RNb3ZlbWVudFgiLCJsYXN0TW92ZW1lbnRZIiwiYWJzIiwibW92ZW1lbnRYIiwibW92ZW1lbnRZIiwiTGlnaHQiLCJnZXRYIiwiZ2V0WSIsImdldFoiLCJmZXRjaEltYWdlRGF0YSIsInNyYyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJjdnMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ3aWR0aCIsImNlaWwiLCJoZWlnaHQiLCJjdHgiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwiZ2V0SW1hZ2VEYXRhIiwib25lcnJvciIsImUiLCJmZXRjaFRleHQiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJ0ZXh0IiwicHJlcHJvY2Vzc1RleHQiLCJsaW5lcyIsInJlcGxhY2UiLCJzcGxpdCIsImZvckVhY2giLCJsaW5lIiwic3RhcnRzV2l0aCIsInB1c2giLCJGYWNlIiwibG9hZE10bCIsIm10bFVybCIsIm10bHMiLCJtdGxOYW1lIiwibXRsTWFwS2QiLCJ0ZXJtcyIsIm5hbWUiLCJtYXBLZCIsIkdlb21ldHJ5QmFzZSIsInZlcnRpY2VzIiwibm9ybWFscyIsInV2Q29vcmRzIiwiYWRkRmFjZSIsImFkZFRyaWFuZ2xlIiwidjEiLCJ2MiIsInYzIiwidXYxIiwidXYyIiwidXYzIiwic3VyZmFjZU5vcm1hbCIsImdldFN1cmZhY2VOb3JtYWwiLCJhZGRWZXJ0ZXgiLCJhZGRVVkNvb3JkIiwiYWRkTm9ybWFsIiwiYSIsImIiLCJub3JtYWwiLCJ2ZXJ0ZXgiLCJ1dkNvb3JkIiwiZ2V0VmVydGljZXMiLCJnZXROb3JtYWxzIiwiZ2V0VVZDb29yZHMiLCJJbnN0YW5jZWRDdWJlIiwic3VwZXIiLCJ0ZXh0dXJlSW1hZ2VzIiwiaW5zdGFuY2VQb3NpdGlvbnMiLCJpbnN0YW5jZVJvdGF0aW9ucyIsImluc3RhbmNlVGV4dHVyZUlkcyIsIkEiLCJDIiwiRSIsIkciLCJIIiwiZ2V0T2Zmc2V0cyIsImFkZEluc3RhbmNlIiwidGV4dHVyZUlkIiwiZmFjZSIsIlNPVVRIIiwic2V0VGV4dHVyZUltYWdlcyIsImdldFRleHR1cmVJbWFnZXMiLCJ0ZXh0dXJlSW1hZ2UiLCJnZXRJbnN0YW5jZVBvc2l0aW9ucyIsImluc3RhbmNlUG9zaXRpb24iLCJnZXRJbnN0YW5jZVJvdGF0aW9ucyIsImluc3RhbmNlUm90YXRpb24iLCJnZXRJbnN0YW5jZVRleHR1cmVJZHMiLCJpbnN0YW5jZVRleHR1cmVJZCIsImdldEluc3RhbmNlQ291bnQiLCJnZXRWZXJ0ZXhDb3VudCIsIkluc3RhbmNlZEN1c3RvbU1lc2giLCJ2Iiwidm4iLCJ2dCIsImYiLCJ2ZXJ0ZXhDb3VudCIsIm4xIiwibjIiLCJuMyIsIlRPUCIsIkluc3RhbmNlZFNxdWFyZSIsIlVMIiwiVVIiLCJMTCIsIkxSIiwiY2xlYXJDb2xvciIsInIiLCJnIiwiUmVuZGVyZXIiLCJkZXZpY2UiLCJjb25maWd1cmUiLCJmb3JtYXQiLCJuYXZpZ2F0b3IiLCJncHUiLCJnZXRQcmVmZXJyZWRDYW52YXNGb3JtYXQiLCJhbHBoYU1vZGUiLCJkZXB0aFRleHR1cmUiLCJjcmVhdGVUZXh0dXJlIiwic2l6ZSIsImNhbnZhcyIsInVzYWdlIiwiR1BVVGV4dHVyZVVzYWdlIiwiUkVOREVSX0FUVEFDSE1FTlQiLCJzaGFkZXJNb2R1bGUiLCJjcmVhdGVTaGFkZXJNb2R1bGUiLCJwaXBlbGluZURlc2NyaXB0b3IiLCJtb2R1bGUiLCJlbnRyeVBvaW50IiwiYnVmZmVycyIsImF0dHJpYnV0ZXMiLCJzaGFkZXJMb2NhdGlvbiIsIm9mZnNldCIsImFycmF5U3RyaWRlIiwic3RlcE1vZGUiLCJmcmFnbWVudCIsInRhcmdldHMiLCJwcmltaXRpdmUiLCJ0b3BvbG9neSIsImN1bGxNb2RlIiwibGF5b3V0IiwiZGVwdGhTdGVuY2lsIiwiZGVwdGhXcml0ZUVuYWJsZWQiLCJkZXB0aENvbXBhcmUiLCJyZW5kZXJQaXBlbGluZSIsImNyZWF0ZVJlbmRlclBpcGVsaW5lIiwic2FtcGxlciIsImNyZWF0ZVNhbXBsZXIiLCJtYWdGaWx0ZXIiLCJtaW5GaWx0ZXIiLCJudW1MaWdodHNCdWZmZXIiLCJjcmVhdGVCdWZmZXIiLCJHUFVCdWZmZXJVc2FnZSIsIlVOSUZPUk0iLCJDT1BZX0RTVCIsImxpZ2h0c0J1ZmZlciIsInZpZXdCdWZmZXIiLCJwcm9qZWN0aW9uQnVmZmVyIiwiYmluZGluZ3MiLCJNYXAiLCJyZW5kZXIiLCJzY2VuZSIsImNvbW1hbmRFbmNvZGVyIiwiY3JlYXRlQ29tbWFuZEVuY29kZXIiLCJsaWdodHMiLCJnZXRMaWdodHMiLCJsaWdodHNEYXRhIiwiRmxvYXQzMkFycmF5IiwiZmxhdE1hcCIsImxpZ2h0IiwibnVtTGlnaHRzIiwiVWludDMyQXJyYXkiLCJ2aWV3IiwicHJvamVjdGlvbiIsInF1ZXVlIiwid3JpdGVCdWZmZXIiLCJiZWdpblJlbmRlclBhc3MiLCJjb2xvckF0dGFjaG1lbnRzIiwiY2xlYXJWYWx1ZSIsImxvYWRPcCIsInN0b3JlT3AiLCJnZXRDdXJyZW50VGV4dHVyZSIsImNyZWF0ZVZpZXciLCJkZXB0aFN0ZW5jaWxBdHRhY2htZW50IiwiZGVwdGhDbGVhclZhbHVlIiwiZGVwdGhMb2FkT3AiLCJkZXB0aFN0b3JlT3AiLCJlbmQiLCJnZXRNZXNoZXMiLCJtZXNoIiwiYmluZGluZyIsImdldCIsInRleHR1cmVXaWR0aCIsInRleHR1cmVIZWlnaHQiLCJ0ZXh0dXJlQ291bnQiLCJ0ZXh0dXJlIiwiVEVYVFVSRV9CSU5ESU5HIiwidGV4dHVyZUJ1ZmZlciIsIkNPUFlfU1JDIiwibWFwcGVkQXRDcmVhdGlvbiIsInBpeGVsRGF0YSIsIlVpbnQ4QXJyYXkiLCJnZXRNYXBwZWRSYW5nZSIsImlkeCIsInNldCIsImRhdGEiLCJ1bm1hcCIsImNvcHlCdWZmZXJUb1RleHR1cmUiLCJidWZmZXIiLCJieXRlc1BlclJvdyIsInJvd3NQZXJJbWFnZSIsImRlcHRoT3JBcnJheUxheWVycyIsImJpbmRHcm91cCIsImNyZWF0ZUJpbmRHcm91cCIsImdldEJpbmRHcm91cExheW91dCIsImVudHJpZXMiLCJyZXNvdXJjZSIsIm9mZnNldHMiLCJvZmZzZXRCdWZmZXIiLCJieXRlTGVuZ3RoIiwiVkVSVEVYIiwibm9ybWFsQnVmZmVyIiwicG9zaXRpb25zIiwicG9zaXRpb25CdWZmZXIiLCJyb3RhdGlvbnMiLCJyb3RhdGlvbkJ1ZmZlciIsInV2cyIsInV2QnVmZmVyIiwidGV4dHVyZUlkcyIsInRleHR1cmVJZEJ1ZmZlciIsInJlbmRlclBhc3MiLCJzZXRQaXBlbGluZSIsInNldEJpbmRHcm91cCIsInNldFZlcnRleEJ1ZmZlciIsImRyYXciLCJzdWJtaXQiLCJmaW5pc2giLCJTY2VuZSIsIm1lc2hlcyIsImFkZE1lc2giLCJpbmRleE9mIiwicmVtb3ZlTWVzaCIsInNwbGljZSIsImFkZExpZ2h0IiwicmVtb3ZlTGlnaHQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJhZGFwdGVyIiwicmVxdWVzdEFkYXB0ZXIiLCJyZXF1ZXN0RGV2aWNlIiwiaW5mbyIsInJhbmRvbUNvb3JkIiwiZmxvb3IiLCJyYW5kb20iLCJtZXNoMSIsIm1lc2gyIiwibWVzaDMiLCJvYmoiLCJvYmpVcmwiLCJvYmplY3RzIiwibWF0ZXJpYWxzIiwiTnVtYmVyIiwiZmYiLCJsb2FkT2JqIiwibWVzaDQiLCJtdGwiLCJmaW5kIiwibWF0ZXJpYWwiLCJyZW5kZXJlciIsImtleWJvYXJkIiwiZGVsdGFZIiwid2hlZWxab29tIiwicmVxdWVzdElkIiwibGFzdFRpbWVzdGFtcCIsInZMUiIsInZVRCIsInZGQiIsImdldENhbVZlbCIsInB2IiwiY3YiLCJzdGVwIiwidGltZXN0YW1wIiwidGltZUdhcCIsInRleHRDb250ZW50IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicG9pbnRlckxvY2tFbGVtZW50IiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsInJlcXVlc3RQb2ludGVyTG9jayJdLCJzb3VyY2VSb290IjoiIn0=